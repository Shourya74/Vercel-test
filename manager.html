<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, intial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
        <link rel="stylesheet" href="bootstrap-5.0.0-beta2-dist/css/bootstrap-grid.min.css">
        <link rel="stylesheet" href="bootstrap-5.0.0-beta2-dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="main.css">

        <!-- common JS for local development -->
          <!-- <script src="common.js"></script> -->
          <!-- for production -->
          <script src="https://firebasestorage.googleapis.com/v0/b/orcus-fb184.appspot.com/o/release%2Fcommon.js?alt=media&token=6dc6c1af-e542-47bf-be33-a53dae858494"></script>
          
          <script src="https://firebasestorage.googleapis.com/v0/b/orcus-fb184.appspot.com/o/release%2Fservice-layer.js?alt=media&token=50818057-52fa-4c7e-b28b-efd29f03b991"></script>

          <script src="https://raw.githack.com/eKoopmans/html2pdf/master/dist/html2pdf.bundle.js"></script>
          <link href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
        <link rel="stylesheet" href="bootstrap-5.0.0-beta2-dist/css/bootstrap-grid.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">        <!-- <link rel="stylesheet" href="main.css"> -->
        <link rel="stylesheet" type="text/css" href="https://firebasestorage.googleapis.com/v0/b/orcus-fb184.appspot.com/o/release%2Fmain.css?alt=media&token=fb7c8441-403a-40a0-9071-09fe0df33859">
        <!-- <script src="script.js"></script> -->
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <!-- <script src="bootstrap-5.0.0-beta2-dist/js/bootstrap.min.js"></script> -->
        <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" 
        integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" 
        crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
         integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" 
         crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

        <title>
            MANAGER
        </title>
    </head>
  <body>
    <div id="loader"></div>
    
    <!-- ################################# Context menu ########################## -->
    <div id="context-menu">
      <div class="item">
        <i class="fa fa-cut"></i> Cut
      </div>
      <div class="item">
        <i class="fa fa-clone"></i> Copy
      </div>
      <div class="item">
        <i class="fa fa-paste"></i> Paste
      </div>
      <div class="item">
        <i class="fas fa-trash"></i> Delete
      </div>
      <hr>
      <div class="item">
        <i class="fas fa-sync-alt"></i> Reload
      </div>
      <div class="item">
        <i class="fa fa-times"></i> Exit
      </div>
    </div>     
   <!-- ########################## Top Navigation bar ########################## --> 
          <nav class="navbar topnav sticky-top navbar-expand-lg">
            <div class="container-fluid">
              <a class="navbar-brand" href="#" title="Click to REFRESH"><img src="assets/logo.png" alt="ORCUS logo"></a>
              <button class="navbar-toggler" id="refresh-button" type="button" data-bs-toggle="collapse" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa fa-bars"></i> 
              </button>
              <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="nav navbar-nav nav-tabs" id="managerNavTabs">
                  <li role="presentation" class="nav-item">
                    <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#managerhome" role="tab" type="button" aria-controls="Manager Home" aria-selected="false"><i class="fas fa-home"></i></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" data-bs-toggle="modal" data-bs-target="#manager-settings"><i class="fas fa-cogs"></i></a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"  id="managergeneralddm" role="button" data-bs-toggle="dropdown" aria-expanded="false">General <span id="isPendingGeneral" class="badge eventbadge">9</span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="managergeneralddm">
                     <a class="dropdown-item" data-bs-target="#managerrequest" data-bs-toggle="tab" type="button" role="tab" aria-controls="manager requests page" aria-selected="false">Requests <span id="isPendingRequest" class="badge eventbadge">9</span></a>
                     <a class="dropdown-item" data-bs-target="#managermaintenance" data-bs-toggle="tab" type="button" role="tab" aria-controls="manager maintenance page" aria-selected="false">Maintenance</a>
                     <hr class="dropdown-divider">
                     <a class="dropdown-item" data-bs-target="#manageranalytics" data-bs-toggle="tab" type="button" role="tab" aria-controls="manager maintenance page" aria-selected="false">Analytics</a>
                     <a class="dropdown-item" href="#">Help</a>
                     <hr class="dropdown-divider">
                     <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#manager-profile"><i class="fas fa-user-alt"></i> Profile</a>
                    </ul>
                  </li>
                  <li class="nav-item" role="presentation">
                    <a class="nav-link" data-bs-toggle="tab" data-bs-target="#managerspecialtools" role="tab" type="button" aria-controls="Manager special tools" aria-selected="false">Special Tools</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle"  id="managerhandtoolsddm" role="button" data-bs-toggle="dropdown" aria-expanded="false">Hand Tools</a>
                    <ul class="dropdown-menu" aria-labelledby="managerhandtoolsddm">
                      <a class="dropdown-item" data-bs-toggle="tab" data-bs-target="#managerhandtools" type="button" aria-controls="Manager Hand Tools" aria-selected="false">Browse Hand Tools</a>
                      <a class="dropdown-item" data-bs-toggle="tab" data-bs-target="#managerassigntools" type="button" aria-controls="Manager Assign Tools" aria-selected="false">Assign Tools</a>
                      <hr class="dropdown-divider">
                      <a class="dropdown-item" data-bs-target="#managerinspection" data-bs-toggle="tab" role="tab" type="button" aria-controls="Manager Inspection" aria-selected="false">Tool Inspection</a>
                      <hr class="dropdown-divider">
                      <a class="dropdown-item" data-bs-target="#transfer-tools" data-bs-toggle="modal">Transfer Tools</a>
                    </ul>    
                  </li>
                  <li class="nav-item" role="presentation">
                    <a class="nav-link" data-bs-target="#managerequipment" data-bs-toggle="tab"  type="button" role="tab" aria-controls="manager equipment" aria-selected="false">Equipment</a>
                  </li>
                  <li class="nav-item" role="presentation">
                    <a class="nav-link" data-bs-target="#managermaterials" data-bs-toggle="tab"  type="button" role="tab" aria-controls="manager material" aria-selected="false">Materials</a>
                  </li>
                  <li class="nav-item" role="presentation">
                    <a class="nav-link" data-bs-toggle="tab" type="button" data-bs-target="#managerassets" role="tab" aria-controls="Manager Assets" aria-selected="false">Assets</a>
                   </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="managerrecordsddm" role="button" data-bs-toggle="dropdown" aria-expanded="false">Records <span id="isPendingRecords" class="badge eventbadge">9</span></a>
                    <ul class="dropdown-menu" aria-labelledby="managerrecordsddm">
                      <a class="dropdown-item" data-bs-toggle="tab" data-bs-target="#managerissuehistory" type="button" role="tab" aria-controls="Manager Issue History" aria-selected="false">Issue History</a>
                      <a class="dropdown-item" data-bs-toggle="tab" data-bs-target="#managerrepairhistory" type="button" role="tab" aria-controls="Manager Repair History" aria-selected="false">Repair History <span id="isPendingRepairHistory" class="badge eventbadge">9</span></a>
                      <a class="dropdown-item" data-bs-toggle="tab" data-bs-target="#managerarchive" type="button" role="tab" aria-controls="Manager archive" aria-selected="false">Archive</a>
                    </ul>    
                  </li>
                  <li class="nav-item" role="presentation">
                    <a class="nav-link" data-bs-target="#managerpeople" data-bs-toggle="tab" type="button" role="tab" aria-controls="Manager People" aria-selected="false">People</a>
                  </li>
                  <li class="nav-item">                              
                    <a onclick="logout()" class="nav-link logoutr" href="#"><i class="fas fa-sign-out-alt"></i></a>
                  </li> 
                </ul>
              </div>
            </div>
          </nav>
    <!-- ############################################### Manager Tabs ############################################## -->
  <div class="tab-content" id="tabcontentmanager">
     <!-- ######################################## Manager home START ######################################## -->
     <div class="tab-pane fade show active" id="managerhome" role="tabpanel">
      <h1 class="bg-dark bg-gradient ">Home</h1>
      <div class="quickstats bg-gradient bg-dark">
        <div class="qckstatcard bg-gradient bg-dark">
         <span>Tools</span>
         <span id="total-tools"></span>
        </div>
        <div class="qckstatcard bg-gradient bg-dark">
          <span>Equipment</span>
          <span id="total-eqp"></span>
        </div>
        <div class="qckstatcard bg-gradient bg-dark">
          <span>Materials</span>
          <span id="total-materials"></span>
        </div>
        <div class="qckstatcard bg-gradient bg-dark">
          <span>Under Maintenance</span>
          <span id="total-under-maintenance"></span>
        </div>
        <div class="qckstatcard bg-gradient bg-dark">
          <span>Pending Returns</span>
          <span id="total-pending-returns">35</span>
        </div>
        <div class="qckstatcard bg-gradient bg-dark">
          <span>Pending Reports</span>
          <span id="pending-reports"></span>
        </div>
      </div>
      <h2 class="bg-dark bg-gradient">Quick Access Panel</h2>
      <div class="quicksearchbar bg-gradient bg-dark">
         <input id="inventory-input" class="form-control sm-2 tsrch" type="search" placeholder="INVENTORY" aria-label="Search" aria-labelledby="inventory-input">
         <input id="people-input" class="form-control sm-2 tsrch" type="search" placeholder="PEOPLE" aria-label="Search">
      </div>
      <h2 class="bg-gradient bg-dark">Notifications</h2>
      <div class="managernotifications">
        <div class="table-responsive">
          <table id="notifications-table" class="table table-dark table-borderless managernotificationtable">
            <thead>
              <tr>
                <th scope="col">
                  <input id="notifications-search" onkeyup="executeSearchNotifications()" class="form-control" type="search" placeholder="Search" aria-label="Search">
                </th>
                <th scope="col">
                  <input onchange="executeSearchNotifications()" id="notifications-date-search" class="form-control" type="search" placeholder="Date" onfocus="(this.type='date')">
                </th>
                <th scope="col" class="freezecol">
                  <button onclick="clearNotificationsFilter()" type="button" class="btn managerclearall"><i class="fas fa-trash"></i> Clear all</i></button>
                </th>
              </tr>
            </thead>
            <tbody id="notifications-tbody">
              <tr>
              <td>Naivedya Jain (46) has issued tools</td>
              <td>3/22/2021, 10:19:53 AM</td>
              <td class="freezecoldata">
                <button type="button" class="btn mgr-notificcation-btn"><i class="fas fa-trash"><span class="btnref"> Clear</span></i></button>              
                <button type="button" class="btn mgr-notificcation-btn"><i class="fas fa-external-link-alt"><span class="btnref"> View</span></i></button>
              </td>
            </tr>
            <tr>
              <td>Naivedya Jain (46) has issued tools</td>
              <td>3/22/2021, 10:19:53 AM</td>
              <td class="">
                <button type="button" class="btn mgr-notificcation-btn"><i class="fas fa-trash"><span class="btnref"> Clear</span></i></button>              
                <button type="button" class="btn mgr-notificcation-btn"><i class="fas fa-external-link-alt"><span class="btnref"> View</span></i></button>
              </td>
            </tr>
            
            </tbody>
          </table>
        </div>
      </div>
     </div>
      <!-- ######################################## Manager home END ######################################## -->
    <!-- ######################################## Manager request tab START ######################################## -->
    <div class="tab-pane fade" id="managerrequest" role="tabpanel">
      <div class="topnav2"> 
        <div class="navbar navbar-expand-lg bg-dark">
          <div class="container-fluid justify-content-start">
            <ul class="nav nav-tabs">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" data-bs-target="#issue-item-manager" data-bs-toggle="tab" type="button" role="tab" aria-controls="" aria-selected="true">Item issue</a>
              </li>
              <li class="nav-item" role="presentation">
                <a class="nav-link" data-bs-target="#surender-tools-manager" data-bs-toggle="tab" type="button" role="tab" aria-controls="" aria-selected="false">Surrender tools</a>
              </li>
              <li class="nav-item" role="presentation">
                <a class="nav-link" data-bs-target="#" data-bs-toggle="tab" type="button" role="tab" aria-controls="" aria-selected="false">Tools SHARE</a>
              </li>
              <li class="nav-item" role="presentation">
                <a class="nav-link" data-bs-target="#profile-edit-manager" data-bs-toggle="tab" type="button" role="tab" aria-controls="" aria-selected="false">Profile edit</a>
              </li>
              <li class="nav-item" role="presentation">
                <a class="nav-link" data-bs-target="#manager-new-user" data-bs-toggle="tab" type="button" role="tab" aria-controls="" aria-selected="false">New User</a>
              </li>
            </ul>
        </div>
       </div>
      </div>
      <!-- ##################### manager request tab START ##################### -->
      <div class="tab-content" id="request-tabs-manager">
        <div class="tab-pane fade show active" id="issue-item-manager" role="tabpanel">    
          <div class="row bg-gradient bg-dark"  id="pending-request-div">
          <!-- new card -->
          <div class="card">
            <div class="card-header">
              Request </div>
            <div class="card-body">
            <div class="card-title">
              <h5>Technician name</h5>
              <p>Time Stamp 11:40:78 22/02/2021</p> 
            </div> 
            <ul class="list-group requestlist">
              <li class="list-group-item requestitem">
              Tool #1 
              <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
                </button>
              </li>
              <li class="list-group-item requestitem">
                Tool #2
                <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
                </button>
              </li>
              <li class="list-group-item requestitem">
                Tool #3
                <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
              </li> 
              <li class="list-group-item requestitem">
                Tool #4
                <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
              </li>     
              <li class="list-group-item requestitem">
                Tool #5
                <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
              </li> 
              <li class="list-group-item requestitem">
                  Tool #6 
                  <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
              </li> 
            </ul>
              <div class="btn_grp">
                <button type="button" class="btn accept"><i class="fas fa-vote-yea"></i> Accept all</button>
                <button type="button" class="btn reject"><i class="fas fa-trash"></i> Reject all</button>
              </div>
          </div>
          </div>   
        </div>    
        <form class="d-flex mb-2 bg-dark bg-gradient">
          <input class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
          <button onclick="exportAsPDF('request-table',1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
         </form>
        <!-- ############# Pending returns table ############# -->
          <div class="table-responsive">
          <table id = "request-table" class="table">
          <thead class="table-dark bg-dark bg-gradient align-middle ">
            <tr>
              <th scope="col">Employee (ID)</th>
              <th scope="col">Item Name</th>
              <th scope="col">Item Code</th>
              <th scope="col">Issue time
                <button class="fltrddmbtn" id="return-tbl-issue-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="return-tbl-issue-ddm">
                  <li><input class="filterddm" type="text" name="fromdate" id="return-tbl-issue-from" placeholder="From: hh-mm-AM/PM " onfocus="(this.type='time')"></li>   
                  <li><input class="filterddm" type="text" name="todate" id="return-tbl-issue-to" placeholder="To: hh-mm-AM/PM" onfocus="(this.type='time')"></li>   
                </ul>
              </th>
              <th scope="col">Return Time</th>
              <th scope="col">status</th>
            </tr>
          </thead>
          <tbody id="request-tbody">
            <tr>
            <td>asdf</td>
            <td>hfhfg</td>
            <td>hfghfghf</td>
            <td>dsfsdf</td>
            <td><i class="far fa-clock statuspending"> PENDING</i></td>
            </tr>
          </tbody>
          </table>
           </div> 
        </div>
        <!-- ##################### Manager Surrender Tools ##################### -->
        <div class="tab-pane fade" id="surender-tools-manager" role="tabpanel">
          <h1 class="bg-gradient bg-dark">Surrender tools Requests</h1>
          <form class="d-flex bg-dark bg-gradient">
            <input class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
            <button onclick="exportAsPDF('surrender-request-table',1)" type="button" class="xbtn bg-dark bg-gradient"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
          </form>
        <div class="table-responsive">
          <table class="table" id="surrender-request-table">
            <thead class="table-dark bg-dark bg-gradient align-middle ">
              <tr>
                <th scope="col">Employee (ID)</th>
                <th scope="col">Item Name</th>
                <th scope="col">Item Code</th>
                <th scope="col">Item Status
                  <button class="fltrddmbtn" id="surrender-tools-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                  <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="surrender-tools-status-ddm">
                    <li><a class="dropdown-item" href="#">OK</a><li>
                    <li><a class="dropdown-item" href="#">Damage</a><li>   
                    <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
                    <li><a class="dropdown-item" href="#">Missing</a></li>
                    <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
                    <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
                  </ul>
                </th>
                <th scope="col">Surrender time
                  <button class="fltrddmbtn" id="srrndr-time-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                  <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="srrndr-time-ddm">
                    <li><input class="filterddm" type="text" name="fromdate" id="srrndr-time-from" placeholder="From: Date" onfocus="(this.type='date')"></li>   
                    <li><input class="filterddm" type="text" name="todate" id="srrndr-time-to" placeholder="To: Date" onfocus="(this.type='date')"></li>   
                  </ul>
                </th>
                <th scope="col">Resolve time
                  <button class="fltrddmbtn" id="srrndr-resolve-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                  <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="srrndr-resolve-ddm">
                    <li><input class="filterddm" type="text" name="fromdate" id="srrndr-resolve-from" placeholder="From: Date" onfocus="(this.type='date')"></li>   
                    <li><input class="filterddm" type="text" name="todate" id="srrndr-resolve-to" placeholder="To: Date" onfocus="(this.type='date')"></li>   
                  </ul>
                </th>
                <th scope="col">status
                  <button class="fltrddmbtn" id="surrender-tools-resolve-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                  <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="surrender-tools-resolve-status-ddm">
                    <li><a class="dropdown-item" href="#">PENDING</a><li>   
                    <li><a class="dropdown-item" href="#">Accepted</a><li>   
                    <li><a class="dropdown-item" href="#">Rejected</a></li>
                  </ul>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
              <td>Naivedya Jain (46)</td>
              <td>Compression gauge</td>
              <td>VAG1763</td>
              <td><i class="fas fa-exclamation statuspartiallydamaged"></i> partially damaged</td>
              <td>3/4/2021, 3:44:07 PM</td>
              <td> <i class="far fa-clock statuspending"> PENDING</i> | 3/4/2021, 3:44:27 PM</td>
              <td>
                <button type="button" class="btn btn-secondary acceptbtn" title="Accept"><i class="fas fa-check"></i><span class="btnref"> Accept</span></button>
                <button type="button" class="btn btn-secondary rejectbtn" title="Reject"><i class="fas fa-times"></i><span class="btnref"> Reject</span></button>
                <span class="badge badgecheck"><i class="fas fa-check"></i>  Accepted</span>
                <span class="badge badgerejected"><i class="fas fa-times"></i> Rejected</span>
              </td>
              </tr>
            </tbody>
          </table>
          </div> 
        </div>
        <!-- ##################### Manager profile edit  ##################### -->
        <div class="tab-pane fade" id="profile-edit-manager" role="tabpanel">
          <h1 class="bg-gradient bg-dark">Profile Edit</h1>
          <form class="d-flex bg-dark bg-gradient">
            <input class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
            <button onclick="exportAsPDF('modify-tool-table',1)" type="button" class="xbtn bg-dark bg-gradient"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
          </form>
          <div class="table-responsive">
            <table class="table">
              <thead class="table-dark bg-dark bg-gradient align-middle ">
                <tr>
                  <th scope="col">Employee (ID)</th>
                  <th scope="col">FIeld</th>
                  <th scope="col">Current</th>
                  <th scope="col">UPDATED</th>
                  <th scope="col">status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                <td>Naivedya Jain (46)</td>
                <td>Age</td>
                <td>18</td>
                <td>22</td>
                <td> 
                  <button type="button" class="btn btn-secondary acceptbtn" title="Accept"><i class="fas fa-check"></i><span class="btnref"> Accept</span></button>
                  <button type="button" class="btn btn-secondary rejectbtn" title="Reject"><i class="fas fa-times"></i><span class="btnref"> Reject</span></button>
                  <span class="badge badgecheck"><i class="fas fa-check"></i>  Accepted</span>
                  <span class="badge badgerejected"><i class="fas fa-times"></i> Rejected</span>
                </td>
                </tr>
              </tbody>
            </table>
            </div> 
          </div>
        <!-- ##################### Manager new user request ##################### -->
        <div class="tab-pane fade" id="manager-new-user" role="tabpanel"> 
          <h1 class="bg-gradient bg-dark">New User Request</h1>
          <form class="d-flex bg-dark bg-gradient">
            <input class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
            <button onclick="exportAsPDF('new-user-request-table',1)" type="button" class="xbtn bg-dark bg-gradient"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
          </form>
          <div class="table-responsive">
            <table id="new-user-request-table" class="table">
              <thead class="table-dark bg-dark bg-gradient align-middle ">
                <tr>
                  <th scope="col">Employee (ID)</th>
                  <th scope="col">e-mail</th>
                  <th scope="col">Contact</th>
                  <th scope="col">Request time</th>
                  <th scope="col">Resolve time</th>
                  <th scope="col">status</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                <td>Naivedya Jain (46) 
                  <button type="button" class="btn btn-secondary userdetailsbtn" data-bs-target="#new-user-details" data-bs-toggle="modal" title="New user details"><i class="fas fa-clipboard userdetails"></i><span class="btnref"> User Details</span></button></td>
                <td>reachnaivedya@gmail.com</td>
                <td>+919782383338</td>
                <td>3/4/2021, 3:44:07 PM</td> 
                <td>3/4/2021, 3:44:27 PM</td>
                <td> 
                  <button type="button" class="btn btn-secondary acceptbtn" title="Accept"><i class="fas fa-check"><span class="btnref">Accept</span></i></button>
                  <button type="button" class="btn btn-secondary rejectbtn" title="Reject"><i class="fas fa-times"></i><span class="btnref"> Reject</span></button>
                  <span class="badge badgecheck"><i class="fas fa-check"></i>  Accepted</span>
                  <span class="badge badgerejected"><i class="fas fa-times"></i> Rejected</span>
                </td>
                </tr>
              </tbody>
            </table>
            </div> 

        </div>
     </div>
    </div>
    <!-- ######################################## Manager request tab END ########################################### -->
    <!-- ######################################## Manager Maintenance tab START ##################################### -->
    <div class="tab-pane fade" id="managermaintenance" role="tabpanel">
      <h1 class="bg-dark bg-gradient">Maintenance</h1>
      <div class="undermaintenance">
        <h2 class="bg-gradient bg-dark">Under Maintenance</h2>
          <form class="d-flex bg-dark bg-gradient">
          <input id="under-maintenance-search" onkeyup="executeSearchUnderMaintenance()" class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
          <button onclick="exportAsPDF('under-maintenance-table',1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
          </form>
        <div class="table-responsive ">  
          <table id="under-maintenance-table" class="table">
          <thead class="table-dark align-middle">
          <tr>
            <th scope="col">Code</th>
            <th scope="col">Name</th>
            <!-- <th scope="col">Status
              <button class="btn bg-dark fltrddmbtn bg-gradient dropdown-toggle" id="spcl-tools-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
              <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="spcl-tools-status-ddm">
                <li><a class="dropdown-item" href="#">Damage</a><li>   
                <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
                <li><a class="dropdown-item" href="#">Missing</a></li>
                <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
                <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
              </ul>
            </th> -->
            <th scope="col">Servicing since</th>
            <th scope="col">Remarks</th>
            <th scope="col" style="width: fit-content;">Actions</th>
          </tr>
          </thead>
          <tbody>
          <tr>
          <td>3074/1</td>
          <td>Thrust Plate</td>
          <td>18 Mar 2021 04:15 PM</td>
          <td>+91978233338</td>
          <td>
            <button type="button" class="btn btn-secondary resolvebtn" data-bs-toggle="modal" data-bs-target="#resolve" title="Resolve report"><i class="fas fa-hand-sparkles"></i> Resolve</button>
          </td> 
          </tr>
          </tbody>
          </table>
          </div>
      </div>
      <div class="maintenancedue">
        <h2 class="bg-gradient bg-dark">Maintenance Due</h2>
          <form class="d-flex bg-dark bg-gradient">
          <input id="maintenance-due-search" onkeyup="executeSearchMaintenanceDue()" class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
          <div class="input-group">
            <input type="number" min="1" step="1" class="form-control sm-2 tsrch" placeholder="maintenance period" aria-label="Text input with dropdown button">
            <button class="fltrddmbtn btn" type="button" id="custom-frqncy-ddm" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
            <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="custom-frqncy-ddm">
              <li><a class="dropdown-item" href="#">Day(s)</a></li>
              <li><a class="dropdown-item" href="#">Week(s)</a></li>
              <li><a class="dropdown-item" href="#">Month(s)</a></li>
            </ul>
          </div>
          <button onclick="exportAsPDF('maintenance-due-table',1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
          </form>       
          <div class="table-responsive">  
          <table id="maintenance-due-table" class="table">
          <thead class="table-dark align-middle">
          <tr>
            <th scope="col">Code</th>
            <th scope="col">Name</th>
            <th scope="col">Status
              <button class="fltrddmbtn" id="mtn-due-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
              <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="mtn-due-status-ddm">
                <li><a class="dropdown-item" href="#">OK</a><li></li>
                <li><a class="dropdown-item" href="#">Damage</a><li>   
                <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
                <li><a class="dropdown-item" href="#">Missing</a></li>
                <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
                <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
              </ul>
            </th>
            <th scope="col">Maintenance Frequency
              <button class="fltrddmbtn frqncyddbtn" id="mtn-frequency-fltr" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
              <ul class="dropdown-menu bg-dark bg-gradient" aria-labelledby="mtn-frequency-fltr">
                <li><a class="dropdown-item" href="#">1 Day</a></li>
                <li><a class="dropdown-item" href="#">1 Week</a></li>
                <li><a class="dropdown-item" href="#">1 Month</a></li>
              </ul>
            </th>
            <th scope="col">Last Service</th>
            <!-- <th scope="col">Maintenance-Plan</th> -->
            <th scope="col">Warranty</th>
            <th scope="col">Service Due</th>
            <th scope="col" style="width: fit-content;">Actions</th>
          </tr>
          </thead>
          <tbody id="pending-maintenance-tbody">
          <tr>
          <td>3074/1</td>
          <td>Thrust Plate <button type="button" class="btn btn-secondary infobtn" data-bs-target="#item-info" data-bs-toggle="modal" title="info"><i class="fas fa-info-circle"></i></i></button></td>
          <td><i class="fas fa-thumbs-up statusok"></i> OK</td>  
          <td>1 Week</td>
          <td>18 Mar 2021 04:15 PM</td>
          <td><span class="badge badgeavailable" title="Available"><i class="fas fa-check"></i> 18 sept 2021</span></td>
          <td><span class="badge badgeexpired"><i class="fas fa-times"></i> Expired 14 dec 2020</span></td>
          <td>18 jul 2021</td>
          <td>
            <button type="button" class="btn servicebtn" data-bs-toggle="modal" data-bs-target="#" title="Perform Service"><i class="fas fa-cog"></i> Service</button>
            <button type="button" class="btn skipbtn" data-bs-toggle="modal" data-bs-target="#" title="Skip Service"><i class="fas fa-angle-double-right"></i> Skip</button>
          </td> 
          </tr>
          </tbody>
          </table>
          </div>

      </div>
    </div>
    <!-- ######################################## Manager Maintenance tab END ######################################## -->
    <!-- ######################################## Manager analytics tab START ######################################## -->
    <div class="tab-pane fade" id="manageranalytics" role="tabpanel">
      <h1 class="bg-dark bg-gradient">MANAGER ANALYTICS</h1>
      <div class="inventorybasicstats bg-gradient bg-dark">
        <div class="basicstat bg-dark bg-gradient justify-content-around">
          <div class="mainstat">
            <span>Tools</span>
            <span id="AN-no-of-tools">234</span>  
            <button class="statbtn" data-bs-toggle="modal" data-bs-target="#toolStatTable"><i class="fas fa-table"></i></button>
          </div> <br>
            <div class="statinfo">
                <table class="table table-responsive">
                  <thead class="">
                    <tr>
                      <th colspan="2">info</th>
                    </tr>
                    <tbody class>
                      <tr>
                        <th>
                          Special Tools / Hand Tools
                        </th>
                        <td>
                          112/122
                        </td>
                      </tr>
                      <tr>
                        <th>
                          Cost(S.Tools/H.Tools)
                        </th>
                        <td>
                          <i class="fas fa-rupee-sign"></i> 1,000,000,000/200,000,000
                        </td>
                      </tr>
                    </tbody>
                  </thead>
                </table>
            </div>
        </div>
        <div class="basicstat bg-dark bg-gradient">
          <div class="mainstat">
           <span>Equipment</span>
           <span id="AN-no-of-equipment">123</span>
           <button class="statbtn" data-bs-toggle="modal" data-bs-target="#EquipmentStatTable"><i class="fas fa-table"></i></button>
          </div> <br>
          <div class="statinfo">
            <table class="table table-responsive">
              <thead>
                <tr>
                  <th colspan="2">info</th>
                </tr>
                <tbody>
                  <tr>
                    <th>
                      Special Tools / Hand Tools
                    </th>
                    <td>
                      112/122
                    </td>
                  </tr>
                  <tr>
                    <th>
                      Cost(S.Tools/H.Tools)
                    </th>
                    <td>
                      <i class="fas fa-rupee-sign"></i> 1,000,000,000/200,000,000
                    </td>
                  </tr>
                </tbody>
              </thead>
            </table>
        </div>  
        </div>
        <div class="basicstat bg-dark bg-gradient">
          <div class="mainstat">
           <span>Materials</span>
           <span id="AN-no-of-materials">34</span>
           <button class="statbtn" data-bs-toggle="modal" data-bs-target="#EquipmentStatTable"><i class="fas fa-table"></i></button>
          </div> <br>
          <div class="statinfo">
            <table class="table table-responsive">
              <thead>
                <tr>
                  <th colspan="2">info</th>
                </tr>
                <tbody>
                  <tr>
                    <th>
                      Special Tools / Hand Tools
                    </th>
                    <td>
                      112/122
                    </td>
                  </tr>
                  <tr>
                    <th>
                      Cost(S.Tools/H.Tools)
                    </th>
                    <td>
                      <i class="fas fa-rupee-sign"></i> 1,000,000,000/200,000,000
                    </td>
                  </tr>
                </tbody>
              </thead>
            </table>
          </div>  
        </div>
        <div class="basicstat bg-dark bg-gradient">
          <div class="mainstat">
           <span>Assets</span>
           <span id="AN-no-of-assets">455</span>
           <button class="statbtn" data-bs-toggle="modal" data-bs-target="#EquipmentStatTable"><i class="fas fa-table"></i></button>
          </div> <br>
          <div class="statinfo">
            <table class="table table-responsive">
              <thead>
                <tr>
                  <th colspan="2">info</th>
                </tr>
                <tbody>
                  <tr>
                    <th>
                      Special Tools / Hand Tools
                    </th>
                    <td>
                      112/122
                    </td>
                  </tr>
                  <tr>
                    <th>
                      Cost(S.Tools/H.Tools)
                    </th>
                    <td>
                      <i class="fas fa-rupee-sign"></i> 1,000,000,000/200,000,000
                    </td>
                  </tr>
                </tbody>
              </thead>
            </table>
          </div>  
        </div>  
        </div>
      <div class="inventorycoststats bg-dark bg-gradient">
        <div class="coststat">
          <span>Tools Cost</span>
          <span id="AN-value-of-tools">123123 </span>
        </div>
        <div class="coststat">
          <span>Equipment Cost</span>
          <span id="AN-value-of-equipment">123123 </span>
        </div>
        <div class="coststat">
          <span>Material Cost</span>
          <span id="AN-value-of-materials"> 123123 </span>
        </div>
        <div class="coststat">
          <span>Assets Cost</span>
          <span id="AN-value-of-assets">123123 </span>
        </div>
        <div class="coststat">
          <span>Total Cost</span>
          <span id="AN-total-value">123123 </span>
        </div>
      </div>
      <h2 class="bg-dark bg-gradient mb-0">Special Tools</h2>
      <div class="itemstat bg-dark bg-gradient">
        <div class="reportsgraph">
          <h4>Most Reported</h4>
          <div id="most-reported-special-tools-tile"></div>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
        <div class="reporttaggroup">
          <div class="reporttag bg-gradient bg-dark">
            <span>Damage</span>
            <span> Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Missing</span>
            <span> Frequeny</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Partially Damage</span>
            <span>Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span></span>
            <span>Frequency</span>
            <span>Response Rate</span>
            <span>Response Rate</span>
          </div>
        </div>
        <div class="statgraph">
          <h4>Most Issued Tools</h4>
          <div class="item-content" id="top-5-most-issued-tile"></div>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
      </div>
      <h2 class="bg-dark bg-gradient mb-0">Equipment</h2>
      <div class="itemstat bg-dark bg-gradient">
        <div class="reportsgraph">
          <h4>Highest Maintenance (Equipment)</h4>
          <div id="highest-maintenance-equipment-tile"></div>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
        <div class="reporttaggroup">
          <div class="reporttag bg-gradient bg-dark">
            <span>Damage</span>
            <span> Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Missing</span>
            <span> Frequeny</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Partially Damage</span>
            <span>Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span></span>
            <span>Frequency</span>
            <span>Response Rate</span>
            <span>Response Rate</span>
          </div>
        </div>
        <div class="statgraph">
          <h4>Month-Wise Maintenance Cost (Equipment)</h4>
          <div id="equipment-maintenance-cost-tile"></div>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
      </div>
      <h2 class="bg-dark bg-gradient mb-0"></h2>
      <div class="itemstat bg-dark bg-gradient">
        <div class="reportsgraph">
          <h4>Month-Wise Maintenance Cost (Tools)</h4>
          <div id="tools-maintenance-cost-tile"></div>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
        <div class="reporttaggroup">
          <div class="reporttag bg-gradient bg-dark">
            <span>Damage</span>
            <span> Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Missing</span>
            <span> Frequeny</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Partially Damage</span>
            <span>Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span></span>
            <span>Frequency</span>
            <span>Response Rate</span>
            <span>Response Rate</span>
          </div>
        </div>
        <div class="statgraph2">
          <h4>Reports</h4>
          <div id="reports-tile"></div>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
        
      </div>
      <h2 class="bg-dark bg-gradient mb-0"></h2>
      <div class="itemstat bg-dark bg-gradient">
        <div class="reportsgraph">
          <h4>Reports Resolution</h4>
          <div id="reports-resolution-tile"></div>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
        <div class="reporttaggroup">
          <div class="reporttag bg-gradient bg-dark">
            <span>Damage</span>
            <span> Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Missing</span>
            <span> Frequeny</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Partially Damage</span>
            <span>Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span></span>
            <span>Frequency</span>
            <span>Response Rate</span>
            <span>Response Rate</span>
          </div>
        </div>
        <div class="statgraph">
          <h4>Most Reported Hand Tools</h4>
          <div id="most-reported-hand-tools-tile"></div>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
      </div>
      <h2 class="bg-dark bg-gradient mb-0"></h2>
      <div class="itemstat bg-dark bg-gradient">
        <div class="reportsgraph">
          <h4>Reports</h4>
          <div id="resolution-tile"></div>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
        <div class="reporttaggroup">
          <div class="reporttag bg-gradient bg-dark">
            <span>Damage</span>
            <span> Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Missing</span>
            <span> Frequeny</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span>Partially Damage</span>
            <span>Frequency</span>
            <span>Response Rate</span>
          </div>
          <div class="reporttag bg-gradient bg-dark">
            <span></span>
            <span>Frequency</span>
            <span>Response Rate</span>
            <span>Response Rate</span>
          </div>
        </div>
        <div class="statgraph">
          <h4>Most Issued Tools</h4>
          <!-- <img src="https://image.pngaaa.com/686/511686-middle.png" width="600px" height="400px" alt="" srcset=""> -->
        </div>
      </div>
      <!-- <div class="cumalative_reports_graph bg-gradient bg-dark">
        <h2></h2>
      </div>
      <div class="reportstats">
        <div class="reportstattagg">

        </div>
      </div> -->
    </div>
    <!-- ######################################## Manager analytics tab END ######################################### -->
    <!-- ######################################## Manager Browse hand tools START ################################### -->
    <div div class="tab-pane fade" id="managerhandtools" role="tabpanel">
      <h1 class="bg-dark bg-gradient">Hand Tools</h1>
        <form class="d-flex bg-dark bg-gradient">
        <input id="hand-tools-search" onkeyup="executeSearchHandTools()" class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
        <button onclick="exportAsPDF('modify-hand-tool-table',1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
        <button type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-plus"></i><span class="btnref"> Add Tool</span></button>
        </form>  
        <div class="table-responsive ">  
        <table class="table" id="modify-hand-tool-table">
        <thead class="table-dark align-middle">
        <tr>
          <th scope="col">Tool Code</th>
          <th scope="col">Tool Name</th>
          <th scope="col">Status
            <button class="fltrddmbtn" id="handtools-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
            <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="handtools-status-ddm">
              <li><a class="dropdown-item" href="#">OK</a><li>
              <li><a class="dropdown-item" href="#">Damage</a><li>   
              <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
              <li><a class="dropdown-item" href="#">Missing</a></li>
              <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
              <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
            </ul>
          </th>
          <th scope="col">Location</th>
          <th scope="col" style="width: fit-content;">Actions</th>
        </tr>
        </thead>
        <tbody id="modify-hand-tool-tbody">
        <tr>
        <td>3074/1</td>
        <td>Thrust Plate</td>
        <td><i class="fas fa-thumbs-up statusok"></i> OK</td>
        <td>R2-D2</td>
        <td>
          <div class="btn-group mr-1 bgr" role="group" aria-label="Second group">
            <button type="button" class="btn btn-secondary reportbtn" data-bs-toggle="modal" data-bs-target="#report" title="Report item"><i class="far fa-flag"></i><span class="btnref"> Report</span></button>
            <button type="button" class="btn btn-secondary recordsbtn" data-bs-toggle="modal" data-bs-target="#indivisualrecordsmanager" title="Repair records"><i class="fas fa-file-medical-alt"></i><span class="btnref"> Records</span></button>
            <button type="button" class="btn btn-secondary infobtn" title="info"><i class="fas fa-info-circle"></i></i><span class="btnref"> Info</span></button>
            <button type="button" class="btn btn-secondary edititembtn" data-bs-toggle="modal" data-bs-target="#edit-item" title="Edit item details"><i class="fas fa-edit edititem"></i><span class="btnref"> Edit</span></button>
          </div>
        </td> 
        </tr>
        </tbody>
        </table>
        </div>
        </div>
    <!-- ######################################## Manager Browse hand tools END #####################################-->
    <!-- ######################################## Manager Assign hand tools START #####################################-->
        <div class="tab-pane fade" id="managerassigntools" role="tabpanel">
          <div class="assigntools">
              <div class="handtoolsbucket">
                <div class="table-responsive ">  
                  <table class="table">
                  <thead class="table-dark align-middle">
                    <tr>
                      <!-- <th scope="col"><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></th> -->
                      <th scope="col">Code</th>
                      <th scope="col">Name</th>
                      <th scope="col">Status
                        <button class="fltrddmbtn" id="assigntools-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                        <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="assigntools-status-ddm">
                          <li><a class="dropdown-item" href="#">OK</a><li>
                          <li><a class="dropdown-item" href="#">Damage</a><li>   
                          <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
                          <li><a class="dropdown-item" href="#">Missing</a></li>
                          <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
                          <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
                        </ul>
                      </th>
                      <th scope="col">Record</th>
                    </tr>
                  </thead>
                  <tbody id="assign-tools-table">
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                    <tr>
                      <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                      <td>3337/2</td>
                      <td>openring spanner set</td>
                      <td><i class="fas fa-check-circle statusok"></i> Available</td>
                    </tr>
                  </tbody>
                  </table>
                </div> 
              </div>
              <div class="assigntoolsection bg-gradient bg-dark">
                <input id="technician-input-assign" required class="form-control form-control-lg" type="text" placeholder="Technician (ID)" aria-label="">
                <h5>Tool List</h5>
                <div id="cart-items">
                <div id="nothing-to-show">

                  Empty Toolbox.

                </div>
                <div hidden id="div-including-buttons">
                  <ul class="list-group assigntoollist" id="actual-items">
                    <li class="list-group-item assigned-item">
                    tool #1   
                    <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
                      </button>   
                    </li>
                    <li class="list-group-item assigned-item">
                      tool #2  
                      <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
                          
                    </li>
                    <li class="list-group-item assigned-item">
                      tool #3  
                      <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
                      </button>     
                    </li>
                    <li class="list-group-item assigned-item">
                      tool #3  
                      <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
                      </button>     
                    </li>
                    <li class="list-group-item assigned-item">
                      tool #3  
                      <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
                      </button>     
                    </li>
                    <li class="list-group-item assigned-item">
                      tool #3  
                      <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
                      </button>     
                    </li>
                    <li class="list-group-item assigned-item">
                      tool #3  
                      <button type="button" class="btn-close btn-close-white" aria-label="Close"></button>
                      </button>     
                    </li>
                  </ul>
                </div>
                <button type="button" onclick="assignButtonPressed()" class="btn assignbtn" title="Assign tools"><i class="fas fa-user-check"></i> Assign</button> 
                <button type="button" class="btn cancelbtn" title="Assign tools"><i class="fas fa-times"></i> Cancel</button>
              </div>
              </div>
            </div>
        </div> 
    <!-- ######################################## Manager Assign hand tools END #####################################-->
    <!-- ######################################## Manager Special tools tab START ################################### -->
    <div class="tab-pane fade" id="managerspecialtools" role="tabpanel">
      <h1 class="bg-dark bg-gradient">Special Tools</h1>
        <form class="d-flex bg-dark bg-gradient">
        <input id="special-tools-search" onkeyup="executeSearchTools('')" class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
        <button onclick="exportAsPDF('modify-tool-table',1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
        <button type="button" class="xbtn bg-gradient bg-dark" data-bs-target="#add-item-modal" data-bs-toggle="modal" ><i class="fas fa-plus"></i><span class="btnref"> Add Tool</span></button>
        </form>
        <div class="table-responsive ">  
        <table class="table" id="modify-tool-table">
        <thead class="table-dark align-middle">
        <tr>
          <th scope="col">Tool Code</th>
          <th scope="col">Tool Name</th>
          <th scope="col">Status
            <button onchange="executeSearchTools()" class="fltrddmbtn" id="spcl-tools-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
            <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="spcl-tools-status-ddm">
              <li><a onclick="executeSearchTools('')" class="dropdown-item" href="#">All</a><li></li>
              <li><a onclick="executeSearchTools('Available')" class="dropdown-item" href="#">Available</a><li></li>
              <li><a onclick="executeSearchTools('NA (Damaged)')" class="dropdown-item" href="#">NA (Damaged)</a><li>   
              <li><a onclick="executeSearchTools('Partially Damaged')" class="dropdown-item" href="#">Partially Damaged</a><li>   
              <li><a onclick="executeSearchTools('NA (Missing)')" class="dropdown-item" href="#">NA (Missing)</a></li>
              <li><a onclick="executeSearchTools('Incomplete Kit')" class="dropdown-item" href="#">Incomplete Kit</a></li>
              <li><a onclick="executeSearchTools('Under Maintenance')" class="dropdown-item" href="#">Under Maintenance </a></li>
            </ul>
          </th>
          <th scope="col">Location</th>
          <th scope="col" style="width: fit-content;">Actions</th>
        </tr>
        </thead>
        <tbody id="modify-tool-tbody">
        <tr>
        <td>3074/1</td>
        <td>Thrust Plate</td>
        <td><i class="fas fa-check statusavailable"></i> Available</td>   
        <td>R2-D2</td>
        <td>
          <div class="btn-group mr-1 bgr" role="group" aria-label="Second group">
            <button type="button" class="btn btn-secondary reportbtn" data-bs-toggle="modal" data-bs-target="#report" title="Report item"><i class="far fa-flag"></i><span class="btnref"> Report</span></button>
            <button type="button" class="btn btn-secondary recordsbtn" data-bs-toggle="modal" data-bs-target="#indivisualrecordsmanager" title="Repair records"><i class="fas fa-file-medical-alt"></i><span class="btnref"> Records</span></button>
            <button type="button" class="btn btn-secondary infobtn" title="info"><i class="fas fa-info-circle"></i></i><span class="btnref"> Info</span></button>
            <button type="button" class="btn btn-secondary edititembtn" data-bs-toggle="modal" data-bs-target="#edit-item" title="Edit item details"><i class="fas fa-edit edititem"></i><span class="btnref"> Edit</span></button>
          </div>
        </td> 
        </tr>
        </tbody>
        </table>
        </div>
    </div>
    <!-- ######################################## Manager Special tools tab END ##################################### -->
    <!-- ######################################## Manager Equipment tab START #######################################-->
      <div class="tab-pane fade" id="managerequipment" role="tabpanel">
      <h1 class="bg-dark bg-gradient">Equipment</h1>
        <form class="d-flex bg-dark bg-gradient">
         <input id="equipment-search" onkeyup="executeSearchEquipment()" class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
         <button onclick="exportAsPDF('modify-equipment-table',1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
         <button type="button" class="xbtn bg-gradient bg-dark" data-bs-target="#add-item-modal" data-bs-toggle="modal"><i class="fas fa-plus"></i><span class="btnref"> Add Equipment</span></button>
        </form>
      <div class="table-responsive">  
      <table class="table" id="modify-equipment-table">
        <thead class="table-dark align-middle">
        <tr>
          <th scope="col">Equipment Code</th>
          <th scope="col">Equipment Name</th>
          <th scope="col">status           
          <button class="fltrddmbtn" id="equipment-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
            <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="equipment-status-ddm">
              <li><a onclick="executeSearchEquipment('')" class="dropdown-item" href="#">All</a><li></li>
              <li><a onclick="executeSearchEquipment('Available')" class="dropdown-item" href="#">Available</a><li></li>
              <li><a onclick="executeSearchEquipment('NA (Damaged)')" class="dropdown-item" href="#">NA (Damaged)</a><li>   
              <li><a onclick="executeSearchEquipment('Partially Damaged')" class="dropdown-item" href="#">Partially Damaged</a><li>   
              <li><a onclick="executeSearchEquipment('NA (Missing)')" class="dropdown-item" href="#">NA (Missing)</a></li>
              <li><a onclick="executeSearchEquipment('Incomplete Kit')" class="dropdown-item" href="#">Incomplete Kit</a></li>
              <li><a onclick="executeSearchEquipment('Under Maintenance')" class="dropdown-item" href="#">Under Maintenance </a></li>
            </ul>
          <th scope="col">Location</th>
          <th scope="col" style="width: fit-content;">Actions</th>
        </tr>
        </thead>
        <tbody id="modify-equipment-tbody">
        <tr>
          <td>2 POST/PRECESION/SF/ BAY03</td>
          <td>2 POST LIFT</td>
          <td><i class="fas fa-hourglass-half statusmaintenance"></i> Under Maintenance</td>
          <td>Service Floor -SF</td>
          <td>
            <div class="btn-group mr-1 bgr" role="group" aria-label="Second group">
            <button type="button" class="btn btn-secondary reportbtn" data-bs-toggle="modal" data-bs-target="#report" title="Report item"><i class="far fa-flag"></i><span class="btnref"> Report</span></button>
            <button type="button" class="btn btn-secondary recordsbtn" data-bs-toggle="modal" data-bs-target="#indivisualrecordsmanager" title="Repair records"><i class="fas fa-file-medical-alt"></i><span class="btnref"> Records</span></button>
            <button type="button" class="btn btn-secondary infobtn" data-bs-toggle="modal" data-bs-target="#item-info" title="info"><i class="fas fa-info-circle"></i></i><span class="btnref"> Info</span></button>
            <button type="button" class="btn btn-secondary edititembtn" data-bs-toggle="modal" data-bs-target="#edit-item" title="Edit item details"><i class="fas fa-edit edititem"></i><span class="btnref"> Edit</span></button>
            </div>
          </td> 
        </tr>
        </tbody>
      </table>
      </div> 
    </div>
    <!-- ######################################## Manager Equipment tab END ######################################## -->
    <!-- ######################################## Manager Material tab START ####################################### -->
    <div class="tab-pane fade" id="managermaterials" role="tabpanel">
      <div class="tblheading"><h1 class="bg-dark bg-gradient">Materials</h1>
      </div>
        <form class="d-flex bg-dark bg-gradient">
         <input id="materials-search" onkeyup="executeSearchMaterials()" class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
         <button onclick="exportAsPDF('update-material-table',1)" type="button" class="xbtn bg-dark bg-gradient"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
         <button type="button" class="xbtn bg-gradient bg-dark" data-bs-toggle="modal" data-bs-target="#add-material"><i class="fas fa-plus"></i><span class="btnref"> Add Material</span></button>
        </form>  
      <div class="table-responsive ">  
        <table class="table" id="update-materials-table">
        <thead class="table-dark align-middle">
          <tr>
          <th scope="col">Material Code</th>
          <th scope="col">Material Name</th>
          <th scope="col">Quantity</th>
          <th scope="col">Status
            <button class="fltrddmbtn" id="material-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
            <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="material-status-ddm">
              <li><a onclick="executeSearchMaterials('')" class="dropdown-item" href="#">All</a><li></li>
              <li><a onclick="executeSearchMaterials('Available')" class="dropdown-item" href="#">Available</a><li></li>
              <li><a onclick="executeSearchMaterials('NA (Damaged)')" class="dropdown-item" href="#">NA (Damaged)</a><li>   
              <li><a onclick="executeSearchMaterials('Partially Damaged')" class="dropdown-item" href="#">Partially Damaged</a><li>   
              <li><a onclick="executeSearchMaterials('NA (Missing)')" class="dropdown-item" href="#">NA (Missing)</a></li>
              <li><a onclick="executeSearchMaterials('Incomplete Kit')" class="dropdown-item" href="#">Incomplete Kit</a></li>
              <li><a onclick="executeSearchMaterials('Under Maintenance')" class="dropdown-item" href="#">Under Maintenance </a></li>
            </ul>
          </th>
          <th scope="col">Location</th>
          <th scope="col" style="width: fit-content;">Actions</th>
          </tr>
        </thead>
        <tbody id="update-materials-tbody">
        <tr>
          <td>asdf</td>
          <td>hfhfg</td>
          <td>25/28</td>
          <td><i class="fas fa-check statusavailable"></i> Available</td>
          <td>R2-S4</td>
          <td>
          <div class="btn-group mr-1 bgr" role="group" aria-label="Second group">
            <button type="button" class="btn btn-secondary reportbtn" data-bs-toggle="modal" data-bs-target="#report" title="Report item"><i class="far fa-flag"></i><span class="btnref"> Report</span></button>
            <button type="button" class="btn btn-secondary recordsbtn" data-bs-toggle="modal" data-bs-target="#indivisiualrecords" title="Repair records"><i class="fas fa-file-medical-alt"></i><span class="btnref"> Records</span></button>
            <button type="button" class="btn btn-secondary infobtn" title="info"><i class="fas fa-info-circle"></i></i><span class="btnref"> Info</span></button>
            <button type="button" class="btn btn-secondary edititembtn" data-bs-toggle="modal" data-bs-target="#edit-item" title="Edit item details"><i class="fas fa-edit edititem"></i><span class="btnref"> Edit</span></button>
            <button type="button" class="btn btn-secondary refillbtn" data-bs-toggle="modal" data-bs-target="#materialrefill" title="Re-fill material"><i class="fas fa-fill"></i><span class="btnref"> Re-fill</span></button>
          </div>
          </td> 
        </tr>
        </tbody>
        </table>
      </div>     
      </div>
      <!-- ######################################## Manager Materials tab END ######################################## -->
        <!-- ######################################## Manager Assets tab START ######################################## -->
        <div class="tab-pane show fade" id="managerassets" role="tabpanel">
          <h1 class="bg-dark bg-gradient">Assets</h1>
            <form class="d-flex bg-dark bg-gradient">
            <input id="assets-search" onkeyup="executeSearchAssets()" class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
            <button onclick="exportAsPDF('update-assets-table',1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
            <button type="button" class="xbtn bg-gradient bg-dark" data-bs-target="#add-item-modal" data-bs-toggle="modal"><i class="fas fa-plus"></i><span class="btnref"> Add Item</span></button>
            </form>
          <div class="table-responsive ">  
          <table class="table" id="update-assets-table">
            <thead class="table-dark align-middle">
            <tr>
              <th scope="col">Item Code</th>
              <th scope="col">Item Name</th>
              <th scope="col">status           
              <button class="fltrddmbtn" id="equipment-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="equipment-status-ddm">
                  <li><a onclick="executeSearchAssets('')" class="dropdown-item" href="#">All</a><li></li>
                  <li><a onclick="executeSearchAssets('Available')" class="dropdown-item" href="#">Available</a><li></li>
                  <li><a onclick="executeSearchAssets('NA (Damaged)')" class="dropdown-item" href="#">NA (Damaged)</a><li>   
                  <li><a onclick="executeSearchAssets('Partially Damaged')" class="dropdown-item" href="#">Partially Damaged</a><li>   
                  <li><a onclick="executeSearchAssets('NA (Missing)')" class="dropdown-item" href="#">NA (Missing)</a></li>
                  <li><a onclick="executeSearchAssets('Incomplete Kit')" class="dropdown-item" href="#">Incomplete Kit</a></li>
                  <li><a onclick="executeSearchAssets('Under Maintenance')" class="dropdown-item" href="#">Under Maintenance </a></li>
                </ul>
              <th scope="col">Location</th>
              <th scope="col" style="width: fit-content;">Actions</th>
            </tr>
            </thead>
            <tbody id="update-assets-tbody">
            <tr>
              <td>Monitor/HP-Monitor/FO/Desk-03</td>
              <td>Monitor</td>
              <td><i class="fas fa-hourglass-half statusmaintenance"></i> Under Maintenance</td>
              <td><i class="fas fa-thumbs-up statusok"></i> OK</td>
              <td>
                <div class="btn-group mr-1 bgr" role="group" aria-label="Second group">
                <button type="button" class="btn btn-secondary reportbtn" data-bs-toggle="modal" data-bs-target="#report" title="Report item"><i class="far fa-flag"></i><span class="btnref"> Report</span></button>
                <button type="button" class="btn btn-secondary recordsbtn" data-bs-toggle="modal" data-bs-target="#indivisualrecordsmanager" title="Repair records"><i class="fas fa-file-medical-alt"></i><span class="btnref"> Records</span></button>
                <button type="button" class="btn btn-secondary infobtn" data-bs-toggle="modal" data-bs-target="#item-info" title="info"><i class="fas fa-info-circle"></i></i><span class="btnref"> Info</span></button>
                <button type="button" class="btn btn-secondary edititembtn" data-bs-toggle="modal" data-bs-target="#edit-item" title="Edit item details"><i class="fas fa-edit edititem"></i><span class="btnref"> Edit</span></button>
                </div>
              </td> 
            </tr>
            </tbody>
          </table>
          </div> 
        </div>
          <!-- ######################################## Manager Assets tab START ######################################## -->
    <!-- ######################################## Manager Inspection START #######################################################-->
    <div class="tab-pane fade" id="managerinspection" role="tabpanel">
      <h1 class="bg-dark bg-gradient">Hand-tools Inspection</h1>
        <div class="insppanel">
          <form action="" class="inspdtls bg-dark bg-gradient">
            <input id="technician-input-inspection" class="input"
          type="text" list="datalistOptions" placeholder="Search Technicians by Name or ID">
            <!-- <datalist id="datalistOptions">
              
            </datalist> -->
          </form>
            <div class="dtddm">
            <select class="form-select form-select-sm selectpicker" id="month" aria-label=".form-select-sm" aria-placeholder="Month" onfocus="(this.type='select')" onchange="checklistDataModal()">
                <optgroup class="filter-options bg-gradient bg-dark" label="Month:">
                  <option value="01">January</option>   
                  <option value="02">February</option>
                  <option value="03">March</option>
                  <option value="04">April</option>
                  <option value="05">May</option>
                  <option value="06">June</option>
                  <option value="07">July</option>
                  <option value="08">August</option>
                  <option value="09">September</option>
                  <option value="10">October</option>
                  <option value="11">November</option>
                  <option value="12">December</option>
                <optgroup>
                </select>
              <select class="form-select form-select-sm filterIn" id="year" aria-label=".form-select-sm example" onfocus="(this.type='select')" onchange="checklistDataModal()"> 
                <optgroup class="filter-options bg-gradient bg-dark" label="Year:">
                  <option value="2020">2020</option>   
                  <option value="2021">2021</option>
                  <option value="2022">2022</option>
                </optgroup>
              </select>
          </div>
              <!-- ################## LEGEND TABLE ################## -->
          <div class="table-responsive">
            <table class="table bg-dark bg-gradient legend">
              <thead class="table-dark align-middle">
                <tr><th colspan="2">LEGEND</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td><i class="fas fa-square" style="color:#00ff00 ;"></i> OK</td>
                  <td><i class="fas fa-square" style="color: #ff0000;"></i> Damaged</td>
                </tr>
                <tr>
                  <td><i class="fas fa-square" style="color:#ff9900;"></i> Partially Damaged</td>
                  <td><i class="fas fa-square" style="color: #fbbe15;"></i> Missing</td>
                </tr>
                <tr>
                  <td><i class="fas fa-square" style="color: #ff0066;"></i> Holiday</td>
                  <td><i class="fas fa-square" style="color: #999966;"></i> NA</td>
                </tr>
              </tbody>
            </table>
          </div>   
        </div>  
        <br>    
    <div class="tchinspdetails">
    <div class="table-responsive">
      <table class="table inspID">
        <thead class="table-dark align-middle">
          <tr><th colspan="2">Hand-tools Inspection Report</th></tr>
        </thead>
        <tbody>
          <tr>
            <td>Name:</td>
            <td id="selected-technician-inspection"><u><b></b></u></td>
          </tr>
          <tr>
            <td>Company</td>
            <td id="selected-company-inspection"><u><b></b></u></td>
          </tr>
          <tr>
            <td>Month-year</td>
            <td><b><u id="month-year"></u></b></td>
          </tr>
          <tr><td colspan="2"><b>Filters:</b> <strike>holidays</strike><strike> Reports</strike></td>
          </tr>
        </tbody>
      </table>
    </div> 
        <!-- #################### Filter buttons vertical####################--> 
        <div class="btngrpvertical" role="group" aria-label="Basic checkbox toggle button group">
          <input type="checkbox" class="btn-check" id="btncheck1" autocomplete="off">
          <label class="btn btn-outline-dark" for="btncheck1">Hide Holidays</label>
        
          <input type="checkbox" class="btn-check" id="btncheck2" autocomplete="off">
          <label class="btn btn-outline-dark" for="btncheck2">Reports</label>

          <button type="button" class="btn btn-dark" onclick="exportAsPDF('checklist-data-table', 1)">Export</button>
        </div>
    </div>
    <hr 1px>
    <!-- #################### Inspection sheet ####################-->
    <div class="table-responsive ">  
    <table class="table" id="checklist-data-table">
      <thead class="table-dark align-middle">
        <tr>
          <th scope="col" class="insptool">Tools</th>
          <th scope="col" class="inspDay">01</th>
          <th scope="col" class="inspDay">02</th>
          <th scope="col" class="inspDay">03</th>
          <th scope="col" class="inspDay">04</th>
          <th scope="col" class="inspDay">05</th>
          <th scope="col" class="inspDay">06</th>
          <th scope="col" class="inspDay">07</th>
          <th scope="col" class="inspDay">08</th>
          <th scope="col" class="inspDay">09</th>
          <th scope="col" class="inspDay">10</th>
          <th scope="col" class="inspDay">11</th>
          <th scope="col" class="inspDay">12</th>
          <th scope="col" class="inspDay">13</th>
          <th scope="col" class="inspDay">14</th>
          <th scope="col" class="inspDay">15</th>
          <th scope="col" class="inspDay">16</th>
          <th scope="col" class="inspDay">17</th>
          <th scope="col" class="inspDay">18</th>
          <th scope="col" class="inspDay">19</th>
          <th scope="col" class="inspDay">20</th>
          <th scope="col" class="inspDay">21</th>
          <th scope="col" class="inspDay">22</th>
          <th scope="col" class="inspDay">23</th>
          <th scope="col" class="inspDay">24</th>
          <th scope="col" class="inspDay">25</th>
          <th scope="col" class="inspDay">26</th>
          <th scope="col" class="inspDay">27</th>
          <th scope="col" class="inspDay">28</th>
          <th scope="col" hidden id="29" class="inspDay">29</th>
          <th scope="col" hidden id="30" class="inspDay">30</th>
          <th scope="col" hidden id="31" class="inspDay">31</th>
        </tr>
      </thead>
      <tbody id="checklist-data-tbody">
        <tr>
          <td class="insptoolname">Tool#1</td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0066;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0066;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0000;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #fbbe15;"></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #fbbe15;"></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #999966;"></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0066;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #fbbe15;"></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #999966;"></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0000;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0000;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td> 
        </tr>
        <tr>
          <td class="insptoolname">Tool#2</td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0066;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0066;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0000;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #fbbe15;"></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #fbbe15;"></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #999966;"></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0066;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #fbbe15;"></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #999966;"></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0000;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color: #ff0000;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td></td>
          <td class="inspdata"><i class="fas fa-square" style="color:#ff9900;"></i></td> </td> 
      </tr>
      </tbody>
    </table>
    </div>    
    <br>
    <!-- #################### Hand Tools Reports ####################-->
    <div class="table-responsive">  
  <table class="table">
    <thead class="table table-dark">
      <tr>
        <th scope="col">Tool Name</th>
        <th scope="col">Tool Code</th>
        <th scope="col">Cause</th>
        <th scope="col">Report time</th>
        <th scope="col">Resolve time</th>
        <th scope="col">status</th>
      </tr>
    </thead>
    <tbody>
      <tr>
      <td>asdf</td> 
      <td>hfghfghf</td>
      <td>hfghfghf</td>
      <td>dsfsdf</td>
      <td>fsasda</td>
      <td>OK</td>
      </tr>
    </tbody>
  </table>
  </div>  
    </div>
<!-- ######################################## Manager Inspection END #######################################################-->              
<!-- ######################################## Manager Issue history START ################################################## -->
    <div class="tab-pane fade" id="managerissuehistory" role="tabpanel">
      <h1 class="bg-dark bg-gradient">General Issue History</h1>
      <form class="d-flex bg-dark bg-gradient">
        <input id="issue-history-search" onkeyup="executeSearchIssueHistory()" class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
        <button onclick="exportAsPDF('history-table', 1)" type="button" class="xbtn bg-dark bg-gradient"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
      </form>
      <div class="table-responsive ">  
        <table class="table" id="history-table">
         <thead class="table-dark align-middle">
           <tr>
             <th scope="col">Employee (ID)</th>
             <th scope="col">Code</th>
             <th scope="col">Name</th>
             <th scope="col">Issued By</th>
             <th scope="col">Issued at
              <button class="fltrddmbtn" id="issuehist-issued-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
              <ul class="dropdown-menu bg-gradient bg-dark" aria-labelledby="issuehist-issued-ddm">
                <li><input class="filterddm" type="text" name="fromdate" id="issuedatefrom" placeholder="Resolve From: Date" onfocus="(this.type='date')"></li>   
                <li><input class="filterddm" type="text" name="todate" id="returneddatdatetoform" placeholder="Resolve To: Date" onfocus="(this.type='date')"></li>   
              </ul>
             </th>
             <th scope="col">returned at
              <button class="fltrddmbtn" id="issuehist-returned-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
              <ul class="dropdown-menu bg-gradient bg-dark" aria-labelledby="issuehist-issued-ddm">
                <li><a class="dropdown-item" href="#">PENDING</a></li>
                <li><input class="filterddm" type="text" name="fromdate" id="issuedatefrom" placeholder="Resolve From: Date" onfocus="(this.type='date')"></li>   
                <li><input class="filterddm" type="text" name="todate" id="returneddatdatetoform" placeholder="Resolve To: Date" onfocus="(this.type='date')"></li>   
              </ul>
             </th>
             <th scope="col">Return Status
              <button class="fltrddmbtn" id="issuehist-return-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
              <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="issuehist-return-status-ddm">
                <li><a class="dropdown-item" href="#">Damage</a><li>   
                <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
                <li><a class="dropdown-item" href="#">Missing</a></li>
                <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
                <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
              </ul>
             </th>
           </tr>
         </thead>
         <tbody id="issue-history-tbody">
           <tr>
             <td>Naivedya Jain (46)</td>
             <td>3337/2</td>
             <td>open ring spanner set</td>
             <td>Shourya Bairathi</td>
             <td>3/5/2021, 1:18:31 AM</td>
             <td>3/5/2021, 9:17:53 PM</td>
             <td><i class="fas fa-times statusdamaged"></i> damaged</td>
           </tr>
         </tbody>
         </table>
      </div> 
    </div>
<!-- ######################################## Manager Issue history END ################################################## -->
<!-- ######################################## Manager Repair history START ################################################## -->
    <div class="tab-pane" id="managerrepairhistory" role="tabpanel">
     <h1 class="bg-dark bg-gradient">Repair History</h1>
     <form class="d-flex mb-2 bg-dark bg-gradient">
      <input class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
      <button onclick="exportAsPDF('repair-history-table', 1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
     </form>
     <div class="table-responsive ">  
       <table class="table" id="repair-history-table">
         <thead class="table-dark align-middle">
          <tr>
            <th scope="col">Item Code</th>
            <th scope="col">Item Name</th>
            <th scope="col">Reported by</th>
            <th scope="col">Report Time  
              <button class="fltrddmbtn" id="repairreportddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
               <ul class="dropdown-menu bg-gradient bg-dark" aria-labelledby="repairreportddm">
                 <li><input class="filterddm" type="text" name="fromdate" id="repairreportdatefrom" placeholder="Report From: Date" onfocus="(this.type='date')"></li>   
                 <li><input class="filterddm" type="text" name="todate" id="repairreportdateto" placeholder="Report To: Date" onfocus="(this.type='date')"></li>   
               </ul>
            </th>
            <th scope="col">Resolve Time
             <button class="fltrddmbtn" id="repairresolveddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
              <ul class="dropdown-menu bg-gradient bg-dark" aria-labelledby="repairresolveddm">
                <li><input class="filterddm" type="text" name="fromdate" id="repairreportdatefrom" placeholder="Resolve From: Date" onfocus="(this.type='date')"></li>   
                <li><input class="filterddm" type="text" name="todate" id="repairreportdateto" placeholder="Resolve To: Date" onfocus="(this.type='date')"></li>   
              </ul>
            </th>
            <th scope="col">Cause
             <button class="fltrddmbtn" id="reportstatusddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
              <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="reportstatusddm">
                <li><a class="dropdown-item" href="#">Damage</a><li>   
                <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
                <li><a class="dropdown-item" href="#">Missing</a></li>
                <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
                <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
              </ul>
            </th> 
            <th scope="col">Remarks</th>
            <th scope="col">Resolution</th>
          </tr>
     </thead>
     <tbody id="repair-history-tbody">
       <tr>
         <td>3337/2</td>
         <td>open ring spanner set </td>
         <td>Naivedya Jain (46)</td>
         <td>3/5/2021, 1:18:31 AM</td>
         <td>3/5/2021, 9:17:53 PM</td>
         <td><i class="fas fa-exclamation statuspartiallydamaged"></i> partially damaged</td>
         <td><i>New part installed</i></td>
         <td>
          <div class="btn-group mr-1 bgr" role="group" aria-label="Second group">
            <button type="button" class="btn btn-secondary resolvebtn" data-bs-toggle="modal" data-bs-target="#resolve" title="Resolve report"><i class="fas fa-hand-sparkles"></i> Resolve</button>
          </div>
         </td>
       </tr>
     </tbody>
     </table>
  </div> 
    </div>
<!-- ######################################## Manager repair history END ################################################## -->
<!-- ######################################## Manager Archive Start ################################################## -->
<div class="tab-pane fade" id="managerarchive" role="tabpanel">
  <h1 class="bg-dark bg-gradient">Archives</h1>
  <form class="d-flex mb-2 bg-dark bg-gradient">
    <input class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
    <button onclick="exportAsPDF('archive-table', 1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
   </form>
  <div class="table-responsive ">  
    <table id="archive-table" class="table">
    <thead class="table-dark align-middle">
      <tr>
        <th scope="col">Item Name</th>
        <th scope="col">Item Code</th>
        <th scope="col">Last Date Modified
          <button class="fltrddmbtn" id="archive-date-mod-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
          <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="archive-date-mod-ddm">
            <li><input class="filterddm" type="text" name="fromdate" id="archive-date-mod-from" placeholder="From: mm/dd/yyyy " onfocus="(this.type='date')"></li>   
            <li><input class="filterddm" type="text" name="todate" id="archive-date-mod-to" placeholder="To: mm/dd/yyyy" onfocus="(this.type='date')"></li>   
          </ul>
        </th>
        <th scope="col"> </th>
      </tr>
    </thead>
    <tbody id="archive-tbody">
      <tr>
        <td>Thrust Plate</td>
        <td>VG 3074/1</td>
        <td>3/5/2021, 9:17:53 PM</td>
        <td>
          <div class="btn-group mr-1 bgr" role="group" aria-label="Second group">
           <button type="button" class="btn btn-secondary archivebtn" title="View archive" data-bs-toggle="modal" data-bs-target="#itemarchive"><i class="fas fa-archive"></i><span class="btnref"> Archive</span></button>
           <button type="button" class="btn btn-secondary infobtn" data-bs-target="#item-info" data-bs-toggle="modal" title="info"><i class="fas fa-info-circle"></i></i><span class="btnref"> Info</span></button>
          </div>       
        </td>
      </tr>
    </tbody>
    </table>
  </div> 
</div>
<!-- ######################################## Manager Archive END ################################################## -->
<!-- ##################################### Manager People START ################################### -->
      <div class="tab-pane fade" id="managerpeople" role="tabpanel">
        <h1 class="bg-dark bg-gradient">People</h1>
        <form class="d-flex mb-2 bg-dark bg-gradient">
          <input class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
          <button type="button" class="xbtn bg-gradient bg-dark" data-bs-target="#manager-addpeople" data-bs-toggle="modal"><i class="fas fa-user-plus"></i><span class="btnref"> Add</span></button>
          <button onclick="exportAsPDF('update-employee-table', 1)" type="button" class="xbtn bg-gradient bg-dark"><i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
        </form>
        <div class="table-responsive ">  
          <table class="table" id="update-employee-table">
          <thead class="table-dark align-middle">
            <tr>
              <th scope="col">Employee (ID)</th>
              <th scope="col">First Name</th>
              <th scope="col">Last Name</th>
              <th scope="col">Title</th>
              <th scope="col">Contact Number</th>
              <th scope="col">e-mail</th>
              <!-- <th scope="col">Status</th>
              <th scope="col">Date of Joining</th>
              <th scope="col">Date of leaving</th> -->
              <th scope="col">Company</th>
              <th scope="col">Edit</th>
            </tr>
          </thead>
          <tbody id="update-employee-tbody">
            <tr>
              <td>Naivedya Jain (46)</td>
              <td>Technician</td>
              <td>+919782383338</td>
              <td><a href="#">reachnaivedya@gmail.com</a></td>
              <td><span class="badge peopleactive"><span> Active </span></td>
              <td>3/5/2021, 1:18:31 AM</td>
              <td>3/5/2021, 9:17:53 PM</td>
              <td>Scorptech Technologies Pvt Ltd</td>
            </tr>
          </tbody>
          </table>
        </div> 
      </div>
<!-- #################################### Manager People END ###################################### -->
  </div>
<!-- ############################################################### Manager Tabs END ###################################################################### -->
<!-- ################################################### ALERTS AND MODALS ############################################################ -->
<div class="modal reportmodal modal-dialog-scrollable" id="alert-modal" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-dark bg-gradient">
        <h5 class="modal-title"><i class="fas fa-skull-crossbones"></i> Alert</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="alert-modal-text">

      </div>

  </div>
</div>
</div>
<!--######################## Report general #############################  -->
<div class="modal reportmodal modal-dialog-scrollable" id="report" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-dark bg-gradient">
        <h5 class="modal-title"><i class="fas fa-skull-crossbones"></i> Report</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- write command " checked " for default! -->
        <div class="btn-group-vertical reportbtngrp" role="group" aria-label="Basic radio toggle button group" checked>
           <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off"> 
          <label class="btn btn-outline-danger" for="btnradio1"><i class="fas fa-skull-crossbones "></i> Damage</label>
        
          <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
          <label class="btn btn-outline-danger" for="btnradio2"><i class="fas fa-exclamation-triangle"></i> Partially damaged</label>
        
          <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
          <label class="btn btn-outline-danger" for="btnradio3"><i class="fas fa-question"></i> Missing</label>

          <input type="radio" class="btn-check" name="btnradio" id="btnradio4" autocomplete="off">
          <label class="btn btn-outline-danger" for="btnradio4"><i class="fas fa-question-circle"></i> incomplete kit</label>
        </div>
      </div>
      <div class="reportcmt mb-3">
        <label for="message-text" class="col-form-label"><i class="far fa-comment"></i> Comment: <span style="color:#ff0000; font-size:smaller">(optional)</label>
        <textarea class="form-control" id="message-text"></textarea>
      </div>
      <div class="modal-footer bg-gradient bg-dark">
        <button type="button" class="btn submitreportbtn"><i class="far fa-flag"></i> Report</button>
        <button type="button" class="btn cancelbtn" data-bs-dismiss="modal"> <i class="fa fa-times"></i> Cancel</button>
      </div>
    </div>
  </div>
</div>
  <!-- ##########################indivisual records Manager############################ -->
  <div class="modal fade individualrecord" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
              aria-labelledby="staticBackdropLabel" aria-hidden="false">
              <div class="modal-dialog modal-xl">
                  <div class="modal-content">
                      <div class="modal-header bg-gradient bg-dark">
                          <h5 class="modal-title" id="staticBackdropLabel"><i class="fas fa-file-medical-alt"></i> Repair Records</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                        <div class="modal-body">
                          <h5 id="repair-record-heading" class="bg-gradient bg-dark" style="margin: 0; padding: 2px 0px;">(#Item code) #Item name</h5>
                        <div class="table-responsive ">  
                          <table class="table" id="record-table">
                          <thead class="table-dark align-middle">
                            <tr>
                              <th scope="col">Employee (ID)</th>
                              <th scope="col">Cause</th>
                              <th scope="col">Comments</th>
                              <th scope="col">Report time</th>
                              <th scope="col">Resolve time</th>
                              <th scope="col">Status</th>
                            </tr>
                          </thead>
                          <tbody id="record-tbody">
                          </tbody>
                          </table>
                        </div>    
                        <div id="no-record-div" class="collapse in"><h5 class="bf-gradient bg-dark">No Records Found</h5></div>
                      </div> 
                      <div class="modal-footer bg-gradient bg-dark">
                        <button  type="button"  class="btn mtn-sht-modal-btn" data-bs-toggle="modal" data-bs-target="#maintenance"><i class="fas fa-file-medical"></i><span class="btnref"> Maintenance Sheet</span></button>
                        <button type="button" class="btn exportbutton"> <i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
                      </div>
                    </div>    
                  </div>
              </div> 
  <!-- ########################## Material Refill modal ############################ -->
  <div class="modal" id="materialrefill" tabindex="-1">
    <div class="modal-dialog modal-fullscreen-md-down">
      <div class="modal-content">
        <div class="modal-header bg-gradient bg-dark">
          <h5 class="modal-title"><i class="fas fa-fill"></i> Material Re-fill</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Quantity available in inventory<b> <span>
           10 </span><span>Unit(s)</span></b>
          </p>
          </span>
          <div class="input-group refill">
            <div class="refillquantity">
              <input type="number" min="1" step="any" class="form-control" placeholder="enter Re-fill Quantity" aria-label="refill  quantity">
              <span class="input-group-text bg-gradient bg-dark">(Unit)</span>
            </div>
            <div class="refillcost">
              <input type="number" min="0" step="0.1" class="form-control" placeholder="enter Re-fill cost" aria-label="refill  cost">
              <span class="input-group-text bg-gradient bg-dark"><i class="fa fa-rupee-sign"></i></span>
            </div>
            <h6><i class="fas fa-paperclip"></i> Attach invoice</h6>
            <div class="refillinvoice">
              <input type="file" id="upload-invoice-refill" class="uploadinvoice">
            </div>
          </div>
        </div>
        <div class="modal-footer bg-dark bg-gradient">
          <button type="button" class="btn cancelbtn" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn confirmbtn"><i class="fas fa-fill-drip"></i> Re-fill</button>
        </div>
      </div>
    </div>
  </div>
  <!-- ########################## Resolve modal ############################ -->
  <div class="modal reportmodal modal-dialog-scrollable" id="resolve" tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content ">
        <div class="modal-header bg-dark bg-gradient">
          <h5 class="modal-title"><i class="fas fa-hand-sparkles"></i> Resolve</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- write command " checked " for default! -->
          <div class="btn-group-vertical reportbtngrp" role="group" aria-label="Basic radio toggle button group" checked>
             <input type="radio" class="btn-check" name="btnradio" id="repaired" autocomplete="off"> 
            <label class="btn btn-outline-danger" for="repaired">Repair Item</label>
          
            <input type="radio" class="btn-check" name="btnradio" id="replaced" autocomplete="off">
            <label class="btn btn-outline-danger" for="replaced">Replace Item</label>
          
            <input type="radio" class="btn-check" name="btnradio" id="found" autocomplete="off">
            <label class="btn btn-outline-danger" for="found">Found Item</label>
            <hr style="background-color: #000000; height: 2px; width: 100%">
            <input type="radio" class="btn-check" name="btnradio" id="discard" autocomplete="off">
            <label class="btn btn-outline-danger" for="discard">Discard Item</label>

            <input type="radio" class="btn-check" name="btnradio" id="falsereport" autocomplete="off">
            <label class="btn btn-outline-success" for="falsereport">FALSE REPORT</label>
           </div>
           <hr style="background-color: #000000; height: 2px; width: 100%">
           <div class="resolveformchk justify-content-around">
            <div>
              <input onClick="replacedWarranty()" class="form-check-input" type="checkbox" value="" id="warranty-covered">
              <label id="warranty-covered-text" class="form-check-label" for="resolvewarrrantycheck">
                Covered in WARRANTY
              </label>
            </div>
            <div>
              <input class="form-check-input" type="checkbox" value="" id="maintenance-covered">
              <label id="maintenance-covered-text" class="form-check-label" for="resolvemaintenancecheck">
                Covered in MAINTENANCE
              </label>   
            </div>
           </div>
           <div class="input-group costbenifit">
            <input type="number" min="0" step="any" class="form-control" placeholder="Cost benefit" aria-label="Money saved">
            <span class="input-group-text bg-gradient bg-dark"><i class="fas fa-rupee-sign"></i></span>
           </div>
           <hr>
           <div id="cost-field" class="input-group resolvecost">
            <input id= "cost" type="number" min="0" step="any" class="form-control" placeholder="Cost bared" aria-label="cost bared">
            <span class="input-group-text bg-gradient bg-dark"><i class="fas fa-rupee-sign"></i></span>
           </div>
           <hr style="background-color: #000000; height: 2px; width: 100%">
           <div class="reportcmt mb-3">
            <label for="message-text" class="col-form-label"><i class="far fa-comment"></i> Remarks: <span style="color:#ff0000; font-size:smaller">(optional)</label>
            <textarea class="form-control" id="message-text"></textarea>
         </div>
       </div>

        <div class="modal-footer bg-gradient bg-dark">
          <button type="button" class="btn confirmbtn"><i class="fas fa-check"></i> Confirm</button>
          <button type="button" class="btn cancelbtn" data-bs-dismiss="modal"> <i class="fa fa-times"></i> Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <!-- ################################ Add Item Modal ######################################## -->
  <div class="modal addnewitem" id="add-item-modal" tabindex="-1">
    <div class="modal-dialog modal-xl">
      <div class="modal-content ">
        <div class="modal-header bg-dark bg-gradient">
          <h5 class="modal-title"><i class="fas fa-plus"></i> Add Item</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="additem">
            <!-- Item details -->
            <div class="additemdetails">
              <div class="itemformheader bg-gradient bg-dark justify-content-center">
                <h5>Item Details</h5>
              </div>
              <div class="itemformbody">
                <input id="tcode" required class="form-control form-control-lg" type="text" placeholder="Item Code" aria-label="">
                <input id="tname" required class="form-control form-control-lg" type="text" placeholder="Item Name" aria-label="">
                <input id="brand" required class="form-control form-control-lg" type="text" placeholder="Item Brand/Specification" aria-label="">
                <input id="location" required class="form-control form-control-lg" type="text" placeholder="Item Location" aria-label="">
               <div class="itemdescription mb-3">
                 <label for="message-text" class="col-form-label"><i class="far fa-comment"></i> Description</label>
                 <textarea id="description" required class="form-control" id="message-text"></textarea>
               </div>
               <h6>Upload Inspection Sheet</h6>
               <div class="inspectionsheet">
                <input type="file" id="upload-inspection-sheet" class="uploadinspectionsheet">
               </div>
               <h6>Item Issuable?</h6>
               <div class="form-check form-check-inline">
                <input type="radio" class="btn-check" name="btnradio" id="issue-item-true" autocomplete="off" > 
                <label class="btn btn-outline-success" for="issuetrue">Yes</label>
                <input type="radio" class="btn-check" name="btnradio" id="issue-item-false" autocomplete="off"> 
                <label class="btn btn-outline-danger" for="issuefalse">No</label>
               </div>
               <hr>
               <div class="itemcost">
               <input id="value" class="form-control form-control-lg" type="number" min="0" step="0.1" placeholder="Item Cost" aria-label="">
               <span class="input-group-text bg-gradient bg-dark"><i class="fa fa-rupee-sign"></i></span>
              </div>
               <h6><i class="fas fa-paperclip"></i> Attach Invoice</h6>
               <div class="iteminvoice">
                <input required type="file" id="addToolsDiv-file-selector" class="uploadinvoice">
               </div>
               <input id="dop" required class="form-control form-control-lg" type="text" placeholder="Date of Purchase" onfocus="(this.type='date')" aria-label="">
               <input id="warranty-ed" required class="form-control form-control-lg" type="text" placeholder="Warranty Valid till" onfocus="(this.type='date')" aria-label="">
               <div class="input-group mb-3">
                <input id="" required type="text" class="form-control" placeholder="Internal Inspection Frequency" aria-label="Inspection Frequency">
                <button class="btn bg-dark bg-gradient dropdown-toggle frqncyddbtn" id="iif" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                <ul class="dropdown-menu bg-gradient bg-dark" aria-labelledby="ispnfrequency">
                  <li><a class="dropdown-item" href="#">Day(s)</a></li>
                  <li><a class="dropdown-item" href="#">Week(s)</a></li>
                  <li><a class="dropdown-item" href="#">Months(s)</a></li>
                </ul>
              </div>
              </div>
            </div>  
            <!-- child parts -->
            <div class="addchildparts">
              <div class="itemformheader bg-gradient bg-dark justify-content-around">
               <h5 class="mt-3">Add Child Parts</h5>
               <input id="pok" type="checkbox" class="btn-check" id="childpartstrue" autocomplete="off" onchange="childPartsChange()">
              <label class="btn btn-outline-success maintenanceCheck" for="childpartstrue"><i class="fa fa-plus-square"></i> Add</label>
              </div>
              <div class="itemformbody" id="childpartsform">
                <div class="qtychildparts">
                  <input class="form-control form-control-lg" type="number" min="1" step="1" placeholder="Quantity of Child Parts" aria-label="">
                  <button type="button" class="btn btn-secondary submitbtn" title="Accept"><i class="fas fa-plus-square"></i> Add Child Parts</button>
                </div>
                <hr>
                <div class="addchildpartstable">
                  <div class="table-responsive">
                    <table class="table table-borderless table-striped">
                      <thead class="table-dark bg-dark bg-gradient align-middle ">
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">Part Code</th>
                          <th scope="col">Part Name</th>
                        </tr>
                      </thead>
                      <tbody id="child-parts-tbody">
                        <tr>
                        <td>1</td>
                        <td><input class="form-control form-control-sm" type="text" placeholder="Part Code" aria-label=""></td>
                        <td><input class="form-control form-control-sm" type="text" placeholder="Part Name" aria-label=""></td>
                        </tr>
                        <tr>
                          <td>2</td>
                          <td><input class="form-control form-control-sm" type="text" placeholder="Part Code" aria-label=""></td>
                          <td><input class="form-control form-control-sm" type="text" placeholder="Part Name" aria-label=""></td>
                          </tr>
                          <tr>
                            <td>3</td>
                            <td><input class="form-control form-control-sm" type="text" placeholder="Part Code" aria-label=""></td>
                            <td><input class="form-control form-control-sm" type="text" placeholder="Part Name" aria-label=""></td>
                            </tr>
                      </tbody>
                    </table>
                    </div> 
                </div>
              </div>
            </div>
            <!-- Maintenance details -->
            <div class="addmaintenancedetails">
              <div class="itemformheader bg-gradient bg-dark justify-content-around">
              <h5>Add maintenance details</h5>
              <input id="maintained" type="checkbox" class="btn-check" id="maintenanceplantrue" autocomplete="off" onchange="maintenanceChange()">
              <label class="btn btn-outline-success maintenanceCheck" for="maintenanceplantrue"><i class="fa fa-plus-square"></i> Add</label>
            </div>
            <div class="itemformbody" id="maintenanceform">
              <input id="amc" required class="form-control form-control-lg" type="text" placeholder="Company" aria-label="">
              <input id="amccon" required class="form-control form-control-lg" type="text" placeholder="Company Contact" aria-label="">
              <input id="amcpro" class="form-control form-control-lg" type="text" placeholder="Service Provider" aria-label="">
              <!-- <input id="amc" class="form-control form-control-lg" type="text" placeholder="Serviceman Contact" aria-label=""> -->
              <hr>
              <div class="mtnplancost">
              <input required class="form-control form-control-lg" type="number" min="0" step="0.1" placeholder="Maintenance-Plan Cost" aria-label="">
              <span class="input-group-text bg-gradient bg-dark"><i class="fa fa-rupee-sign"></i></span>
              </div>
              <div class="maintenanceplaninvoice">
                <h6 class="invoiceheading"><i class="fas fa-paperclip"></i> Attach invoice</h6>
                <input type="file" id="upload-invoice-maintenance" class="uploadinvoice">
              </div>
              <hr>
              <h6 class="justify-content-center">Maintenance Plan Period</h6>
              <input id="amcpersd" required class="form-control form-control-lg" type="text" placeholder="From: DATE" onfocus="(this.type='date')" aria-label="">
              <input id="amcpered" required class="form-control form-control-lg" type="text" placeholder="To: DATE" onfocus="(this.type='date')" aria-label="">
              <hr>
              <input id="dolm" required class="form-control form-control-lg" type="text" placeholder="Last Service Date" onfocus="(this.type='date')" aria-label="">
              <div class="input-group mb-3">
                <input required type="text" id="if" class="form-control" placeholder="Service Frequency" aria-label="Maintenance Frequency">
                <!-- <button class="btn bg-dark bg-gradient dropdown-toggle frqncyddbtn" id="mtnfrequency" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                <ul class="dropdown-menu bg-dark bg-gradient" aria-labelledby="mtnfrequency">
                  <li><a class="dropdown-item" href="#">Day(s)</a></li>
                  <li><a class="dropdown-item" href="#">Week(s)</a></li>
                  <li><a class="dropdown-item" href="#">Months(s)</a></li>
                </ul>
                </ul> -->
                <select class="form-select" name="" id="mtn-frequency1">
                  <option selected value="">day(s)</option>
                  <option value="">month(s)</option>
                  <option value="">year(s)</option>
                </select>
              </div>
            </div>       
            </div>
          </div>    
        </div>
        <div class="modal-footer bg-gradient bg-dark">
          <button id="addTool" onclick="addNewTool()" type="button" class="btn confirmbtn"><i class="fas fa-check"></i> Add</button>
          <button type="button" class="btn cancelbtn" data-bs-dismiss="modal"> <i class="fa fa-times"></i> Cancel</button>
        </div>
      </div>
    </div>
  </div>
  <!-- ################################ Modify Item Modal ######################################## -->
  <div class="modal addnewitem" id="modify-item" tabindex="-1">
    <div class="modal-dialog modal-xl">
      <div class="modal-content ">
        <div class="modal-header bg-dark bg-gradient">
          <h5 class="modal-title"><i class="fas fa-plus"></i> Add Item</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="additem">
            <!-- Item details -->
            <div class="additemdetails">
              <div class="itemformheader bg-gradient bg-dark justify-content-center">
                <h5>Item Details</h5>
              </div>
              <div class="itemformbody">
                <input id="modify-tcode" required class="form-control form-control-lg" type="text" placeholder="Item Code" aria-label="">
                <input id="modify-tname" required class="form-control form-control-lg" type="text" placeholder="Item Name" aria-label="">
                <input id="modify-brand" required class="form-control form-control-lg" type="text" placeholder="Item Brand/Specification" aria-label="">
                <input id="modify-location" required class="form-control form-control-lg" type="text" placeholder="Item Location" aria-label="">
               <div class="itemdescription mb-3">
                 <label for="message-text" class="col-form-label"><i class="far fa-comment"></i> Description</label>
                 <textarea id="modify-description" required class="form-control" id="message-text"></textarea>
               </div>
               <h6>Upload Inspection Sheet</h6>
               <div class="inspectionsheet">
                <input id="modify-inspectionSheet" type="file" id="upload-inspection-sheet" class="uploadinspectionsheet">
               </div>
               <h6>Item Issuable?</h6>
               <div class="form-check form-check-inline">
                <input id="issue-permission" type="radio" class="btn-check" name="btnradio" id="issue-item-true" autocomplete="off" > 
                <label class="btn btn-outline-success" for="issuetrue">Yes</label>
                <input type="radio" class="btn-check" name="btnradio" id="issue-item-false" autocomplete="off"> 
                <label class="btn btn-outline-danger" for="issuefalse">No</label>
               </div>
               <hr>
               <div class="itemcost">
               <input id="modify-value" class="form-control form-control-lg" type="number" min="0" step="0.1" placeholder="Item Cost" aria-label="">
               <span class="input-group-text bg-gradient bg-dark"><i class="fa fa-rupee-sign"></i></span>
              </div>
              <input id="modify-quantity" class="form-control form-control-lg" type="number" min="1" step="1" placeholder="Number of Units (qty)" aria-label="">
               <h6><i class="fas fa-paperclip"></i> Attach Invoice</h6>
               <div class="iteminvoice">
                <input required type="file" id="modifyToolsDiv-file-selector" class="uploadinvoice">
               </div>
               <input id="modify-dop" required class="form-control form-control-lg" type="text" placeholder="Date of Purchase" onfocus="(this.type='date')" aria-label="">
               <input id="modify-warranty-ed" required class="form-control form-control-lg" type="text" placeholder="Warranty Valid till" onfocus="(this.type='date')" aria-label="">
               <div class="input-group mb-3">
                <input id="modify-iif" required type="text" class="form-control" placeholder="Inspection Frequency" aria-label="Inspection Frequency">
                <button class="btn bg-dark bg-gradient dropdown-toggle frqncyddbtn" id="ispnfrequency" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                <ul class="dropdown-menu bg-gradient bg-dark" aria-labelledby="ispnfrequency">
                  <li><a class="dropdown-item" href="#">Day(s)</a></li>
                  <li><a class="dropdown-item" href="#">Week(s)</a></li>
                  <li><a class="dropdown-item" href="#">Months(s)</a></li>
                </ul>
              </div>
              </div>
            </div>  
            <!-- child parts -->
            <div class="addchildparts">
              <div class="itemformheader bg-gradient bg-dark justify-content-around">
               <h5 class="mt-3">Add Child Parts</h5>
               <input type="checkbox" class="btn-check" id="modify-pok" autocomplete="off" onchange="childPartsChange()">
              <label class="btn btn-outline-success maintenanceCheck" for="childpartstrue"><i class="fa fa-plus-square"></i> Add</label>
              </div>
              <div class="itemformbody" id="childpartsform">
                <div class="qtychildparts">
                  <input class="form-control form-control-lg" type="number" min="1" step="1" placeholder="Quantity of Child Parts" aria-label="">
                  <button type="button" class="btn btn-secondary submitbtn" title="Accept"><i class="fas fa-plus-square"></i> Add Child Parts</button>
                </div>
                <hr>
                <div class="addchildpartstable">
                  <div class="table-responsive">
                    <table id="update-child-parts-table" class="table table-borderless table-striped">
                      <thead class="table-dark bg-dark bg-gradient align-middle ">
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">Part Code</th>
                          <th scope="col">Part Name</th>
                        </tr>
                      </thead>
                      <tbody id="update-child-parts-tbody">
                        <tr>
                        <td>1</td>
                        <td><input class="form-control form-control-sm" type="text" placeholder="Part Code" aria-label=""></td>
                        <td><input class="form-control form-control-sm" type="text" placeholder="Part Name" aria-label=""></td>
                        </tr>
                        <tr>
                          <td>2</td>
                          <td><input class="form-control form-control-sm" type="text" placeholder="Part Code" aria-label=""></td>
                          <td><input class="form-control form-control-sm" type="text" placeholder="Part Name" aria-label=""></td>
                          </tr>
                          <tr>
                            <td>3</td>
                            <td><input class="form-control form-control-sm" type="text" placeholder="Part Code" aria-label=""></td>
                            <td><input class="form-control form-control-sm" type="text" placeholder="Part Name" aria-label=""></td>
                            </tr>
                      </tbody>
                    </table>
                    </div> 
                </div>
              </div>
            </div>
            <!-- Maintenance details -->
            <div class="addmaintenancedetails">
              <div class="itemformheader bg-gradient bg-dark justify-content-around">
              <h5>Add maintenance details</h5>
              <input id="modify-maintained" type="checkbox" class="btn-check" id="maintenanceplantrue" autocomplete="off" onchange="maintenanceChange()">
              <label class="btn btn-outline-success maintenanceCheck" for="maintenanceplantrue"><i class="fa fa-plus-square"></i> Add</label>
            </div>
            <div class="itemformbody" id="maintenanceform">
              <input required class="form-control form-control-lg" type="text" placeholder="Company" aria-label="">
              <input required class="form-control form-control-lg" type="text" placeholder="Company Contact" aria-label="">
              <input class="form-control form-control-lg" type="text" placeholder="Service Provider" aria-label="">
              <input class="form-control form-control-lg" type="text" placeholder="Serviceman Contact" aria-label="">
              <hr>
              <div class="mtnplancost">
              <input required class="form-control form-control-lg" type="number" min="0" step="0.1" placeholder="Maintenance-Plan Cost" aria-label="">
              <span class="input-group-text bg-gradient bg-dark"><i class="fa fa-rupee-sign"></i></span>
              </div>
              <div class="maintenanceplaninvoice">
                <h6 class="invoiceheading"><i class="fas fa-paperclip"></i> Attach invoice</h6>
                <input type="file" id="upload-invoice-maintenance" class="uploadinvoice">
              </div>
              <hr>
              <h6 class="justify-content-center">Maintenance Plan Period</h6>
              <input required class="form-control form-control-lg" type="text" placeholder="From: DATE" onfocus="(this.type='date')" aria-label="">
              <input required class="form-control form-control-lg" type="text" placeholder="To: DATE" onfocus="(this.type='date')" aria-label="">
              <hr>
              <input required class="form-control form-control-lg" type="text" placeholder="Last Service Date" onfocus="(this.type='date')" aria-label="">
              <div class="input-group mb-3">
                <input required type="number" min="1" class="form-control" placeholder="Inspection Frequency" aria-label="Inspection Frequency">
                <!-- <button class="btn bg-dark bg-gradient dropdown-toggle frqncyddbtn" id="ispnfrequency" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
                <ul class="dropdown-menu bg-dark bg-gradient" aria-labelledby="mtnfrequency">
                  <li><a class="dropdown-item" href="#">Day(s)</a></li>
                  <li><a class="dropdown-item" href="#">Week(s)</a></li>
                  <li><a class="dropdown-item" href="#">Months(s)</a></li>
                </ul> -->
                <select class="form-select" name="" id="mtn-frequency1">
                  <option selected value="">day(s)</option>
                  <option value="">month(s)</option>
                  <option value="">year(s)</option>
                </select>
              </div>
            </div>       
            </div>
          </div>    
        </div>
        <div class="modal-footer bg-gradient bg-dark">
          <button id="modify-tool-button" onclick="modifyTool()" type="button" class="btn confirmbtn"><i class="fas fa-check"></i> Confirm</button>
          <button id="renew-tool-button" onclick="removeTool()" type="button" class="btn confirmbtn"><i class="fas fa-check"></i> Renew</button>
          <button id="remove-tool-button" onclick="renewTool()" type="button" class="btn confirmbtn"><i class="fas fa-check"></i> Remove</button>
          <button type="button" class="btn cancelbtn" data-bs-dismiss="modal"> <i class="fa fa-times"></i> Cancel</button>
        </div>
      </div>
    </div>
  </div>
<!-- ################################ Item profile modal/ Item INFO modal ######################################## -->
<div class="modal iteminfo" id="item-info" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header bg-dark bg-gradient">
        <h5><i class="fas fa-info-circle"></i></i> info </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          <!-- item pictures -->
          <div class="itempictures">
          
          </div>
          <!-- item data -->
          <div class="itemdata">
            <div> <h6 id="info-tool"> Thurst Plate (VG 3074/1) </h6> 
              <span class="badge badgeavailable"><i class="fas fa-check"></i><span class="btnref"> Available</span></span>
              <button type="button" class="btn bg-dark bg-gradient downloadbtn" title="Download Inspection Sheet"><i class="fas fa-tasks"></i><span class="btnref"> Inspection checklist</span></button>
            </div>
            <p id="info-tooldescription">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley</p>
            <div class="itemdatatables"> 
              <div class="itemgeneralinfo">
                <div class="table-responsive">
                  <table class="table table-borderless table-striped">
                    <thead class="table-dark bg-dark bg-gradient align-middle ">
                      <tr>
                        <th colspan="2" scope="col">General Details</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th>Item Name</th>
                        <td id="info-toolname">NA</td>
                      </tr>
                      <tr>
                        <th>Item Code</th>
                        <td id="info-toolcode">NA</td>
                      </tr>
                      <tr>
                        <th>Item Brand/Specification</th>
                        <td id="info-toolspec">NA</td>
                      </tr>
                      <tr>
                        <th>Item Type</th>
                        <td id="info-tooltype">Hand Tool|Special Tool|Hand Toolkit|Special Toolkit|Equipment|Material</td>
                      </tr>
                      <tr>
                        <th>Item Cost</th>
                        <td id="info-toolcost">NA</td>
                      </tr>
                      <tr>
                        <th>Date of Purchase</th>
                        <td id="info-tooldop">NA</td>
                      </tr>
                      <tr>
                        <th>Quantity Available</th>
                        <td id="info-toolquantity">NA</td>
                      </tr>
                      <tr>
                        <th>Location</th>
                        <td id="info-toollocation"></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <div id="info-children-div" class="childpartstableinfo">
                <div class="table-responsive childtablehide">
                  <table class="table table-borderless table-striped">
                    <thead class="table-dark bg-dark bg-gradient align-middle ">
                      <tr>
                        <th colspan="3" scope="col">Kit Parts</th>
                      </tr>
                      <tr>
                        <th>#</th>
                        <th>Code</th>
                        <th>Name</th>
                      </tr>
                    </thead>
                    <tbody>
                     <tr>
                     <td>1</td>
                     <td>WD32/1</td>
                     <td>NAME1</td>
                    </tr>
                     <tr>
                       <td>2</td>
                       <td>WD32/2</td>
                       <td>NAME2</td>
                    </tr>
                     <tr>
                       <td>3</td>
                       <td>WD32/3</td>
                       <td>NAME3</td>
                    </tr>
                    </tbody>
                  </table>
                </div>
                <div class = "nochildrendiv"></div>
              </div>
              <div id="info-maintenance-div" class="maintenanceinfo">
                <div class="table-responsive maintenanceTableHide">
                  <table class="table table-borderless table-striped">
                    <thead class="table-dark bg-dark bg-gradient align-middle ">
                      <tr>
                        <th colspan="2" scope="col">Maintenance Details<button type="button" class="btn bg-dark bg-gradient newmtnplanbtn" data-bs-toggle="modal" data-bs-target="#quick-mtn-add" title="New Maintenance-Plan"><i class="fas fa-file-alt"></i><span class="btnref"> New Plan</span></button>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th>Company</th>
                        <td id="maintenance-company">Firm 1</td>
                      </tr>
                      <tr>
                        <th>Company Contact</th>
                        <td id="maintenance-contact">0141-2552557</td>
                      </tr>
                      <tr>
                        <th>Service person</th>
                        <td id="maintenance-man">Thop Singh</td>
                      </tr>
                      <tr>
                        <th>Service Person Contact</th>
                        <td id="maintenance-mobile">9914173314</td>
                      </tr>
                      <tr>
                        <th>Maintenance-Plan Cost</th>
                        <td id="maintenance-cost">6000 $</td>
                      </tr>
                      <tr>
                        <th>Last Maintenance Date</th>
                        <td id="last-maintenance-date">6000 $</td>
                      </tr>
                      <tr>
                        <th>Maintenance Frequency</th>
                        <td id="maintenance-frequency">6000 $</td>
                      </tr>
                      <tr>
                        <th>Maintenance Period</th>
                        <td id="maintenance-period">16 Mar 2021<span> <b>to</b> </span>16 Mar 2022</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div id="maintenance-inspection-sheet">Tool Inspection Sheet: <b>Not Found</b></div>
                <div class = "noMaintenanceDiv"></div>
              </div>
            </div>    
          </div>
      </div>
      <div class="modal-footer bg-dark bg-gradient">

      </div>
    </div>
  </div>
</div>
<!-- ################################ Report Modal ######################################## -->
<div class="modal reportmodal modal-dialog-scrollable" id="report-modal" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-dark bg-gradient">
        <h5 class="modal-title"><i class="fas fa-skull-crossbones"></i> Report</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- write command " checked " for default! -->
        <div class="btn-group-vertical reportbtngrp" role="group" aria-label="Basic radio toggle button group">
          <input type="radio" class="btn-check" name="btnradio" id="damaged-nf" autocomplete="off"> 
          <label class="btn btn-outline-danger" for="damaged-nf"><i class="fas fa-times"></i> Damage</label>
        
          <input type="radio" class="btn-check" name="btnradio" id="damaged-functional" autocomplete="off">
          <label class="btn btn-outline-danger" for="damaged-functional"><i class="fas fa-exclamation"></i> Partially damaged</label>
        
          <input type="radio" class="btn-check" name="btnradio" id="missing" autocomplete="off">
          <label class="btn btn-outline-danger" for="missing"><i class="fas fa-question"></i> Missing</label>

          <input type="radio" class="btn-check" name="btnradio" id="missing-bf" autocomplete="off">
          <label class="btn btn-outline-danger" id="missing-bf-text" for="missing-bf"><i class="fas fa-question-circle"></i> incomplete kit</label>
        </div>
        <label id="child-text"> Select the parts of the kit that have been damaged : </label><br>
        <table id="child-part-table" class="table is-bordered is-striped is-hoverable">
          <thead>
            <tr>

              <th> Part Name </th>
              <th> Missing </th>
              <th> Damaged </th>
              <th> Broken </th>
            </tr>
          </thead>

          <tbody id="report-child-parts-tbody"></tbody>
        </table>
        <!-- <label> Write the report below (Please include the cause of action ) : </label><br>
          <textarea id="report-text" name="txt_comments" rows="10" cols="70"></textarea>
          <br> -->
      </div>
      <div class="reportcmt mb-3">
        <label for="report-text" class="col-form-label"><i class="far fa-comment"></i> Comment: <span style="color:#ff0000; font-size:smaller">(optional)</label>
        <textarea class="form-control" id="report-text"></textarea>
      </div>
      <div class="modal-footer bg-gradient bg-dark">
        <button type="button" class="btn submitreportbtn" id="submit-report-button"><i class="far fa-flag"></i> Report</button>
        <button type="button" class="btn cancelbtn" data-bs-dismiss="modal"> <i class="fa fa-times"></i> Cancel</button>
      </div>
    </div>
  </div>
    </div>
<!-- ################################ Add Material Modal ######################################## -->
<div class="modal addnewmaterial" id="add-material" tabindex="-1">
  <div class="modal-dialog modal-md">
    <div class="modal-content ">
      <div class="modal-header bg-dark bg-gradient">
        <h5 class="modal-title"><i class="fas fa-plus"></i> Add material</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="addmaterial">
          <input required class="form-control form-control-lg" type="text" placeholder="Material Code" aria-label="">
                <input required class="form-control form-control-lg" type="text" placeholder="material Name" aria-label="">
                <input required class="form-control form-control-lg" type="text" placeholder="material Brand/Specification" aria-label="">
                <input required class="form-control form-control-lg" type="text" placeholder="material Location" aria-label="">
                <input required class="form-control form-control-lg" type="number" min="1" step="any" placeholder="Quantity" aria-label="">
                <input required class="form-control form-control-lg" type="text" placeholder="Unit (ex: ml, kg.....)" aria-label="">
                <input required class="form-control form-control-lg" type="text" onfocus="(this.type='date')" placeholder="Expiration Date" aria-label="">
                <hr>
                <div class="itemdescription">
                  <label for="message-text" class="col-form-label"><i class="far fa-comment"></i> Description</label>
                  <textarea required class="form-control" id="message-text"></textarea>
                  <div class="materialcost">
                   <input type="number" min="0" step="0.1" class="form-control" placeholder="enter material cost" aria-label="material cost">
                   <span class="input-group-text bg-gradient bg-dark"><i class="fa fa-rupee-sign"></i></span>
                  </div>
                  <h6><i class="fas fa-paperclip"></i> Attach invoice</h6>
                  <input type="file" id="upload-invoice-refill" class="uploadinvoice">
                  <h6>Item Issuable?</h6>
                  <div class="form-check form-check-inline">
                   <input type="radio" class="btn-check" name="btnradio" id="issue-mtrl-true" autocomplete="off" > 
                   <label class="btn btn-outline-success" for="issuetrue">Yes</label>
                   <input type="radio" class="btn-check" name="btnradio" id="issue-mtrl-false" autocomplete="off"> 
                   <label class="btn btn-outline-danger" for="issuefalse">No</label>
                  </div>
                </div>
      <div class="modal-footer bg-gradient bg-dark">
        <button type="button" class="btn confirmbtn"><i class="fas fa-check"></i> Confirm</button>
        <button type="button" class="btn cancelbtn" data-bs-dismiss="modal"> <i class="fa fa-times"></i> Cancel</button>
      </div>
    </div>
  </div>



    </div>
  </div>
</div>
<!-- ########################################## Edit Item START################################### -->
<!-- ########################################## Edit Item END################################### -->
<!-- ################################ Transfer Tools ######################################## -->
<div class="modal modal-dialog-scrollable" id="transfer-tools" tabindex="-1"> 
  <div class="modal-dialog modal-dialog-scrollable modal-fullscreen-xxl-down">
    <div class="modal-content">
      <div class="modal-header bg-dark bg-gradient">
        <h5 class="modal-title"><i class="fas fa-people-arrows"></i> Transfer Tools</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="transfertoolstables">
          <div class="drawtchn">
            <input id="from-technician-input" class="input" list="datalistOptions" type="text" placeholder="Technician (ID)">
            <hr>
            <div class="table-responsive ">  
              <table class="table">
               <thead class="table-dark align-middle">
                 <tr>
                   <th scope="col"><input onclick="checkAllTransfer('0')" class="form-check-input" type="checkbox" id="" value="" aria-label=""></th>
                   <th scope="col">Code</th>
                   <th scope="col">Name</th>
                   <th scope="col">Status
                    <button class="fltrddmbtn" id="transfertools1-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                    <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="transfertools1-status-ddm">
                      <li><a class="dropdown-item" href="#">OK</a><li>
                      <li><a class="dropdown-item" href="#">Damage</a><li>   
                      <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
                      <li><a class="dropdown-item" href="#">Missing</a></li>
                      <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
                      <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
                    </ul>
                   </th>
                 </tr>
               </thead>
               <tbody id="from-technician-tbody">
                 <tr>
                   <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                   <td>3337/2</td>
                   <td>openring spanner set</td>
                   <td><i class="fas fa-check-circle statusok"></i> Available</td>
                 </tr>
                 <tr>
                  <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                  <td>3337/2</td>
                  <td>openring spanner set</td>
                  <td><i class="fas fa-check-circle statusok"></i> Available</td>
                </tr>
                <tr>
                  <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                  <td>3337/2</td>
                  <td>openring spanner set</td>
                  <td><i class="fas fa-check-circle statusok"></i> Available</td>
                </tr>
               </tbody>
               </table>
            </div> 
          </div>
          <div class="transferfield">
            <button onclick="transferTools('0')" type="button" class="btn bg-dark bg-gradient transferbutton"><i class="fas fa-long-arrow-alt-right"></i></button>
            <button onclick="transferTools('1')" type="button" class="btn bg-dark bg-gradient transferbutton"><i class="fas fa-long-arrow-alt-left"></i></button>
          </div>
          <div class="recievertchn">
            <input id="to-technician-input" class="input" list="datalistOptions" type="text" placeholder="Technician (ID)">
            <hr>
            <div class="table-responsive ">  
              <table class="table">
               <thead class="table-dark align-middle">
                 <tr>
                   <th scope="col"><input onclick="checkAllTransfer('1')" class="form-check-input" type="checkbox" id="" value="" aria-label=""></th>
                   <th scope="col">Code</th>
                   <th scope="col">Name</th>
                   <th scope="col">Status
                    <button class="fltrddmbtn" id="transfertools2-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                    <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="transfertools2-status-ddm">
                      <li><a class="dropdown-item" href="#">OK</a><li>
                      <li><a class="dropdown-item" href="#">Damage</a><li>   
                      <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
                      <li><a class="dropdown-item" href="#">Missing</a></li>
                      <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
                      <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
                    </ul>
                   </th>
                 </tr>
               </thead>
               <tbody id="to-technician-tbody">
                 <tr>
                   <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                   <td>3367/4</td>
                   <td>D-Spanner</td>
                   <td><i class="fas fa-check-circle statusok"></i> Available</td>
                 </tr>
                 <tr>
                  <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                  <td>3367/4</td>
                  <td>D-Spanner</td>
                  <td><i class="fas fa-check-circle statusok"></i> Available</td>
                </tr>
                <tr>
                  <td><input class="form-check-input" type="checkbox" id="" value="" aria-label=""></td>
                  <td>3367/4</td>
                  <td>D-Spanner</td>
                  <td><i class="fas fa-check-circle statusok"></i> Available</td>
                </tr>
               </tbody>
               </table>
            </div> 
          </div>
        </div>
      </div>
      <div class="modal-footer bg-gradient bg-dark">
        <button id="transfer-tools-button" type="button" class="btn confirmbtn"><i class="fas fa-check"></i> Done</button>
        <!-- <button type="button" class="btn cancelbtn" data-bs-dismiss="modal"> <i class="fa fa-times"></i> Cancel</button> -->
      </div>
    </div>
  </div>
</div>
<!-- ################################ Indivisual Archives ######################################## -->
<div class="modal" id="archive2-modal" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header bg-gradient bg-dark">
        <h5 class="modal-title"><i class="fas fa-archive"></i> Archive</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form class="d-flex mb-2">
          <input class="form-control sm-2 tsrch" type="search" placeholder="Search" aria-label="Search">
         </form>
        <div class="table-responsive ">  
          <table id="archive2-table" class="table">
           <thead class="table-dark align-middle">
            <tr>
              <th scope="col" colspan="6" id="archive-modal-tool">Thrust Plate (VG 3074/1)</th>
            </tr>
            <tr>
               <!-- <th scope="col">Event</th> -->
               <th scope="col">Tool Code</th>
               <th scope="col">Tool Name</th>
               <th scope="col">Employee (ID)</th>
               <th scope="col">Event Time
                <button class="fltrddmbtn" id="archive-event-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="event-archive-ddm">
                  <li><input class="filterddm" type="text" name="fromdate" id="event-archive-from" placeholder="From: mm/dd/yyyy " onfocus="(this.type='date')"></li>   
                  <li><input class="filterddm" type="text" name="todate" id="event-archive-   to" placeholder="To: mm/dd/yyyy" onfocus="(this.type='date')"></li>   
                </ul>
               </th>
               <th scope="col">Resolve Time
                <button class="fltrddmbtn" id="archive-resolve-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="resolve-archive-ddm">
                  <li><input class="filterddm" type="text" name="fromdate" id="resolve-archive-from" placeholder="From: mm/dd/yyyy " onfocus="(this.type='date')"></li>   
                  <li><input class="filterddm" type="text" name="todate" id="resolve-archive-   to" placeholder="To: mm/dd/yyyy" onfocus="(this.type='date')"></li>   
                </ul>
               </th>
               <th scope="col">Item Status
                <button class="fltrddmbtn" id="archive-status-ddm" type="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-caret-down"></i></button>
                <ul class="dropdown-menu fltrddm bg-gradient bg-dark" aria-labelledby="archive-status-ddm">
                  <li><a class="dropdown-item" href="#">OK</a><li>
                  <li><a class="dropdown-item" href="#">Damage</a><li>   
                  <li><a class="dropdown-item" href="#">Partially Damage</a><li>   
                  <li><a class="dropdown-item" href="#">Missing</a></li>
                  <li><a class="dropdown-item" href="#">Incomplete Kit</a></li>
                  <li><a class="dropdown-item" href="#">Under Maintenance </a></li>
                </ul>
               </th>
               <th scope="col">Remarks</th>
               <!-- <th scope="col"><i class="fas fa-paperclip"></i>Attachments</th> -->
               <th scope="col">Actions</th>
             </tr>
           </thead>
           <tbody id="archive2-tbody">
             <tr>
               <td>Issued</td>
               <td>Naivedya Jain (46)</td>
               <td>3/5/2021, 1:18:31 AM</td>
               <td>3/5/2021, 9:17:53 PM</td>
               <td><i class="fas fa-times statusdamaged"></i> damaged</td>
               <td>attachment lin</td>
             </tr>
           </tbody>
           </table>
        </div> 
      </div>
      <div class="modal-footer bg-dark bg-gradient">
        <button onclick="exportAsPDF('archive2-table', 1)" type="button" class="btn exportbutton"> <i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
      </div>
    </div>
  </div>
</div>
<!-- ################################ Maintenance modal START ######################################## -->
<div class="modal" id="maintenance" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header bg-gradient bg-dark">
        <h5 class="modal-title"><i class="fas fa-file-medical"></i> Maintenance Sheet</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="table-responsive maintenancesheet">
          <table class="table">
          <thead class="table-dark bg-dark bg-gradient align-middle">
            <tr>
              <th class="mtn-thfirm" colspan="4">Scorptech Technologies Pvt. Ltd</th>
            </tr>
            <tr>
              <td colspan="4" class="mtn-sheet-item">2 Post lift</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th>Item Code</th>
              <td>2 POST/PRECESION/SF/ BAY03</td>
              <th>Service Provider</th>
              <td>Firm 1</td>
            </tr>
            <tr>
              <th>Brand</th>
              <td>Precision</td>
              <th>Contact</th>
              <td>9782383338</td>
            </tr>
            <tr>
              <th>Specifiacton</th>
              <td>XYZ 2POST-LIFT</td>
              <th>Date of Purchase</th>
              <td>03/22/2020</td>
            </tr>
            <tr>
              <th scope="col">COST</th>
              <td>120000 $</td>
              <th>Inspection Frequency</th>
              <td>15 day(s)</td>
            </tr>
          </tbody>
          </table>
           </div> 
        <div class="table-responsive">
          <table class="table">
            <thead class="table-dark bg-dark bg-gradient align-middle">
                <tr>
                <th>#</th>
                <th>Date</th>
                <th>Emoloye (ID)</th>
                <th>Observations</th>
                <th>Resolve Date</th>
                <th>Remarks</th>
                <th>Cost</th>
                <th>Invoice</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td>3/15/2021, 9:33:17 PM</td>
                <td>Shlok Agarwalla</td>
                <td class="longtext">Maintenance Skipped :
                  testing- maintenance skipped</td>
                <td>3/20/2021, 8:40:06 PM</td>
                <td class="longtext">warranty covered, repaired parts, general cleaning</td>
                <td>₹689</td>
                <td><button type="button" class="btn btn-secondary" title="service invoice"><i class="fas fa-file-invoice"></i><span class="btnref"> Invoice</span></button></td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td class="grandtotal"colspan="7"><b>Total Cost</b></td>
                <td><b>$689</b></td>
              </tr>
            </tfoot>
          </table>
        </div>   
      </div>
      <div class="modal-footer bg-dark bg-gradient">
        <button onclick="exportAsPDF('history-table', 1)" type="button" class="btn exportbutton"> <i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
      </div>
    </div>
  </div>
</div>
<!-- ################################ Maintenance modal END ######################################## -->
<!-- ################################ New User Details Start ######################################## -->
<div class="modal" id="new-user-details" tabindex="-1">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header bg-gradient bg-dark">
        <h5 class="modal-title"><i class="fas fa-clipboard userdetails"> New User Details</i></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
        <div class="modal-body">
          <div class="table-responsive newuserdtlstbl">
            <table class="table">
              <thead class="table-dark bg-dark bg-gradient align-middle">
                <tr>
                  <th scope="col" colspan="2">Details</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th>Name</th>
                  <td>Naivedya Jain</td>
                </tr>
                <tr>
                  <th>e-mail</th>
                  <td>reachnaivedya@gmail.com</td>
                </tr>
                <tr>
                  <th>Contact number</th>
                  <td><span>+91</span>9782383338</td>
                </tr>
                <tr>
                  <th>Date of Birth</th>
                  <td>06/07/1998</td>
                </tr>
                <tr>
                  <th>Message</th>
                  <td class="longtext">Lorem Ipsum is simply dummy text of the printing and typesetting industry. 
                    Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, 
                    when an unknown printer took a galley of type and scrambled it to make a type specimen book.
                    It has survived not only five centuries, 
                    but also the leap into electroni</td>
              </tbody>
            </table>
          </div>
        </div>
      <div class="modal-footer bg-dark bg-gradient">
        <button onclick="exportAsPDF('history-table', 1)" type="button" class="btn exportbutton"> <i class="fas fa-file-export"></i><span class="btnref"> Export</span></button>
      </div>
    </div>
  </div>
</div>
<!-- ################################ New User Details END ######################################## -->
<!-- ################################ Manager Control Panel START ######################################## -->
<div class="modal" id="manager-settings" tabindex="-1">
  <div class="modal-dialog modal-dialog-scrollable modal-lg modal-fullscreen-lg-down">
    <div class="modal-content">
      <div class="modal-header bg-dark">
        <h3 class="modal-title"><i class="fas fa-cogs"></i> Settings</i></h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          <div class="assignisseuer bg-dark">
            <h4 class="bg-dark bg-gradient"><i class="fas fa-user-cog"></i> Issuer</h4>  
             <input onkeyup="technicianChangeControl(this.value)"
             id="select-staff-control-panel"  class="form-control" placeholder="Issuer" type="text">
          </div>
          <div class="WStiming bg-dark">
            <h4 class="bg-dark bg-gradient"><i class="fas fa-clock"></i> Workshop Timings</h4>
            <div class="wstimeform">
             <input class="form-control mb-2" type="text" id="open-time" placeholder="Workshop Open" onfocus="(this.type='time')"> 
             <span>To</span>
             <input class="form-control mb-2" type="text" id="close-time" placeholder="Workshop Close" onfocus="(this.type='time')">
            </div>
          </div> 
          <div class="general-formats bg-dark">
            <h4 class="bg-dark bg-gradient"><i class="fas fa-sliders-h"></i> General Formats</h4> 
            <h5><i class="far fa-calendar"></i> Date Format</h5>
            <select id="dateformat" class="form-select mb-3" aria-label="manager date format">
              <option value="0">2020-03-22</option>
              <option value="1">22-03-2020</option>
              <option value="2">22nd Mar 2020</option>
              <option value="3">Sun, 22nd Mar 20</option>
            </select>
            <h5><i class="far fa-clock"></i> Time Format</h5>
            <div class="btn-group timebutton" role="group" aria-label="Basic radio toggle button group">
              <input type="radio" class="btn-check" name="12hr" id="12hr" autocomplete="off"> 
              <label class="btn btn-outline-danger" for="12hr">12 hr</label>
            
              <input type="radio" class="btn-check" name="24hr" id="24hr" autocomplete="off">
              <label class="btn btn-outline-danger" for="24hr">24 hr</label>
            </div>
            <br><br>
            <h5><i class="fas fa-rupee-sign"></i> Currency Format </h5>
            <select class="form-select mb-3" aria-label="Currency format" id="currencyformat">
              <option selected>INR</option>
              <option value="1">USD</option>
              <option value="2">GBP</option>
            </select>
            <h5><i class="fas fa-globe-asia"></i> Region</h5>
            <select class="form-select" aria-label="Currency format">
              <option selected>India</option>
              <option value="1">USA</option>
              <option value="2">Great Britain</option>
            </select>
          </div>
          <div class="weeklyoff bg-dark">
            <h4 class="bg-dark bg-gradient"><i class="fas fa-store-alt-slash"></i> Weekly Off</h4>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="Monday">
              <label class="form-check-label" for="Monday">
                Monday
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="Tuesday">
              <label class="form-check-label" for="Tuesday">
                Tuesday
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="Wednesday">
              <label class="form-check-label" for="Wednesday">
                Wednesday
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="Thursday">
              <label class="form-check-label" for="Thursday">
                Thursday
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="Friday">
              <label class="form-check-label" for="Friday">
                Friday
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="Saturday">
              <label class="form-check-label" for="Saturday">
                Saturday
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="Sunday" checked>
              <label class="form-check-label" for="Sunday">
                Sunday
              </label>
            </div>
          </div> 
          <div class="managerholidays bg-dark">
            <h5 class="bg-dark bg-gradient">Holidays
              <button type="button" class="btn addholidaybtn" data-bs-toggle="modal" data-bs-target="#manager-add-holiday" title="Add holiday"><i class="fas fa-calendar-plus"><span class="btnref"> Add Holiday</span></i></button>
            </h5>
            <div class="table-responsive">
              <table class="table">
                <thead class="table-dark align-middle">
                  <th>Name</th>
                  <th>Date</th>
                </thead>
                <tbody>
                  <tr>
                    <td>Republic Day</td>
                    <td>26/01/2021</td>
                  </tr>
                  <tr>
                    <td>Diwali</td>
                    <td>12/11/2021 <span>to</span> 14/11/2021</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>  
       </div>  
       <div class="modal-footer bg-dark bg-gradient">
      </div>
    </div>
  </div>
</div>
<!-- ################################ Manager Control Panel END ######################################## -->
<!-- ################################ Manager add people START ######################################## -->
<div class="modal" id="manager-addpeople" tabindex="-1">
  <div class="modal-dialog  modal-fullscreen-md-down">
    <div class="modal-content">
      <div class="modal-header bg-gradient bg-dark">
        <h5 class="modal-title"><i class="fas fa-user-plus"></i> Add People</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form class="needs-validation">
          <label for="" class="form-label">First Name</label>
          <input id="fname" required class="form-control form-control-lg mb-3" type="text" placeholder="John" aria-label="">
          <label for="" class="form-label">Last Name</label>
          <input id="lname" required class="form-control form-control-lg mb-3" type="text" placeholder="Doe" aria-label="">
          <label for="" class="form-label"><i class="fas fa-birthday-cake"></i> Date of Birth</label>
          <input id="dob" required class="form-control form-control-lg mb-3" type="text" placeholder="mm/dd/yyyy" onfocus="(this.type='date')" aria-label="">
          <!-- <label for="" class="form-label"><i class="fas fa-industry"></i> Employee ID</label>
          <input required class="form-control form-control-lg mb-3" type="number" placeholder="1234 xxxx 5678" aria-label=""> -->
          <label for="" class="form-label"><i class="fas fa-mobile-alt"></i> Contact Number</label>
          <div class="input-group mb-3">
              <span class="input-group-text" id="basic-addon1">+91</span>
              <input id="contactno" type="number" class="form-control" placeholder="9876543210" aria-label="" aria-describedby="">
          </div>
          <label for="" class="form-label"><i class="fas fa-envelope"></i> e-mail</label>
          <input id="email" required class="form-control form-control-lg mb-3" type="email" placeholder="user@example.com" aria-label="">
         <div class="itemdescription mb-3">
           <label for="message-text" class="col-form-label"><i class="fas fa-comment"></i> Message</label>
           <textarea class="form-control" id="message-text"></textarea>
         </div>
        </form>
      </div>
      <div class="modal-footer bg-dark bg-gradient">
        <button type="button" class="btn cancelbtn" data-bs-dismiss="modal">Cancel</button>
        <button id="register" onclick="register()" type="button" class="btn confirmbtn"><i class="fas fa-user-plus"></i> Add</button>
      </div>
    </div>
  </div>
</div>
<!-- ################################ Manager add people END ######################################## -->
<!-- ################################ Manager holidays Modal START ######################################## -->
<div class="modal" id="manager-add-holiday" tabindex="-1">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header bg-dark">
        <h3 class="modal-title"><i class="fas fa-plus"></i> Add Holiday</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input class="form-control mb-2" placeholder="Caption" type="text">
        <input class="form-control mb-2" type="text" id="open-time" placeholder="Holiday" onfocus="(this.type='date')">
        <input class="form-control mb-2" type="text" id="open-time" placeholder="Holidays start" onfocus="(this.type='date')"> 
        <input class="form-control mb-2" type="text" id="close-time" placeholder="holiday end" onfocus="(this.type='date')">
      </div>
      <div><input class="form-check-input" type="checkbox" value="" id="holiday-rpt-yr">
        <label class="form-check-label" for="holiday-rpt-yr">
          Repeats every year
        </label>
      </div>
      <div>
        <input class="form-check-input" type="checkbox" value="" id="holiday-rpt-mnth">
        <label class="form-check-label" for="holiday-rpt-mnth">
          Repeats every month
        </label>   
      </div>
      <div class="modal-footer bg-dark bg-gradient">
      </div>
    </div>
  </div>
</div>
<!-- ################################ Manager holidays Modal END ######################################## -->
<!-- ################################# quick maintenance add START ######################################### -->
<div class="modal" id="quick-mtn-add" tabindex="-1">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header bg-dark">
        <h3 class="modal-title"><i class="fas fa-file-alt"></i> Add Service Plan</h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="addmaintenancedetails">
          <div class="itemformheader bg-gradient bg-dark justify-content-around">
          <h5>Add maintenance details</h5>
          <input type="checkbox" class="btn-check" id="maintenanceplantrue" autocomplete="off" onchange="maintenanceChange()">
          <label class="btn btn-outline-success maintenanceCheck" for="maintenanceplantrue"><i class="fa fa-plus-square"></i> Add</label>
        </div>
        <div class="itemformbody" id="maintenanceform">
          <input required class="form-control form-control-lg" type="text" placeholder="Company" aria-label="">
          <input required class="form-control form-control-lg" type="text" placeholder="Company Contact" aria-label="">
          <input class="form-control form-control-lg" type="text" placeholder="Service Provider" aria-label="">
          <input class="form-control form-control-lg" type="text" placeholder="Serviceman Contact" aria-label="">
          <hr>
          <div class="mtnplancost">
          <input required class="form-control form-control-lg" type="number" min="0" step="0.1" placeholder="Maintenance-Plan Cost" aria-label="">
          <span class="input-group-text bg-gradient bg-dark"><i class="fa fa-rupee-sign"></i></span>
          </div>
          <div class="maintenanceplaninvoice">
            <h6 class="invoiceheading"><i class="fas fa-paperclip"></i> Attach invoice</h6>
            <input type="file" id="upload-invoice-maintenance" class="uploadinvoice">
          </div>
          <hr>
          <h6 class="justify-content-center">Maintenance Plan Period</h6>
          <input required class="form-control form-control-lg" type="text" placeholder="From: DATE" onfocus="(this.type='date')" aria-label="">
          <input required class="form-control form-control-lg" type="text" placeholder="To: DATE" onfocus="(this.type='date')" aria-label="">
          <hr>
          <input required class="form-control form-control-lg" type="text" placeholder="Last Service Date" onfocus="(this.type='date')" aria-label="">
          <div class="input-group mb-3">
            <input required type="text" class="form-control" placeholder="Service Frequency" aria-label="Maintenance Frequency">
            <button class="btn bg-dark bg-gradient dropdown-toggle frqncyddbtn" id="mtnfrequency" type="button" data-bs-toggle="dropdown" aria-expanded="false"></button>
            <ul class="dropdown-menu bg-dark bg-gradient" aria-labelledby="mtnfrequency">
              <li><a class="dropdown-item" href="#">Day(s)</a></li>
              <li><a class="dropdown-item" href="#">Week(s)</a></li>
              <li><a class="dropdown-item" href="#">Months(s)</a></li>
            </ul>
          </div>
        </div>       
        </div>
      </div>
      <div class="modal-footer bg-dark bg-gradient">
      </div>
    </div>
  </div>
</div>
<!-- ################################# Manager Profile modal #############################################-->
<div class="modal" id="manager-profile" tabindex="-1">
  <div class="modal-dialog modal-md modal-fullscreen-xl-down">
    <div class="modal-content">
      <div class="modal-header bg-dark">
        <h3 class="modal-title"><i class="fas fa-user-alt"> Profile</i></h3>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="userprofilepanel">
          <div class="profilephoto">
            <input type="file" name="" id="profile-pic-upload">
            <label for="profile-pic-upload">Upload image</label>
          </div>
          <div class="username">
            <h3 id="name-show" style="color: #1b1b1b;">Naivedya Jain (Name)</h3>
            <h4 id="designation-show" style="color: #1b1b1b;">Manager (Title)</h4>
          </div>
        </div>
        <div class="userdetails">
        <div class="table-responsive">
          <table class="table">
            <thead class="table-dark">
              <tr>
                <th colspan="2">Details</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th>Employee ID</th>
                <td id="employee-number-show"></td>
              </tr>
              <tr>
                <th>Contact</th>
                <td id="contact-show">+919782383338</td>
              </tr>
              <tr>
                <th>e-mail</th>
                <td id="email-show">reachnaivedya@gmail.com</td>
              </tr>
              <tr>
                <th>Date of Joining</th>
                <td>21 Mar 2020</td>
              </tr>
              <tr>
                <th class="table-dark" colspan="2">Workshop Details</th>
              </tr>
              <tr>
                <th>Workshop</th>
                <td id="workshop-name">Saisha Motors Pvt. Ltd.</td>
              </tr>
              <tr>
                <th>Workshop ID</th>
                <td id="wid-display">1234 ABCD XXXX</td>
              </tr>
              <tr>
                <th>Workshop address</th>
                <td class="longtext">Saisha Nilayam, M- 43,44, M Block, Raghu Vihar, Mansarovar, Jaipur, Rajasthan 302020</td>
              </tr>
            </tbody>
          </table>
        </div>
        </div>
      </div>
      <div class="modal-footer bg-dark bg-gradient">
      </div>
    </div>
  </div>
</div>
<!-- ################################# Manager Profile modal #############################################-->


  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <!-- <script src="bootstrap-5.0.0-beta2-dist/js/bootstrap.bundle.js"></script> -->
  <!-- <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" 
  integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" 
  crossorigin="anonymous"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"
   integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" 
   crossorigin="anonymous"></script>
  <!-- <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script> -->
  <script src="bootstrap-5.0.0-beta2-dist/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-storage.js"></script>


  <!-- ############################### toggle disable in #additem modal ########################################### -->
  <script>
    // var element = document.getElementById("childpartstrue");
    // if(element.checked){
    //   console.log("checked")
    // }
    // else
    //   console.log("unchecked");

    $("#childpartsform input").prop("disabled", true);
    $("#maintenanceform input").prop("disabled", true);
    
    function childPartsChange(){
      if($("#childpartstrue").is(':checked')){
        $("#childpartsform").prop("disabled", false);
      }else{
        $("#childpartsform input").prop("disabled", true);
      }
    }

    function maintenanceChange(){
      if($("#maintenanceplantrue").is(':checked')){
        $("#maintenanceform input").prop("disabled", false);
      }else{
        $("#maintenanceform input").prop("disabled", true);
      }
    }

  //  ################# Context menu ###################
    window.addEventListener("contextmenu",function(event){
  event.preventDefault();
  var contextElement = document.getElementById("context-menu");
  contextElement.style.top = event.offsetY + "px";
  contextElement.style.left = event.offsetX + "px";
  contextElement.classList.add("active");
});
window.addEventListener("click",function(){
  document.getElementById("context-menu").classList.remove("active");
});



// Your web app's Firebase configuration
var firebaseConfig = {
    apiKey: "AIzaSyCUNP_dv1qbi2QuH7_pcZbGqZ4X1Y478bk",
    authDomain: "orcus-fb184.firebaseapp.com",
    projectId: "orcus-fb184",
    storageBucket: "orcus-fb184.appspot.com",
    messagingSenderId: "132406151963",
    appId: "1:132406151963:web:e9ca6e55052fdaa8aba1be",
    measurementId: "G-3NXM7BB3GL"
};
// Initialize Firebase
firebase.initializeApp(firebaseConfig);  

  </script>   
  <button onclick="closeWindow()" class="fas fa-times closeButton" id="closebuttonsid" aria-label="close"></button>
  <button onclick="minimiseWindow()" class="fa fa-minus minimiseButton" id="minimisebuttonsid" aria-label="minimise"></button>
  </body>
  <script>
    document.onkeydown = manageShortcuts;
    var cropData = null;
    const Store = require('electron-store');
    const store = new Store();
    var assignToolsSelectedTechnician;
    var selectedFile;
    var currentUser;
    // uncomment this for local service layer
    // var connectorClass = require("./service-layer.js");
    var cc = new connectorClass();
    var emp_id = store.get('Emp ID');
    var moment = require('moment-timezone');
    const { dialog } = require('electron').remote;
    const electron = require('electron');
    const { remote } = require('electron');
    const BrowserWindow = electron.remote.BrowserWindow;
    const screen = require('electron').screen
    let screenWidth, screenHeight;
    var cartItems = [];
    var selectedTechnicianID = '';
    var issueHistorySelectedId = '';
    var issueHistorySelectedToolcode = '';
    var fromSelectedTechnicianID = '';
    var toSelectedTechnicianID = '';
    var childrenlist = [];
    var modifyToolcode;
    var allTools;
    var kit;
    var noOfChildren = 0;
    var renew = 0;
    // var serverurl = '';
    var timeformat = 0;
    var dateformat = 0;
    var workshopDetails;
    var workshopIssuer;
    var skipMaintenanceToolCode;
    var skipMaintenanceToolName;
    var defaultCurrency;
    var workshop_id;
    var assignIndex = 0;
    // var company_id;
    var noOfReports = 0;
    var noOfMaterials = 0;
    var noOfUnderMaintenance = 0;
    var noOfAssets = 0;
    var pendingReports = 0;
    var handmiss, handdam, handdbf, splmiss, spldam, spldbf, eqpmiss, eqpdam, eqpdbf, totalmiss, totaldam, totaldbf = 0;
    var permanent = 0;
    var addedQuantity = 0;
    var removeTools = [];
    const { ipcRenderer } = require('electron');

    google.charts.load("current", { packages: ["corechart", "bar"] });
    google.charts.setOnLoadCallback(loadAnalytics);
    initiateSetup();
    async function initiateSetup() {
        //console.log(store.get('Emp ID'));
        var currentEmp = store.get('Emp ID');
        // var currentDiv = store.get('currentDiv');
        // console.log(currentDiv);
        try {
            currentUser = await cc.getUserDetailsFromEmpID(currentEmp);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please try again.");
            console.log("Error in getUserDetailsFromEmpID! Please try again.");
        }
        // console.log(currentUser[0]["Workshop ID"]);
        workshop_id = currentUser[0]["Workshop ID"];
        defaultCurrency = await cc.getDefaultCurrency(workshop_id);

        try {
            workshopDetails = await cc.getWorkshopDetails(workshop_id);
            cc.closeConnection();
        }
        catch{
            alert1("Error in fetching the workshop details! Please try again.");
            console.log("Error in getWorkshopDetails! Please try again.");
        }

        try {
            workshopIssuer = await cc.getIssuerDetails(workshop_id);
            document.getElementById("select-staff-control-panel").placeholder = workshopIssuer["First Name"] + ' ' + workshopIssuer["Last Name"] + ' (' + workshopIssuer["Emp ID"] + ')';
        }
        catch{
            document.getElementById("select-staff-control-panel").placeholder = 'Error Ocurred';
            document.getElementById("select-staff-control-panel").disabled = true;
        }

        // console.log("defaultCurrency");
        // console.log(defaultCurrency["Default Currency Symbol"]);
        var x = moment().year();

        // document.getElementById("currentyear").innerHTML = x;
        document.getElementById("loader").removeAttribute("hidden");
        // await getRegularHolidayData();
        // await getSpecialHolidayData();
        // document.getElementById("no-data-div").innerHTML = "";
        document.getElementById("notifications-tbody").innerHTML = "";
        document.getElementById("issue-history-tbody").innerHTML = "";
        document.getElementById("repair-history-tbody").innerHTML = "";
        document.getElementById("modify-hand-tool-tbody").innerHTML = "";
        document.getElementById("modify-equipment-tbody").innerHTML = "";
        document.getElementById("modify-tool-tbody").innerHTML = "";
        document.getElementById("update-employee-tbody").innerHTML = "";
        document.getElementById("update-assets-tbody").innerHTML = "";
        document.getElementById("update-materials-tbody").innerHTML = "";


        // company_id = workshopDetails[0]["Company ID"];
        document.getElementById("workshop-name").innerHTML = workshopDetails[0]["Workshop Name"];

        document.getElementById("wid-display").innerHTML = workshop_id;

        // document.getElementById("profile-content").style.display = "flex";
        // document.getElementById("company-show").innerHTML = currentUser[0]["Company"];
        document.getElementById("contact-show").innerHTML = currentUser[0]["Contact Number"];
        document.getElementById("email-show").innerHTML = currentUser[0]["Email"];
        document.getElementById("employee-number-show").innerHTML = currentUser[0]["Emp ID"];
        document.getElementById("name-show").innerHTML = currentUser[0]["First Name"] + " " + currentUser[0]["Last Name"];
        document.getElementById("designation-show").innerHTML = currentUser[0]["Designation"];
        // document.getElementById("dob-show").innerHTML = (new Date(currentUser[0]["DOB"])).toLocaleDateString();

        format = currentUser[0]["Time Format"];
        if (format > 3) {
            timeformat = 1;
            format -= 4;
        }
        dateformat = format;
        if (timeformat == 1)
            document.getElementById("time-format-toggle").checked = true;

        var x = moment();
        document.getElementById("dateformat").value = format;

        store.set("email", currentUser[0]["Email"]);

        noOfReports = await cc.getNoOfReports(workshop_id);
        pendingReports = await cc.getNoOfPendingReports(workshop_id);
        var toolmaintenancecost = await cc.getToolMaintenanceCost(workshop_id);
        var eqpmaintenancecost = await cc.getEqpMaintenanceCost(workshop_id);
        var totalmaintenancecost = await cc.getTotalMaintenanceCost(workshop_id);
        var avgresponse = await cc.getAvgResponseTime(workshop_id);
        var noOfIssues = await cc.getNoOfIssues(workshop_id);

        var resptime = 0;
        for (i = 0; i < avgresponse.length; i++) {
            date1 = new Date(avgresponse[i]["Resolve Datetime"]);
            date2 = new Date(avgresponse[i]["Report Datetime"]);
            diffTime = Math.abs(date2 - date1);
            diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            resptime += diffDays;
        }
        resptime /= avgresponse.length;
        resptime = resptime.toFixed(2);
        if (!eqpmaintenancecost[0]["cost"])
            eqpmaintenancecost[0]["cost"] = 0;
        if (!toolmaintenancecost[0]["cost"])
            toolmaintenancecost[0]["cost"] = 0;
        if (!totalmaintenancecost[0]["cost"])
            totalmaintenancecost[0]["cost"] = 0;
        var x = moment();
        m = x.format("MM");

        try {
            data = await cc.getNotifications(workshop_id);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please try again.");
            console.log("Error in getNotifications ! Please try again.");
            //window.close();
        }
        //document.getElementById("issue-table").hidden=false;
        if (data.length == 0) {
            document.getElementById("no-data-div").innerHTML = "No new notifications";
        }
        data.forEach(dataRow => {
            document.getElementById("notifications-table").getElementsByTagName("tbody")[0].appendChild(createRowForNotificationsTable(dataRow));
        })

        //    try{
        //       specialTools = await cc.getSpecialTools(workshop_id);
        //       cc.closeConnection();
        //     }
        //       catch {
        //         alert1("Error in fetching your details! Please try again.");
        //         console.log("Error in getSpecialTools ! Please try again.");
        //     }
        //     //console.log(specialTools);
        //     specialTools.forEach(dataRow => {
        //         document.getElementById("modify-tool-table").getElementsByTagName("tbody")[0].appendChild(createRowForModifyToolTable(dataRow));
        //     })

        try {
            allTools = await cc.getAllTools(workshop_id);
            cc.closeConnection();
            allTechnicians = await cc.getAllTechnicians(workshop_id);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please try again.");
            console.log("Error in getAllTools! Please try again.");
        }

        allTechnicians.forEach(dataRow => {
            document.getElementById("update-employee-table").getElementsByTagName("tbody")[0].appendChild(createRowForUpdateEmployeeTable(dataRow));
        });

        var technicianNames = [];
        var index = 0;
        toBeShownTechnicians = allTechnicians.filter(function (technician) {
        if(technician["Authorised"] == 0)
        {  
          technicianNames[index] = technician["First Name"] + " " + technician["Last Name"] + " (" + technician["Emp ID"] + ")";
          index += 1;
        }
        else
          return;
        });
        var inventoryNames = [];
        var index = 0;
        toBeShownTools = allTools.filter(function (tool) { 
          inventoryNames[index] = tool["Tool Name"] + " (" + tool["Tool Code"] + ")";
          index += 1;
        });
        // console.log(inventoryNames);
        autocomplete(document.getElementById("technician-input-inspection"), technicianNames, '0');
        autocomplete(document.getElementById("inventory-input"), inventoryNames, '1');
        autocomplete(document.getElementById("people-input"), technicianNames, '2');
        autocomplete(document.getElementById("technician-input-assign"), technicianNames, '3');
        autocompleteFromTransfer(document.getElementById("from-technician-input"), technicianNames, '0');
        autocompleteFromTransfer(document.getElementById("to-technician-input"), technicianNames, '1');
        document.getElementById("refresh-button").addEventListener("click", function () {
          console.log("refresh2");
        location.reload();
        });
        // autocompletePeople(document.getElementById("technician-input-inspection"), technicianNames);
        allTools.forEach(tool => {

            if (tool["Permanent"] == 0 && tool["Part Of Kit"] == null) {
                var createdElement = createRowForModifyToolTable(tool);
                if (createdElement) {
                    document.getElementById("modify-tool-tbody").appendChild(createdElement);
                }
            }

            else if (tool["Permanent"] == 2 || tool["Permanent"] == 3) {
                var createdElement = createRowForModifyToolTable(tool);
                if (createdElement) {
                    document.getElementById("modify-equipment-tbody").appendChild(createdElement);
                }
            }

            else if (tool["Permanent"] == 1 && tool["Part Of Kit"] == null) {
                var createdElement = createRowForModifyToolTable(tool);
                if (createdElement) {
                    document.getElementById("modify-hand-tool-tbody").appendChild(createdElement);
                }
            }
            else if (tool["Permanent"] == 4 && tool["Part Of Kit"] == null) {
                var createdElement = createRowForModifyToolTable(tool);
                noOfAssets += 1;
                if (createdElement) {
                    document.getElementById("update-assets-tbody").appendChild(createdElement);
                }
            }
            else if ((tool["Permanent"] == 5 || tool["Permanent"] == 6) && tool["Part Of Kit"] == null) {
                var createdElement = createRowForModifyToolTable(tool);
                noOfMaterials += 1;
                if (createdElement) {
                    document.getElementById("update-materials-tbody").appendChild(createdElement);
                }
            }

            if(tool["Status"] == 6)
              noOfUnderMaintenance += 1;
        });

 

        //   for(var i=0; i<allTools.length; i++){
        //         if(allTools["Permanent"] == 0 && allTools["Part Of Kit"]==null){
        //         var x = await createRowForModifyToolTable(allTools[i]);
        //         document.getElementById("modify-tool-table").appendChild(x);
        //       }
        //     }
        // try{
        //   handTools = await cc.getHandTools(workshop_id);
        //   cc.closeConnection();
        // }
        //   catch {
        //     alert1("Error in fetching your details! Please try again.");
        //     console.log("Error in getSpecialTools ! Please try again.");
        // }
        // handTools.forEach(dataRow => {
        //     document.getElementById("modify-hand-tool-table").getElementsByTagName("tbody")[0].appendChild(createRowForModifyToolTable(dataRow));
        // })

        try {
            issueHistory = await cc.getTotalIssueHistory(workshop_id);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please try again.");
            console.log("Error in getTotalIssueHistory ! Please try again.");
            window.close();
        }
        var valueOfTools = 0, noOfTools = 0;
        var valueOfAssets = 0, noOfAssets = 0;
        var valueOfEqp = 0, noOfEqp = 0;
        var valueOfMaterials = 0, noOfMaterials = 0;
        allTools.forEach(tool => {
          if(tool["Permanent"] == 4)
          {
            valueOfAssets += tool["Value"];   
            noOfAssets += 1;
          }
          else if(tool["Permanent"] == 0 || tool["Permanent"] == 1)
          {
            valueOfTools += tool["Value"];   
            noOfTools += 1;
          }
          else if(tool["Permanent"] == 2 || tool["Permanent"] == 3)
          {
            valueOfEqp += tool["Value"];   
            noOfEqp += 1;
          }
          else if(tool["Permanent"] == 5 || tool["Permanent"] == 6)
          {
            valueOfMaterials += tool["Value"];   
            noOfMaterials += 1;
          }      
        })
        var totalValue = valueOfAssets + valueOfEqp + valueOfTools + valueOfMaterials;
        document.getElementById("archive-tbody").innerHTML = "";
        document.getElementById("total-tools").innerHTML = noOfTools;
        document.getElementById("total-eqp").innerHTML = noOfEqp;
        document.getElementById("AN-no-of-tools").innerHTML = noOfTools;
        document.getElementById("AN-value-of-tools").innerHTML = defaultCurrency["Default Currency Symbol"] + valueOfTools;
        document.getElementById("AN-no-of-equipment").innerHTML = noOfEqp;
        document.getElementById("AN-no-of-materials").innerHTML = noOfMaterials;
        document.getElementById("total-materials").innerHTML = noOfMaterials;
        document.getElementById("total-under-maintenance").innerHTML = noOfUnderMaintenance;
        document.getElementById("AN-no-of-assets").innerHTML = noOfAssets;
        document.getElementById("AN-value-of-equipment").innerHTML = defaultCurrency["Default Currency Symbol"] + valueOfEqp;
        document.getElementById("AN-value-of-materials").innerHTML = defaultCurrency["Default Currency Symbol"] + valueOfMaterials;
        document.getElementById("AN-value-of-assets").innerHTML = defaultCurrency["Default Currency Symbol"] + valueOfAssets;
        document.getElementById("AN-total-value").innerHTML = defaultCurrency["Default Currency Symbol"] + totalValue;
        // document.getElementById("AN-no-of-reports").innerHTML = noOfReports[0]["totalreports"];
        // document.getElementById("AN-no-of-pendingreports").innerHTML = pendingReports[0]["count(*)"];
        // document.getElementById("AN-response-time").innerHTML = resptime + " days";
        // document.getElementById("AN-maintenance-cost-tool").innerHTML = defaultCurrency["Default Currency Symbol"] + toolmaintenancecost[0]["cost"];
        // document.getElementById("AN-maintenance-cost-eqp").innerHTML = defaultCurrency["Default Currency Symbol"] + eqpmaintenancecost[0]["cost"];
        // document.getElementById("AN-maintenance-cost-total").innerHTML = defaultCurrency["Default Currency Symbol"] + totalmaintenancecost[0]["cost"];
        // document.getElementById("AN-missing-frequency").innerHTML = (totalmiss / m).toFixed(2) + "/m";
        // document.getElementById("AN-damage-frequency").innerHTML = ((totaldam + totaldbf) / m).toFixed(2) + "/m";
        // document.getElementById("AN-issue-frequency").innerHTML = (noOfIssues[0]["totalissues"] / (m * 30)).toFixed(2) + "/day";
        // console.log(document.getElementById("AN-filter").innerHTML);

        // document.getElementById("total-issues").innerHTML = noOfIssues[0]["totalissues"];

        var noOfPendingReturns = await cc.getNoOfPendingReturns(workshop_id);
        document.getElementById("total-pending-returns").innerHTML = noOfPendingReturns[0]["totalpending"];
        // document.getElementById("total-reports").innerHTML = noOfReports[0]["totalreports"];
        // allTools.forEach(tool => {

        // if (tool["Part Of Kit"] == null) {
        //     var createdElement = await createRowForArchiveTable(tool);
        //     if (createdElement) {
        //         document.getElementById("archive-tbody").appendChild(createdElement);
        //     }
        // }
        // });

        for (var i = 0; i < allTools.length; i++) {

            if (allTools[i]["Part Of Kit"] == null) {
                var createdElement = await createRowForArchiveTable(allTools[i]);
                if (createdElement) {
                    document.getElementById("archive-tbody").appendChild(createdElement);
                }
            }
        }
        document.getElementById("pending-maintenance-tbody").innerHTML = "";
        for (var i = 0; i < allTools.length; i++) {
            // startdate = "20.03.2014";
            // var new_date = moment(startdate, "DD-MM-YYYY").add('days', 5);

            // var day = new_date.format('DD');
            // var month = new_date.format('MM');
            // var year = new_date.format('YYYY');

            // alert1(day + '.' + month + '.' + year);
        if (allTools[i]["Maintenance"] == '1') {
            // console.log("");
            var index = allTools[i]["Inspection Frequency"].indexOf("d");
            var duration = 'days';
            if(index == '-1')
            {   index = allTools[i]["Inspection Frequency"].indexOf("w");
                duration = 'weeks';
            }
            if(index == '-1')  
            {  
                duration = 'months';
                index = allTools[i]["Inspection Frequency"].indexOf("m");
            }
            if(index == '-1')
                continue;
            var inspection_in_days = allTools[i]["Inspection Frequency"].substring(0,index);
            // var inspection_in_days = multiply*inspection_in_days;
            // var maintenance_due = new Date();
            allTools[i]["Date of Last Maintenance"] = moment(new Date(allTools[i]["Date of Last Maintenance"]));
            // allTools[i]["Date of Last Maintenance"] = allTools[i]["Date of Last Maintenance"].format("DD.MM.YYYY");
            // allTools[i]["Date of Last Maintenance"] = allTools[i]["Date of Last Maintenance"];
            // console.log(allTools[i]["Date of Last Maintenance"]);
            var maintenance_due = moment(new Date(allTools[i]["Date of Last Maintenance"]), "DD-MM-YYYY").add(inspection_in_days, duration).toDate();
            var maintenance_due1 = moment(new Date(maintenance_due));
            maintenance_due1 = maintenance_due1.format("YYYY-MM-DD");
            // console.log(index + " " + inspection_in_days+duration + " " + maintenance_due1);
            var today = moment();
            var x = moment(new Date(today), "DD-MM-YYYY").add(1, 'months').toDate();
            var x1 = moment(new Date(x));
            x1 = x1.format("YYYY-MM-DD");
            // var isAfter = moment(maintenance_due1 + " " + x1);
            if(x1 > maintenance_due1 && allTools[i]["Status"] == 0)
            {
                var createdElement = await createRowForMaintenanceDue(allTools[i], maintenance_due1);
                if (createdElement) {
                    document.getElementById("pending-maintenance-tbody").appendChild(createdElement);
                }
            }
        }
    }
        // for (var i = 0; i < records.length; i++) {
        //         var x = await createRecordCard(records[i]);
        //         document.getElementById("record-modal-content").appendChild(x);
        //     }
        document.getElementById("assign-tools-table").innerHTML = "";
        allTools.forEach(tool => {

            if (tool["Permanent"] == 1 && tool["Part Of Kit"] == null) {
                var createdElement = createRowForAssignToolsTable(tool);
                if (createdElement) {
                    document.getElementById("assign-tools-table").appendChild(createdElement);
                }
            }
        });
        rows = document.getElementById("assign-tools-table").getElementsByTagName("tr");
        for (var i = 0; i < rows.length; i++) {

            rows[i].onclick = async function () {
                id = this.getElementsByTagName("td")[0].innerHTML;
                status = this.getElementsByTagName("td")[2].textContent;
                console.log(id + " " + status);
                isKitItems = await cc.getChildParts(id, workshop_id);
                cc.closeConnection();
                isKit = 0;
                if (isKitItems.length == 0) {
                    isKit = 0;
                }
                else {
                    isKit = 1;
                }

                if (status.includes("NA") == true || status.includes("Issued") == true) {
                    alert1("This item is currently not available.");
                    return;
                }
                if (status.includes("Partially Damaged") == true && isKit == 1) {
                    alertMessage = "This Kit has been reported.\nThe following are the kit items and their conditions.\n";
                    isKitItems.forEach(item => {
                        if (item["Status"] == "0") {
                            alertMessage = alertMessage + " " + item["Tool Name"] + " : " + "Available \n";
                        }
                        else if (item["Status"] == "3") {
                            alertMessage = alertMessage + " " + item["Tool Name"] + " : " + "Damaged \n";
                        }
                        else if (item["Status"] == "4") {
                            alertMessage = alertMessage + " " + item["Tool Name"] + " : " + "Missing \n";
                        }
                    })
                    alert1(alertMessage);
                }
                if (status.includes("Under Maintenance") == true)
                {
                    alert1("This item is currently under maintenance.");
                    return;
                }
                found = 0;
                for (var j = 0; j < cartItems.length; j++) {
                    if (cartItems[j].id === id) {
                        found = 1;
                        closeModal();
                        alert1("This item is already in your cart.");
                    }
                }

                if (found == 0) {
                    cartItems.push({ "id": this.getElementsByTagName("td")[0].innerHTML, "name": this.getElementsByTagName("td")[1].getElementsByTagName("u")[0].innerHTML, "status": status });
                }
                refreshCart();
            }
        }
        issueHistory.forEach(dataRow => {
            document.getElementById("history-table").getElementsByTagName("tbody")[0].appendChild(createRowForIssueHistoryTable(dataRow));
        })
        //rows = document.getElementsByTagName("tbody")[0].getElementsByTagName("tr");

        try {
            repairHistory = await cc.getRepairHistory(workshop_id);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please try again.");
            console.log("Error in getRepairHistory ! Please try again.");
        }


        var penRH = 0;
        repairHistory.forEach(dataRow => {
            document.getElementById("repair-history-table").getElementsByTagName("tbody")[0].appendChild(createRowForRepairHistoryTable(dataRow));
            if (!dataRow["Resolve Datetime"]) {
                penRH++;
            }
        })
        if (penRH != 0) {
            console.log(penRH);
            document.getElementById("isPendingRepairHistory").innerHTML = penRH;
            document.getElementById("isPendingRepairHistory").hidden = false;
            document.getElementById("pending-reports").innerHTML = penRH;
            document.getElementById("isPendingRecords").innerHTML = '';
            document.getElementById("isPendingRecords").hidden = false;
        }
        else {
            document.getElementById("isPendingRepairHistory").hidden = true;
            document.getElementById("isPendingRecords").hidden = true;
        }
        document.getElementById("under-maintenance-table").getElementsByTagName("tbody")[0].innerHTML = "";
        repairHistory.forEach(dataRow => {
          if(dataRow["Cause"].indexOf("maintenance") > -1 && !dataRow["Resolve Datetime"])
            document.getElementById("under-maintenance-table").getElementsByTagName("tbody")[0].appendChild(createRowForUnderMaintenance(dataRow));

        })

        try {
            var request = await cc.getIssueRequests(workshop_id);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please n.");
            console.log("Error in getIssueRequests ! Please try again.");
        }

        document.getElementById("request-table").getElementsByTagName("tbody")[0].innerHTML = '';
        var penReq = 0;
        request.forEach(dataRow => {
            document.getElementById("request-table").getElementsByTagName("tbody")[0].appendChild(createRowForRequestTable(dataRow));
            if (!dataRow["Resolve Datetime"]) {
                penReq++;
            }
        });
        

        loadSignUpRequests();
        loadCurrencies();
        loadRequisitionSlips();

        try {
            var surrenderRequests = await cc.getSurrenderRequests(workshop_id);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please n.");
            console.log("Error in getSurrenderRequests ! Please try again.");
        }
        var surReq = 0;
        document.getElementById("surrender-request-table").getElementsByTagName("tbody")[0].innerHTML = '';
        surrenderRequests.forEach(dataRow => {
            document.getElementById("surrender-request-table").getElementsByTagName("tbody")[0].appendChild(createRowForSurrenderRequestTable(dataRow));
            if (!dataRow["Resolve Datetime"]) {
                surReq++;
            }
        })
        if ((penReq + surReq) != 0) {
            document.getElementById("isPendingRequest").innerHTML = penReq + surReq;
            document.getElementById("isPendingRequest").hidden = false;
            document.getElementById("isPendingGeneral").innerHTML = '';
            document.getElementById("isPendingGeneral").hidden = false;
        }
        else {
            document.getElementById("isPendingRequest").hidden = true;
            document.getElementById("isPendingGeneral").hidden = true;
        }
        document.getElementById("loader").hidden = "true";
        document.getElementById("cost").hidden = "true";
        // document.getElementById("cost-text").hidden = "true";
        document.getElementById("cost-field").hidden = "true";
        var x = moment();
        m = x.format("MM");
        y = x.format("YYYY");
        document.getElementById("month").value = m;
        document.getElementById("year").value = y;
        // if(currentDiv)
        // {            
        //     showNoDivs();
        //     document.getElementById(currentDiv).style.display = "block";
        // }
    }
    
    function loadAnalytics() {

      var elements = document.getElementsByClassName('item-header-small');
      for (var i = 0; i < elements.length; i++) {
          if (isElementOverflowing(elements[i])) {
              wrapContentsInMarquee(elements[i]);
          }
      }


      loadResolutionChart();
      loadReportsResolutionChart();
      loadEquipmentMaintenanceCostChart();
      loadToolsMaintenanceCostChart();
      loadReportsChart();
      loadTop5MostIssued();
      loadHighestMaintenanceEquipmentChart(); //Remaining
      loadMostReportedSpecialToolsChart(); //Remaining
      loadMostReportedHandToolsChart(); //Remaining
      // loadCumulativeReportTimelineToolsChart(); //Remaining
      // loadCumulativeReportTimelineEquipmentChart(); //Remaining
    }
    async function loadTop5MostIssued() {
        var top5issued = await cc.gettop5issuedtools(workshop_id);
        console.log(top5issued);
        
        if(top5issued.length > 0) {
        var data = google.visualization.arrayToDataTable([
            ['Tool Code', 'Count', { role: 'style' },  { role: 'annotation' }],
            [top5issued[0]["Tool Code"], top5issued[0]["NumberOfIssues"], 'gold', top5issued[0]["Tool Code"] + " (" + top5issued[0]["Tool Name"] + ")"],
            [top5issued[1]["Tool Code"], top5issued[1]["NumberOfIssues"], 'gold', top5issued[1]["Tool Code"] + " (" + top5issued[1]["Tool Name"] + ")"],
            [top5issued[2]["Tool Code"], top5issued[2]["NumberOfIssues"], 'gold', top5issued[2]["Tool Code"] + " (" + top5issued[2]["Tool Name"] + ")"],
            [top5issued[3]["Tool Code"], top5issued[3]["NumberOfIssues"], 'gold', top5issued[3]["Tool Code"] + " (" + top5issued[3]["Tool Name"] + ")"],
            [top5issued[4]["Tool Code"], top5issued[4]["NumberOfIssues"], 'gold', top5issued[4]["Tool Code"] + " (" + top5issued[4]["Tool Name"] + ")"]
        ]);
        }
        else
            top5issued = null;
        var options = {
            chartArea: { top: '5%', left: '7%', right: '1%', bottom: '10%' },
            orientation: 'vertical',
            legend: { position: 'none', maxLines: 2, textStyle: { fontSize: 8 }, alignment: 'start' },
            // colors: ['green', 'yellow', 'red', 'purple'],
            backgroundColor : 'black',
            vAxis: {
                minValue: 0
            },
            hAxis: {
              textStyle: { color : 'white' }
            }
        };
        var chart = new google.visualization.BarChart(document.getElementById('top-5-most-issued-tile'));
        chart.draw(data, options);
    }
    
    async function loadHighestMaintenanceEquipmentChart() {
        var getTopMaintenanceEquipment = await cc.getTopMaintenanceEquipment(workshop_id);
        for(i=getTopMaintenanceEquipment.length; i<5;i++)
        {
            getTopMaintenanceEquipment.push({"Tool Code":"NA","Tool Name":"NA", "Maintenance Cost": 0});
        }
        // console.log(getTopMaintenanceEquipment);
        var data = google.visualization.arrayToDataTable([
            ['Tool Code', 'Cost', { role: 'style' },  { role: 'annotation' }],
            [getTopMaintenanceEquipment[0]["Tool Code"], getTopMaintenanceEquipment[0]["Maintenance Cost"], 'gold', getTopMaintenanceEquipment[0]["Tool Code"] + " (" + getTopMaintenanceEquipment[0]["Tool Name"] + ")"],
            [getTopMaintenanceEquipment[1]["Tool Code"], getTopMaintenanceEquipment[1]["Maintenance Cost"], 'gold', getTopMaintenanceEquipment[1]["Tool Code"] + " (" + getTopMaintenanceEquipment[1]["Tool Name"] + ")"],
            [getTopMaintenanceEquipment[2]["Tool Code"], getTopMaintenanceEquipment[2]["Maintenance Cost"], 'gold', getTopMaintenanceEquipment[2]["Tool Code"] + " (" + getTopMaintenanceEquipment[2]["Tool Name"] + ")"],
            [getTopMaintenanceEquipment[3]["Tool Code"], getTopMaintenanceEquipment[3]["Maintenance Cost"], 'gold', getTopMaintenanceEquipment[3]["Tool Code"] + " (" + getTopMaintenanceEquipment[3]["Tool Name"] + ")"],
            [getTopMaintenanceEquipment[4]["Tool Code"], getTopMaintenanceEquipment[4]["Maintenance Cost"], 'gold', getTopMaintenanceEquipment[4]["Tool Code"] + " (" + getTopMaintenanceEquipment[4]["Tool Name"] + ")"]

        ]);

        var options = {
            annotations: {
                alwaysOutside: true,
                textStyle: {
                    fontSize: 9,
                    auraColor: 'none',
                    color: '#555'
                },
                boxStyle: {
                    stroke: '#ccc',
                    strokeWidth: 1,
                    gradient: {
                        color1: '#f3e5f5',
                        color2: '#f3e5f5',
                        x1: '0%', y1: '0%',
                        x2: '100%', y2: '100%'
                    }
                }
            },
            chartArea: { top: '10%', left: '11%', right: '1%', bottom: '10%' },
            orientation: 'vertical',
            legend: { position: 'none', maxLines: 2, textStyle: { fontSize: 8 }, alignment: 'start' },
            // colors: ['green', 'yellow', 'red', 'purple'],
            backgroundColor : 'black',
            vAxis: {
                minValue: 0
            },
            hAxis: {
              textStyle: { color : 'white' }
            }
        };
        var chart = new google.visualization.BarChart(document.getElementById('highest-maintenance-equipment-tile'));
        chart.draw(data, options);
    }
    async function loadMostReportedSpecialToolsChart() {
        var topReportedSpecialTools = await cc.getTopReportedSpecialTools(workshop_id);
        for(i=topReportedSpecialTools.length; i<5;i++)
        {
            topReportedSpecialTools.push({"Tool Code":"NA","Tool Name":"NA", "Number": 0});
        }
        // console.log(topReportedSpecialTools);
        var data = google.visualization.arrayToDataTable([
            ['Tool Code', 'Count'],
            [topReportedSpecialTools[0]["Tool Code"], topReportedSpecialTools[0]["Number"]],
            [topReportedSpecialTools[1]["Tool Code"], topReportedSpecialTools[1]["Number"]],
            [topReportedSpecialTools[2]["Tool Code"], topReportedSpecialTools[2]["Number"]],
            [topReportedSpecialTools[3]["Tool Code"], topReportedSpecialTools[3]["Number"]],
            [topReportedSpecialTools[4]["Tool Code"], topReportedSpecialTools[4]["Number"]]

        ]);

        var options = {
            chartArea: { top: '5%', left: '10%', right: '1%', bottom: '10%' },
            orientation: 'horizontal',
            legend: { position: 'none', maxLines: 2, textStyle: { fontSize: 8 }, alignment: 'start' },
            // colors: ['green', 'yellow', 'red', 'purple'],
            backgroundColor : 'black',
            vAxis: {
                minValue: 0
            },
            hAxis: {
              textStyle: { color : 'white' }
            }
        };
        var chart = new google.visualization.BarChart(document.getElementById('most-reported-special-tools-tile'));
        chart.draw(data, options);
    }

    async function loadMostReportedHandToolsChart() {
        var topReportedHandTools = await cc.getTopReportedHandTools(workshop_id);
        for(i=topReportedHandTools.length; i<5;i++)
        {
            topReportedHandTools.push({"Tool Code":"NA","Tool Name":"NA", "Number": 0});
        }
        // console.log(topReportedHandTools);
        var data = google.visualization.arrayToDataTable([
            ['Tool Code', 'Count'],
            [topReportedHandTools[0]["Tool Code"], topReportedHandTools[0]["Number"]],
            [topReportedHandTools[1]["Tool Code"], topReportedHandTools[1]["Number"]],
            [topReportedHandTools[2]["Tool Code"], topReportedHandTools[2]["Number"]],
            [topReportedHandTools[3]["Tool Code"], topReportedHandTools[3]["Number"]],
            [topReportedHandTools[4]["Tool Code"], topReportedHandTools[4]["Number"]]

        ]);

        var options = {
            chartArea: { top: '5%', left: '10%', right: '1%', bottom: '10%' },
            orientation: 'horizontal',
            legend: { position: 'none', maxLines: 2, textStyle: { fontSize: 8}, alignment: 'start' },
            // colors: ['green', 'yellow', 'red', 'purple'],
            backgroundColor : 'black',
            vAxis: {
                minValue: 0, 
                textStyle: { color: 'red' } 
            },
            hAxis: { 
              textStyle: { color: 'white' } 
            }
        };
        var chart = new google.visualization.BarChart(document.getElementById('most-reported-hand-tools-tile'));
        chart.draw(data, options);
    }
    async function loadReportsChart() {
        var handtoolreportsdata = await cc.gethandtoolreportsdata(workshop_id);
        var spltoolreportsdata = await cc.getspltoolreportsdata(workshop_id);
        var eqpreportsdata = await cc.geteqpreportsdata(workshop_id);
        var reportsdata = await cc.getreportsdata(workshop_id);
        var mcount = 0;
        if(!eqpreportsdata)
            eqpreportsdata.push({'Cause': "NA", 'Number' : 0});
        if(!spltoolreportsdata)
            spltoolreportsdata.push({'Cause': "NA", 'Number' : 0});
        if(!handtoolreportsdata)
            handtoolreportsdata.push({'Cause': "NA", 'Number' : 0});
        if(!reportsdata)
            reportsdata.push({'Cause': "NA", 'Number' : 0});
        for(i=0; i<eqpreportsdata.length;i++)
        {
            if(eqpreportsdata[i]["Cause"].includes('aintenance'))
                continue;
            else    
                mcount++;
        }
        if(mcount==0)
            eqpreportsdata.length = 0;

        for (i = 0; i < handtoolreportsdata.length; i++) {
            if (handtoolreportsdata[i]["Cause"] == "Missing")
                handmiss = handtoolreportsdata[i]["Number"];
            else if (handtoolreportsdata[i]["Cause"] == "damaged" || handtoolreportsdata[i]["Cause"] == "damaged")
                handdam = handtoolreportsdata[i]["Number"];
            else if (handtoolreportsdata[i]["Cause"] == "damaged but functional")
                handdbf = handtoolreportsdata[i]["Number"];
        }
        for (i = 0; i < spltoolreportsdata.length; i++) {
            if (spltoolreportsdata[i]["Cause"] == "Missing")
                splmiss = spltoolreportsdata[i]["Number"];
            else if (spltoolreportsdata[i]["Cause"] == "damaged" || spltoolreportsdata[i]["Cause"] == "damaged")
                spldam = spltoolreportsdata[i]["Number"];
            else if (spltoolreportsdata[i]["Cause"] == "damaged but functional")
                spldbf = spltoolreportsdata[i]["Number"];
        }
        for (i = 0; i < eqpreportsdata.length; i++) {
            if (eqpreportsdata[i]["Cause"] == "Missing")
                eqpmiss = eqpreportsdata[i]["Number"];
            else if (eqpreportsdata[i]["Cause"] == "damaged" || eqpreportsdata[i]["Cause"] == "damaged")
                eqpdam = eqpreportsdata[i]["Number"];
            else if (eqpreportsdata[i]["Cause"] == "damaged but functional")
                eqpdbf = eqpreportsdata[i]["Number"];
        }
        for (i = 0; i < reportsdata.length; i++) {
            if (reportsdata[i]["Cause"] == "Missing")
                totalmiss = reportsdata[i]["Number"];
            else if (reportsdata[i]["Cause"] == "damaged" || reportsdata[i]["Cause"] == "damaged")
                totaldam = reportsdata[i]["Number"];
            else if (reportsdata[i]["Cause"] == "damaged but functional")
                totaldbf = reportsdata[i]["Number"];
        }
        var data = google.visualization.arrayToDataTable([
            ['Type', 'Missing', 'Damage', 'Partial Damage'],
            ['Hand Tools', handmiss, handdam, handdbf],
            ['Special Tools', splmiss, spldam, spldbf],
            ['Equipment', eqpmiss, eqpdam, eqpdbf],
            ['Total', totalmiss, totaldam, totaldbf]
        ]);

        var view = new google.visualization.DataView(data);
        view.setColumns([0, 1,
            {
                calc: "stringify",
                sourceColumn: 1,
                type: "string",
                role: "annotation"
            },

            2,
            {
                calc: "stringify",
                sourceColumn: 2,
                type: "string",
                role: "annotation"
            },
            3,
            {
                calc: "stringify",
                sourceColumn: 3,
                type: "string",
                role: "annotation"
            }
        ]);

        var options = {
            chartArea: { top: '5%', left: '7%', right: '1%', bottom: '15%' },
            orientation: 'horizontal',
            legend: { position: 'bottom', maxLines: 2, textStyle: { fontSize: 8 }, alignment: 'start' },
            // colors: ['green', 'yellow', 'red', 'purple'],
            backgroundColor : 'black',
            vAxis: {
                minValue: 0
            },
            hAxis: {
              textStyle: { color : 'white' }
            }
        };
        var chart = new google.visualization.BarChart(document.getElementById('reports-tile'));
        chart.draw(view, options);
    }
    async function loadToolsMaintenanceCostChart() {
        var x = moment();
        y = x.format("YYYY");
        var toolmaincost = [];
        for (ig = 1; ig < 13; ig++) {
            if (ig < 10)
                var start = y + "-0" + ig + '-01';
            else
                var start = y + "-" + ig + '-01';
            k = ig + 1;
            if (k > 12) {
                k = 1;
                y = parseInt(y);
                y = y + 1;
            }
            if (ig < 9)
                var end = y + "-0" + k + '-01';
            else
                var end = y + "-" + k + '-01';
            var tempcost = await cc.getFilteredToolMaintenanceCost(start, end, workshop_id);
            toolmaincost[ig] = parseInt(tempcost[0]["Number"]);
            // console.log(toolmaincost[i] + " " + end + " " + tempcost[0]["Number"]);
        }
        var data = google.visualization.arrayToDataTable([
            ['Month', 'Cost'],
            ['January', toolmaincost[1]],
            ['February', toolmaincost[2]],
            ['March', toolmaincost[3]],
            ['April', toolmaincost[4]],
            ['May', toolmaincost[5]],
            ['June', toolmaincost[6]],
            ['July', toolmaincost[7]],
            ['August', toolmaincost[8]],
            ['September', toolmaincost[9]],
            ['October', toolmaincost[10]],
            ['November', toolmaincost[11]],
            ['December', toolmaincost[12]]
        ]);

        var options = {
            chartArea: { top: '5%', right: 0, bottom: '15%', left: '15%' },
            legend: { position: 'none' },
            hAxis: {
                title: 'Cost ₹ (in INR)',
                minValue: 0,
                textStyle: { color : 'white' }
            },
            backgroundColor : 'black',
        };

        var chart = new google.visualization.BarChart(document.getElementById('tools-maintenance-cost-tile'));

        chart.draw(data, options);
    }
    async function loadEquipmentMaintenanceCostChart() {
        var x = moment();
        y = x.format("YYYY");
        var eqpmaincost = [];
        for (ig = 1; ig < 13; ig++) {
            if (ig < 10)
                var start = y + "-0" + ig + '-01';
            else
                var start = y + "-" + ig + '-01';
            k = ig + 1;
            if (k > 12) {
                k = 1;
                y = parseInt(y);
                y = y + 1;
            }
            if (ig < 9)
                var end = y + "-0" + k + '-01';
            else
                var end = y + "-" + k + '-01';
            var tempcost = await cc.getFilteredEqpMaintenanceCost(start, end, workshop_id);
            eqpmaincost[ig] = parseInt(tempcost[0]["Number"]);
        }
        // console.log(eqpmaincost);
        var data = google.visualization.arrayToDataTable([
            ['Month', 'Cost'],
            ['January', eqpmaincost[1]],
            ['February', eqpmaincost[2]],
            ['March', eqpmaincost[3]],
            ['April', eqpmaincost[4]],
            ['May', eqpmaincost[5]],
            ['June', eqpmaincost[6]],
            ['July', eqpmaincost[7]],
            ['August', eqpmaincost[8]],
            ['September', eqpmaincost[9]],
            ['October', eqpmaincost[10]],
            ['November', eqpmaincost[11]],
            ['December', eqpmaincost[12]]
        ]);

        var options = {
            chartArea: { top: '5%', right: 0, bottom: '15%', left: '15%' },
            legend: { position: 'none' },
            hAxis: {
                title: 'Cost ₹ (in INR)',
                minValue: 0,
                textStyle: { color : 'white' }
            },
            backgroundColor : 'black',
        };

        var chart = new google.visualization.BarChart(document.getElementById('equipment-maintenance-cost-tile'));

        chart.draw(data, options);
    }
    async function loadReportsResolutionChart() {
        noOfReports = await cc.getNoOfReports(workshop_id);
        pendingReports = await cc.getNoOfPendingReports(workshop_id);
        var data = google.visualization.arrayToDataTable([
            ['Action', 'Number'],
            ['Pending', (pendingReports[0]["count(*)"] * 100 / noOfReports[0]["totalreports"])],
            ['Resolved', (100 - (pendingReports[0]["count(*)"] * 100 / noOfReports[0]["totalreports"]))],

        ]);

        var options = {
            legend: { position: 'bottom', maxLines: 2, textStyle: { fontSize: 8 } },
            titleTextStyle: {
                fontSize: 13
            },
            backgroundColor : 'black',
            chartArea: { bottom: '15%', left: 0, right: 0, top: '1%' }
        };

        var chart = new google.visualization.PieChart(document.getElementById('reports-resolution-tile'));
        chart.draw(data, options);
    }
    async function loadResolutionChart() {
        var responsetype = await cc.getResponseTypeData(workshop_id);
        console.log(responsetype);
        var replaced=0 , found=0, discarded=0, falsereport=0, repaired= 0;
        for (i = 0; i < responsetype.length; i++) {
            // console.log(responsetype[i]["Action"]);
            // if(responsetype[i]["Action"])
            // {   var repair = responsetype[i]["Action"].includes('repaired');
            //     if(repair == true)
            //     {    repaired += responsetype[i]["Number"];
            //         console.log(repaired);
            //     }
            // }
            if (responsetype[i]["Action"]  && responsetype[i]["Action"].includes('replaced'))
                replaced += responsetype[i]["Number"];
            else if (responsetype[i]["Action"] && responsetype[i]["Action"].includes('repaired'))
                repaired += responsetype[i]["Number"];
            else if (responsetype[i]["Action"] && responsetype[i]["Action"].includes('found'))
                found += responsetype[i]["Number"];
            else if (responsetype[i]["Action"] && responsetype[i]["Action"].includes('discarded'))
                discarded += responsetype[i]["Number"];
            else if (responsetype[i]["Action"]  && responsetype[i]["Action"].includes('false report'))
                falsereport += responsetype[i]["Number"];
        }
        var data = google.visualization.arrayToDataTable([
            ['Action', 'Number'],
            ['Replaced', replaced],
            ['Found', found],
            ['Repaired', repaired],
            ['Discarded', discarded],
            ['False Report', falsereport]
        ]);

        var options = {
            legend: { position: 'bottom', maxLines: 2, textStyle: { fontSize: 8 } },
            titleTextStyle: {
                fontSize: 13
            },
            backgroundColor : 'black',
            chartArea: { bottom: '15%', left: 0, right: 0, top: '1%' }
        };

        var chart = new google.visualization.PieChart(document.getElementById('resolution-tile'));
        chart.draw(data, options);
    }
    

    function refreshCart() {

      actualItems = document.getElementById("actual-items");
      hiddenMessageDiv = document.getElementById("nothing-to-show");
      divincludingbuttons = document.getElementById("div-including-buttons");

      if (cartItems.length == 0) {
          divincludingbuttons.hidden = true;
          hiddenMessageDiv.removeAttribute("hidden");

          actualItems.innerHTML = "";

      }
      else {

          hiddenMessageDiv.hidden = true;
          divincludingbuttons.removeAttribute("hidden");
          actualItems.innerHTML = "";
          cartItems.forEach(item => {
              newitem = document.createElement("li");
              newitem.style.border = "solid black 1px";
              newitem.appendChild(createLI(item.name, item.quantity));
              newitem.id = item.id;

              actualItems.appendChild(newitem);
          });


      }
  }
  function createLI(name, qty) {
        final = document.createElement("li");
        final.className = "list-group-item assigned-item";
        final.innerHTML = name;
        console.log(final.innerHTML);
        // final.style.width = "95%";
        // toolnamediv = document.createElement("div");
        // toolnamediv.className = "column is-11";
        // toolnamediv.innerHTML = name;
        closeButton = document.createElement("button");
        closeButton.className = "btn-close btn-close-white";
        // closeButton = document.getElementById("index_0");
        console.log(closeButton);
        assignIndex += 1;
        // closeButton.style.marginLeft = "-1vw";
        // closeButton.className = "fas fa-times";
        closeButton.onclick = function (event) {
            id_tbd = event.target.parentElement.parentElement.id;
            console.log(id_tbd);
            for (var i = 0; i < cartItems.length; i++) {
                if (cartItems[i].id == id_tbd) {
                    cartItems.splice(i, 1);
                    break;
                }
            }
            refreshCart();
        }
        // closeButtonDiv.appendChild(closeButton);
        // final.innerHTML = name + closeButton;

        // final.appendChild(toolnamediv);
        // // final.appendChild(toolqtydiv);
        final.appendChild(closeButton);
        return final;

    }
    

    function createRowForAssignToolsTable(dataRow) {
        tableRow = document.createElement("tr");
        toolcodeColumn = document.createElement("td");
        toolcodeColumn.innerHTML = dataRow["Tool Code"];
        toolnameColumn = document.createElement("td");
        toolnameColumnUnderlined = document.createElement("u");
        toolnameColumnUnderlined.innerHTML = dataRow["Tool Name"];
        toolnamespan = document.createElement("span");
        toolnamespan.className = "icon is-small is-right right-icon";
        toolnameibutton = document.createElement("i");
        toolnameibutton.className = "fas fa-info-circle";
        toolnameibutton.onclick = function (event) {
            event.stopPropagation();
            document.getElementById("inventory-modal-toolname").innerHTML = dataRow["Tool Name"];
            document.getElementById("inventory-modal-toolspec").innerHTML = dataRow["Specification"];
            document.getElementById("inventory-modal-tooldescription").innerHTML = dataRow["Description"];
            document.getElementById("inventory-modal-image").src = dataRow["Photo"];
            document.getElementById("inventory-modal-tooldolm").innerHTML = "Date of Purchase: " + (new Date(dataRow["Date of Purchase"])).toDateString();
            if (dataRow["Value"] != null) {
                document.getElementById("inventory-modal-toolvalue").innerHTML = "Value: " + defaultCurrency["Default Currency Symbol"] + dataRow["Value"];
            } else {
                document.getElementById("inventory-modal-toolvalue").innerHTML = "Value: Not Defined";
            }
            document.getElementById("inventory-modal-toolbrand").innerHTML = "Brand: " + dataRow["Brand"];
            document.getElementById("inventory-modal-toollocation").innerHTML = "Location: " + dataRow["Location"];
            var storage = firebase.storage();
            document.getElementById("inventory-modal-toolattachment").innerHTML = "Tool Inspection Sheet: <b>Not Found</b>";
            var pathReferencePDF = storage.ref(dataRow["Tool Code"] + '.pdf');
            pathReferencePDF.getDownloadURL().then(function (url) {
                document.getElementById("inventory-modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
                a = document.createElement("a");
                a.href = url;
                a.innerHTML = "DOWNLOAD";
                document.getElementById("inventory-modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
            }).catch(function (error) {
                var pathReferenceDOC = storage.ref(dataRow["Tool Code"] + '.doc');
                pathReferenceDOC.getDownloadURL().then(function (url) {
                    document.getElementById("inventory-modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
                    a = document.createElement("a");
                    a.href = url;
                    a.innerHTML = "DOWNLOAD";
                    document.getElementById("inventory-modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
                }).catch(function (error) {
                    var pathReferenceDOCX = storage.ref(dataRow["Tool Code"] + '.docx');
                    pathReferenceDOCX.getDownloadURL().then(function (url) {
                        document.getElementById("inventory-modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
                        a = document.createElement("a");
                        a.href = url;
                        a.innerHTML = "DOWNLOAD";
                        document.getElementById("inventory-modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
                    }).catch(function (error) {
                        console.log("Tool Inspection Sheet Not Found!");
                    });
                });
            });


            if (dataRow["Maintenance"] != 0) {
                document.getElementById("inventory-modal-toolamc").innerHTML = "Maintenance Company: " + dataRow["AMC"];
                document.getElementById("inventory-modal-toolamcprovider").innerHTML = "Service Provider: " + dataRow["AMC Provider"];
                document.getElementById("inventory-modal-toolamccontact").innerHTML = "Maintenance Contact: " + dataRow["AMC Contact"];
                var mpsd = moment(new Date(dataRow["AMC Period Startdate"]));
                mpsd = mpsd.format("YYYY-MM-DD");
                var mped = moment(new Date(dataRow["AMC Period Enddate"]));
                mped = mped.format("YYYY-MM-DD");
                document.getElementById("inventory-modal-toolamcperiodsd").innerHTML = "Maintenance Period Startdate: " + mpsd;
                document.getElementById("inventory-modal-toolamcperioded").innerHTML = "Maintenance Period Enddate: " + mped;
                document.getElementById("inventory-modal-tooldop").innerHTML = "Date of Purchase: " + (new Date(dataRow["Date of Purchase"])).toDateString();
                document.getElementById("inventory-modal-toolfrequencyofinspection").innerHTML = "Inspection Frequency: " + dataRow["Inspection Frequency"] + " Days";
            }
            else {
                document.getElementById("inventory-modal-toolamc").innerHTML = "";
                document.getElementById("inventory-modal-toolamcprovider").innerHTML = "";
                document.getElementById("inventory-modal-toolamccontact").innerHTML = "";
                document.getElementById("inventory-modal-toolamcperiodsd").innerHTML = "";
                document.getElementById("inventory-modal-toolamcperioded").innerHTML = "";
                document.getElementById("inventory-modal-toolfrequencyofinspection").innerHTML = "";
            }
            document.getElementById("modal-addtocart-button").onclick = function () {
                id = dataRow["Tool Code"];
                //   found = 0;
                //   for(var j=0; j<cartItems.length;j++){
                //     if(cartItems[j].id === id){
                //       found = 1;
                //       cartItems[j].quantity = Math.min(cartItems[j].quantity+ 1, Number(dataRow["Quantity"]));
                //     }
                //   }

                // if(found == 0){
                //   cartItems.push({"id": dataRow["Tool Code"], "name": dataRow["Tool Name"], "quantity": 1});
                // }
                // refreshCart();

                found = 0;
                for (var j = 0; j < cartItems.length; j++) {
                    if (cartItems[j].id === id) {
                        found = 1;
                        closeModal();
                        alert1("This item is already in your cart.");
                    }
                }

                if (found == 0) {
                    cartItems.push({ "id": dataRow["Tool Code"], "name": dataRow["Tool Name"] });
                }
                refreshCart();


            }
            document.getElementById("inventory-modal").className = "modal is-active";
        }

        toolnamespan.appendChild(toolnameibutton);

        toolnameColumn.appendChild(toolnameColumnUnderlined);
        toolnameColumn.appendChild(toolnamespan);
        // qtyColumn = document.createElement("td");
        // qtyColumn.innerHTML=dataRow["Quantity"];
        statusColumn = document.createElement("td");
        statusspan = document.createElement("span");
        statusspan.className = "icon is-small is-right right-icon";
        statusicon = document.createElement("i");
        if (dataRow["Allocated To"] != null) {
            return;
            statusColumn.innerHTML = "Issued";
            statusicon.className = "fas fa-id-card-alt";
            statusicon.style.color = "blue";

            statusicon.onclick = async function (event) {
                console.log("issue button pressed");
                event.stopPropagation();
                try {
                    var userDetails = await cc.getUserDetailsFromEmpID(dataRow["Allocated To"]);
                    cc.closeConnection();
                }
                catch {
                    alert1("Error in fetching details! Please try again.");
                    console.log("Error in getUserDetailsFromEmpID() ! Please try again.");
                }
                document.getElementById("issued-to-modal-content").innerHTML = "This tool is currently with " + userDetails[0]["First Name"] + " " + userDetails[0]["Last Name"] + ".";
                document.getElementById("issued-to-modal").className = "modal is-active";
                document.getElementById("issued-to-modal-close").onclick = function () {
                    document.getElementById("issued-to-modal").className = "modal";
                    var fname = dataRow["First Name"];
                    var lname = dataRow["Last Name"];

                }
            }

        }
        else if (dataRow["Status"] == "0") {
            statusColumn.innerHTML = "Available";
            statusicon.className = "fas fa-check-circle";
            statusicon.style.color = "green";
        }
        else if (dataRow["Status"] == "2") {
            statusColumn.innerHTML = "Partially Damaged";
            statusicon.className = "fas fa-exclamation-triangle";
            statusicon.style.color = "#c2a90f";

            statusicon.onclick = async function (event) {
                console.log("reported button pressed");
                event.stopPropagation();
                isKitItems = await cc.getChildParts(dataRow["Tool Code"], workshop_id);
                console.log(isKitItems);
                if (isKitItems.length == 0) {
                    isKit = 0;
                }
                else {
                    isKit = 1;
                }

                if (isKit == 1) {
                    alertMessage = "This Kit has been reported.The following are the kit items and their conditions.\n";
                    isKitItems.forEach(item => {
                        if (item["Status"] == "0") {
                            alertMessage = alertMessage + " " + item["Tool Name"] + " : " + "Available \n";
                        }
                        else if (item["Status"] == "3") {
                            alertMessage = alertMessage + " " + item["Tool Name"] + " : " + "Damaged \n";
                        }
                        else if (item["Status"] == "4") {
                            alertMessage = alertMessage + " " + item["Tool Name"] + " : " + "Missing \n";
                        }
                        else if (item["Status"] == "2") {
                            alertMessage = alertMessage + " " + item["Tool Name"] + " : " + "Damaged (functional) \n";
                        }
                    })
                    document.getElementById("issued-to-modal-content").innerText = alertMessage;
                    document.getElementById("issued-to-modal").className = "modal is-active";
                    document.getElementById("issued-to-modal-close").onclick = function () {
                        document.getElementById("issued-to-modal").className = "modal";
                    }
                }
            }





        }
        else if (dataRow["Status"] == "3") {
            statusColumn.innerHTML = "NA (Damaged)";
            statusicon.className = "fas fa-times-circle";
            statusicon.style.color = "red";
        }
        else if (dataRow["Status"] == "4") {
            statusColumn.innerHTML = "NA (Missing)";
            statusicon.className = "fas fa-times-circle";
            statusicon.style.color = "#c2a90f";
        }
        else if (dataRow["Status"] == "5") {
            statusColumn.innerHTML = "Missing (Functional)";
            statusicon.className = "fas fa--exclamation-triangle";
            statusicon.style.color = "#c2a90f";
        }
        else if (dataRow["Status"] == "6") {
            statusColumn.innerHTML = "Under Maintenance";
            statusicon.className = "fas fa--exclamation-triangle";
            statusicon.style.color = "#c2a90f";
        }

        statusspan.appendChild(statusicon);

        statusColumn.appendChild(statusspan);


        recordColumn = document.createElement("td"); recordColumn.className = "record-th";
        recordButton = document.createElement("i");
        recordButton.className = "fa fa-eye";
        recordButton.title = "View";
        recordButton.onclick = async function (event) {
            event.stopPropagation();
            document.getElementById("loader").hidden = false;
            document.getElementById("no-record-div").innerHTML = "";
            document.getElementById("record-table").hidden = false;
            document.getElementById("record-tbody").innerHTML = "";
            console.log(dataRow["Tool Code"]);
            document.getElementById("repair-record-heading").innerHTML = dataRow["Tool Name"] + " (" + dataRow["Tool Code"] + ")";
            // document.getElementById("record-modal-content").innerHTML = '<div style="background-color: white;width: 20vw;margin-left: 30%;margin-bottom: 3vh;border-radius: 1vw;"><center> All Records </center></div>';
            try {
                records = await cc.getAllRecordsForAToolID(dataRow["Tool Code"], workshop_id);
                cc.closeConnection();
            }
            catch {
                alert1("Error in fetching your details! Please try again.");
                console.log("Error in getAllRecordsForAToolID ! Please try again.");
            }
            if (records.length == 0) {
                document.getElementById("no-record-div").innerHTML = '<div class="card record pending" style="verical-align: middle; line-height: 150px;"><center> No Records Found</center></div>';
                document.getElementById("record-table").hidden = true;
            }


            records.forEach(dataRow => {
                document.getElementById("record-table").getElementsByTagName("tbody")[0].appendChild(createRowForRecordTable(dataRow));
            });


            document.getElementById("loader").hidden = true;
            document.getElementById("record-modal").className = "modal is-active";
        }
        recordColumn.appendChild(recordButton);

        tableRow.appendChild(toolcodeColumn);
        tableRow.appendChild(toolnameColumn);
        tableRow.appendChild(statusColumn);
        tableRow.appendChild(recordColumn);

        return tableRow;
    }
  async function assignButtonPressed() {

    if (!assignToolsSelectedTechnician) {
        alert1("Please select a technician.");
        return;
    }
    dialogBoxMessage = '';
    cartItems.forEach(item => {
        dialogBoxMessage = dialogBoxMessage + item.name + " : " + item.status + "\n";
    });


    try {
        var user = await cc.getUserDetailsFromEmpID(assignToolsSelectedTechnician);
        cc.closeConnection();
    }
    catch {
        alert1("Error in fetching your details! Please chech your internet connection.");
        console.log("Error in getUserDetailsFromEmpID! Please try again.");
        return;
    }
    dialogBoxMessage = dialogBoxMessage + "To " + user[0]["First Name"] + ' ' + user[0]["Last Name"] + " ( " + user[0]["Emp ID"] + " )";
    let options = {
        defaultId: 0,
        cancelId: 0,
        type: "question",
        title: "Please Confirm",
        buttons: ["No", "Yes"],
        message: "Are you sure you want to assign the following items? \n" + dialogBoxMessage
    };
    let responseObject = await dialog.showMessageBox(BrowserWindow.getFocusedWindow(), options);
    var moment = require('moment-timezone');
    var x = moment();
    x = x.format("YYYY-MM-DD HH:mm:ss").toString();
    // y = moment();
    // y.set("hours", 19);
    // y.set("minutes", 0);
    // y.set("seconds", 0);
    // y = y.format("YYYY-MM-DD HH:mm:ss").toString();

    var fname = user[0]["First Name"];
    var lname = user[0]["Last Name"];

    if (responseObject.response === 1) {
        // result = 1;
        try {
            var result = await cc.assignTools(cartItems, user[0]["Emp ID"], x, fname, lname, workshop_id);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please chech your internet connection.");
            console.log("Error in assignTools! Please try again.");
        }
        if (result === 1) {
            cartItems = [];
            refreshCart();
            alert1("Your assign order has been successfully processed.");
            assignToolsSelectedTechnician = undefined;
            document.getElementById("assignTools-selected-name").innerHTML = "";
            document.getElementById("tools-table").innerHTML = "";
            document.getElementById('assignToolsDivToolSearch').value = '';
            document.getElementById('assignToolsDivTechnicianSearch').value = '';
            initiateSetup();
        }
    }
  }

 
    function createRowForNotificationsTable(dataRow) {

      tableRow = document.createElement("tr");

      eventColumn = document.createElement("td");
      eventColumn.innerHTML = dataRow["First Name"] + " " + dataRow["Last Name"] + " has  " + dataRow["Operation"] + " " + dataRow["Tool Name"];
      timeColumn = document.createElement("td");
      timeColumn.innerHTML = returnTimeInFormat(moment(new Date(dataRow["Timestamp"])));
      viewColumn = document.createElement("td");
      //console.log(dataRow["Status"]);
      // if(dataRow["Status"] == 0)
      // {
      viewButton = document.createElement("i");
      viewButton.className = "btn mgr-notificcation-btn";
      viewButton.innerHTML = "<i class='fas fa-external-link-alt'><span class='btnref'> View</span></i>"
      viewButton.title = "View";
      // <button type="button" class="btn mgr-notificcation-btn"><i class="fas fa-trash"><span class="btnref"> Clear</span></i></button>              
      // <button type="button" class="btn mgr-notificcation-btn"><i class="fas fa-external-link-alt"><span class="btnref"> View</span></i></button>
              
      viewButton.onclick = function (event) {
          // showNoDivs();
          if (dataRow["Operation"] == "issued") { document.getElementById("issueHistoryDiv").style.display = "block"; }
          else if (dataRow["Operation"] == "reported") { document.getElementById("repairHistoryDiv").style.display = "block"; }
          else if (dataRow["Operation"] == "found a damaged tool: ") { document.getElementById("repairHistoryDiv").style.display = "block"; }
          else if (dataRow["Operation"] == "found a damaged but functional tool: ") { document.getElementById("repairHistoryDiv").style.display = "block"; }
          else if (dataRow["Operation"] == "requested issue of") { document.getElementById("requestsDiv").style.display = "block"; }
          else {
              console.log(dataRow["Operation"] == "found a damaged but functional tool: ");
              console.log("abcd");
              document.getElementById("mainDiv").style.display = "block";
          }
      }
      ignoreColumn = document.createElement("td");
      ignoreButton = document.createElement("button");
      ignoreButton.className = "btn mgr-notificcation-btn";
      ignoreButton.innerHTML = "<i class='fas fa-trash'><span class='btnref'> Clear</span></i>";
      ignoreButton.title = "Ignore";
      ignoreButton.onclick = async function (event) {
          var notiTime = $(this).parents("tr")[0].cells[1].innerHTML;
          var nt = moment(new Date(notiTime));
          nt = nt.format("YYYY-MM-DD HH:mm:ss").toString();
          $(this).parents("tr")[0].style.display = "none";
          console.log(nt);
          try {
              var at = await cc.updateSeenNotification(nt, workshop_id);
              cc.closeConnection();
          }
          catch {
              console.log("Error in updateSeenNotification() ! Please try again.");
          }
          // document.getElementById("loader").removeAttribute("hidden");
          // initiateSetup();
          // document.getElementById("loader").hidden = "true";
      }
      viewColumn.appendChild(viewButton);
      ignoreColumn.appendChild(ignoreButton);
      tableRow.appendChild(eventColumn);
      tableRow.appendChild(timeColumn);
      tableRow.appendChild(viewColumn);
      tableRow.appendChild(ignoreColumn);
      return tableRow;
  }
    function createRowForUpdateEmployeeTable(dataRow) {
        tableRow = document.createElement("tr");
        empidColumn = document.createElement("td");
        empidColumn.innerHTML = dataRow["Emp ID"];
        firstnameColumn = document.createElement("td");
        firstnameColumn.innerHTML = dataRow["First Name"];
        lastnameColumn = document.createElement("td");
        lastnameColumn.innerHTML = dataRow["Last Name"];
        desgColumn = document.createElement("td");
        desgColumn.innerHTML = dataRow["Designation"];

        contactColumn = document.createElement("td");
        contactColumn.innerHTML = dataRow["Contact Number"];
        emailColumn = document.createElement("td");
        emailColumn.innerHTML = dataRow["Email"];
        companyColumn = document.createElement("td");
        companyColumn.innerHTML = workshopDetails[0]["Workshop Name"];
        actionsColumn = document.createElement("td");
        updateButton = document.createElement("i");
        updateButton.title = "Edit Profile";
        updateButton.className = "btn btn-grp btn-secondary infobtn";
        // updateButton.className = "fa fa-edit";
        updateButton.innerHTML = "<i class='fas fa-edit'></i><span class='btnref'>Edit</span>";
        updateButton.onclick = async function (event) {
            document.getElementById("update-employee-modal").className = "modal is-active";
            var updateempid = $(this).parents("tr")[0].cells[0].innerHTML;
            update_empid = updateempid;
            var userDetails = await cc.getUserDetailsFromEmpID(update_empid);
            document.getElementById("update-fname").value = userDetails[0]["First Name"];
            document.getElementById("update-lname").value = userDetails[0]["Last Name"];
            document.getElementById("update-company").value = workshopDetails[0]["Company Name"];

            document.getElementById("update-desg").value = userDetails[0]["Designation"];
            var dob = moment(new Date(userDetails[0]["DOB"]));
            dob = dob.format("YYYY-MM-DD").toString();
            console.log(dob);
            document.getElementById("update-dob").value = dob;
            document.getElementById("update-email").value = userDetails[0]["Email"];
            document.getElementById("update-id").value = userDetails[0]["Emp ID"];
            document.getElementById("update-contactno").value = userDetails[0]["Contact Number"];
        }
        actionsColumn.appendChild(updateButton);
        tableRow.appendChild(empidColumn);
        tableRow.appendChild(firstnameColumn);
        tableRow.appendChild(lastnameColumn);
        tableRow.appendChild(desgColumn);
        tableRow.appendChild(contactColumn);
        tableRow.appendChild(emailColumn);
        tableRow.appendChild(companyColumn);
        tableRow.appendChild(actionsColumn);
        return tableRow;
    }
    function createRowForModifyToolTable(dataRow) {
        tableRow = document.createElement("tr");
        toolnameColumn = document.createElement("td");
        toolnameColumn.innerHTML = dataRow["Tool Name"];
        // toolnamespan = document.createElement("span");
        // toolnamespan.className = "icon is-small is-right right-icon";

        informationbutton = document.createElement("button");
        informationbutton.innerHTML="<i class='fas fa-info-circle'></i><span class='btnref'> info<span>";
        informationbutton.className = "btn btn-grp btn-secondary infobtn";
        informationbutton.title = "View Profile";

        informationbutton.onclick = async function (event) {
          event.stopPropagation();
          document.getElementById("info-toolcode").innerHTML = dataRow["Tool Code"];
          document.getElementById("info-tool").innerHTML = dataRow["Tool Name"] + " (" + dataRow["Tool Code"] + ")";
          document.getElementById("info-toolname").innerHTML = dataRow["Tool Name"];
          if(dataRow["Brand"])
            document.getElementById("info-toolspec").innerHTML = dataRow["Brand"];
          document.getElementById("info-tooldescription").innerHTML = dataRow["Description"];
          if(!dataRow["Description"])
            document.getElementById("info-tooldescription").innerHTML = "";
          // document.getElementById("info-image").src = dataRow["Photo"];
          var dop = moment(new Date(dataRow["Date of Purchase"])).format("DD-MM-YYYY").toString();
          if(dop != '01-01-1970')
            document.getElementById("info-tooldop").innerHTML = dop;
          
          if (dataRow["Value"]) {
            document.getElementById("info-toolcost").innerHTML = defaultCurrency["Default Currency Symbol"] + dataRow["Value"];
          } else {
            document.getElementById("info-toolcost").innerHTML = "NA";
          }
          document.getElementById("info-toollocation").innerHTML = dataRow["Location"];
          if (dataRow["Permanent"] != 1) {
            document.getElementById("info-toollocation").hidden = false;
          }
          else {
            document.getElementById("info-toollocation").hidden = true;
          }
          if (dataRow["Permanent"] == 5 || dataRow["Permanent"] == 6) {
            document.getElementById("info-toolquantity").innerHTML = dataRow["Quantity"];
            document.getElementById("info-tooltype").innerHTML = "Material";
          }
          else if(dataRow["Permanent"] == 0)
          document.getElementById("info-tooltype").innerHTML = "Special Tool";
          else if(dataRow["Permanent"] == 1)
          document.getElementById("info-tooltype").innerHTML = "Hand Tool";
          else if(dataRow["Permanent"] == 4)
          document.getElementById("info-tooltype").innerHTML = "Asset";
          else if(dataRow["Permanent"] == 2 || dataRow["Permanent"] == 3)
          document.getElementById("info-tooltype").innerHTML = "Equipment";
          // document.getElementById("modal-toolchildren").innerHTML = "Child Parts: ";
          try {
            var children = await cc.getChildParts(dataRow["Tool Code"]);
          }
          catch {
            alert1("Error in fetching details! Please try again.");
            console.log("Error in getChildParts! Please try again.");
          }
          if (children.length) {
            k = 0;
            document.getElementById("child-parts-profile-table").hidden = false;
            children.forEach(dataRow => {
              document.getElementById("child-parts-profile-tbody").insertRow(0).innerHTML = '<tr><td id="k"></td><td id="child-profile-tcode"></td><td id="child-profile-tname"></td></tr>';
              document.getElementById("k").innerHTML = children.length - k;
              document.getElementById("child-profile-tcode").innerHTML = dataRow["Tool Code"];
              document.getElementById("child-profile-tname").innerHTML = dataRow["Tool Name"];
              k = k + 1;
            });
          }
          else {
            // document.getElementById("modal-toolchildren").innerHTML += "No Child Parts";
            document.getElementById("info-children-div").className += " divhide";
            // $(".childpartstableinfo").className += " divhide";
            $(".nochildrendiv").show();
          }
          var storage = firebase.storage();
          document.getElementById("maintenance-inspection-sheet").innerHTML = "Tool Inspection Sheet: <b>Not Found</b>";
          var pathReferencePDF = storage.ref(dataRow["Tool Code"] + '.pdf');
          pathReferencePDF.getDownloadURL().then(function (url) {
            document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
            a = document.createElement("a");
            a.href = url;
            a.innerHTML = "DOWNLOAD";
            document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
          }).catch(function (error) {
            var pathReferenceDOC = storage.ref(dataRow["Tool Code"] + '.doc');
            pathReferenceDOC.getDownloadURL().then(function (url) {
              document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
              a = document.createElement("a");
              a.href = url;
              a.innerHTML = "DOWNLOAD";
              document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
            }).catch(function (error) {
              var pathReferenceDOCX = storage.ref(dataRow["Tool Code"] + '.docx');
              pathReferenceDOCX.getDownloadURL().then(function (url) {
                document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
                a = document.createElement("a");
                a.href = url;
                a.innerHTML = "DOWNLOAD";
                document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
              }).catch(function (error) {
                console.log("Tool Inspection Sheet Not Found!");
              });
            });
          });
          if (dataRow["Maintenance"] != 0) {
            document.getElementById("maintenance-company").innerHTML = dataRow["AMC"];
            document.getElementById("maintenance-man").innerHTML = dataRow["AMC Provider"];
            document.getElementById("maintenance-contact").innerHTML = dataRow["AMC Contact"];
            document.getElementById("maintenance-period").innerHTML = dataRow["AMC Period"];
            document.getElementById("last-maintenance-date").innerHTML = (new Date(dataRow["Date of Last Maintenance"])).toDateString();
            document.getElementById("maintenance-frequency").innerHTML = dataRow["Inspection Frequency"] + " Days";
            // $(".maintenanceTableHide").className = "table-responsive maintenanceTableHide";
          }
          else {
            $(".noMaintenanceDiv").show();
            document.getElementById("info-maintenance-div").className += " divhide";
            document.getElementById("maintenance-company").innerHTML = "";
            document.getElementById("maintenance-man").innerHTML = "";
            document.getElementById("maintenance-contact").innerHTML = "";
            document.getElementById("maintenance-period").innerHTML = "";
            document.getElementById("maintenance-frequency").innerHTML = "";
          }

          var options = { backdrop: "static", keyboard: true, focus: true };
          var myModal = new bootstrap.Modal(document.getElementsByClassName("iteminfo")[0], options)
          myModal.show();
        }
        // toolnamespan.appendChild(toolnameibutton);
        // toolnameColumn.appendChild(toolnamespan);

        toolcodeColumn = document.createElement("td");
        toolcodeColumn.innerHTML = dataRow["Tool Code"];
        //toolcodeColumn.appendChild(toolnamespan);

        quantityColumn = document.createElement("td");
        quantityColumn.innerHTML = dataRow["Quantity"];

        // var owner = await cc.getUserDetailsFromEmpID(dataRow["Allocated To"]);
        // var ab = owner[0]["First Name"] + " " + owner[0]["Last Name"];
        // console.log(ab);
        ownerColumn = document.createElement("td");
        if (dataRow["Permanent"] == '3') {
            ownerColumn.innerHTML = "Cannot be Issued";
        } else {
            ownerColumn.innerHTML = dataRow["Allocated To"];
        }
        statusColumn = document.createElement("td");
        statusspan = document.createElement("span");
        statusspan.className = "icon is-small is-right right-icon";
        statusicon = document.createElement("i");
        if (dataRow["Allocated To"] != null) {
            statusColumn.innerHTML = "Issued (" + dataRow["Allocated To"] + ")";
            statusicon.className = "fas fa-id-card-alt";
            statusicon.style.color = "blue";
        }
        else if (dataRow["Status"] == "0") {
            statusColumn.innerHTML = "Available";
            statusicon.className = "fas fa-check-circle";
            statusicon.style.color = "green";
        }
        // else if (dataRow["Status"] == "1") {
        //     statusColumn.innerHTML = "Issued (" + dataRow["Allocated To"] + ")";
        //     statusicon.className = "fas fa-id-card-alt";
        //     statusicon.style.color = "blue";
        // }
        else if (dataRow["Status"] == "2") {
            statusColumn.innerHTML = "Partially Damaged";
            statusicon.className = "fas fa-exclamation-triangle";
            statusicon.style.color = "#c2a90f";
        }
        else if (dataRow["Status"] == "3") {
            statusColumn.innerHTML = "NA (Damaged)";
            statusicon.className = "fas fa-times-circle";
            statusicon.style.color = "red";
        }
        else if (dataRow["Status"] == "4") {
            statusColumn.innerHTML = "NA (Missing)";
            statusicon.className = "fas fa-times-circle";
            statusicon.style.color = "#c2a90f";
        }
        else if (dataRow["Status"] == "5") {
            statusColumn.innerHTML = "Missing (Functional)";
            statusicon.className = "fas fa-exclamation-triangle";
            statusicon.style.color = "#c2a90f";
        }
        else if (dataRow["Status"] == "6") {
            statusColumn.innerHTML = "Under Maintenance";
            statusicon.className = "fas fa-exclamation-triangle";
            statusicon.style.color = "#c2a90f";
        }
        statusspan.appendChild(statusicon);
        statusColumn.appendChild(statusspan);
        locationColumn = document.createElement("td");
        locationColumn.innerHTML = dataRow["Location"];
        if(dataRow["Location"] == `null` || dataRow["Location"]== "")
            locationColumn.innerHTML = "NA";
        actionsColumn = document.createElement("td");
        modifyButton = document.createElement("button");
        modifyButton.innerHTML= "<i class='far fa-edit'></i><span class='btnref'> Modify<span>";
        modifyButton.className = "btn btn-grp btn-secondary reportbtn";
        modifyButton.title = "Modify item";
        modifyButton.onclick = async function (event) {
            
            var modifyTcode = $(this).parents("tr")[0].cells[0].innerHTML;
            modifyToolcode = modifyTcode;
            //console.log(modifyToolcode);
            var data = await cc.getToolProfile(modifyToolcode, workshop_id);
            var quantity = await cc.getQuantity(data[0]["Tool Name"], workshop_id);
            var similarTools = await cc.getSimilarTools(data[0]["Tool Name"], workshop_id);
            var k = 1;
            // similarTools.forEach(simTool => {
            //     document.getElementById("remove-quantity-tbody").appendChild(createRowForRemoveQuantityTable(simTool, k));
            //     k++;
            // });
            if(data[0]["Permanent"] == 5 || data[0]["Permanent"] == 6)
                document.getElementById("issue-permission").style.display = "block";
            else
                document.getElementById("issue-permission").style.display = "none";
            document.getElementById("modify-tcode").value = data[0]["Tool Code"];
            document.getElementById("modify-tname").value = data[0]["Tool Name"];
            document.getElementById("modify-brand").value = data[0]["Brand"];
            if (data[0]["Value"]) {
                document.getElementById("modify-value").value = data[0]["Value"];
            } else {
                document.getElementById("modify-value").placeholder = "Not Defined";
            }
            document.getElementById("modify-location").value = data[0]["Location"];
            document.getElementById("modify-description").value = data[0]["Description"];
            // document.getElementById("modify-quantity").innerHTML = quantity[0]["quan"];
            var dop = moment(new Date(data[0]["Date of Purchase"]));
            dop = dop.format("YYYY-MM-DD").toString();
            if(dop == '1970-01-01')
                dop = '';
            var warranty_ed = moment(new Date(data[0]["Warranty Enddate"]));
            warranty_ed = warranty_ed.format("YYYY-MM-DD").toString();
            var period_sd = moment(new Date(data[0]["AMC Period Startdate"]));
            period_sd = period_sd.format("YYYY-MM-DD").toString();
            var period_ed = moment(new Date(data[0]["AMC Period Enddate"]));
            period_ed = period_ed.format("YYYY-MM-DD").toString();
            if(warranty_ed == '1970-01-01')
                warranty_ed = '';
            if(period_sd == '1970-01-01')
                period_sd = '';
            if(period_ed == '1970-01-01')
                period_ed = '';
            console.log(warranty_ed, period_sd, period_ed);
            document.getElementById("modify-dop").value = dop;
            document.getElementById("modify-warranty-ed").value = warranty_ed;
            if (data[0]["Permanent"] > 1)
                document.getElementById("modify-iif").value = data[0]["Internal Inspection Frequency"];
            else
                document.getElementById("modify-iif").hidden = true;
            document.getElementById("modify-inspectionSheet").innerHTML = "";
            if (data[0]["Permanent"] == 1) { permanent = 1; }
            else {
                var storage = firebase.storage();
                document.getElementById("modify-inspectionSheet").innerHTML = "Tool Inspection Sheet: <b style='display: flex; justify-content: space-around'>Not Found</b>";
                document.getElementById("modify-inspectionSheet").innerHTML += '<label for="modify-tool-file-upload">Upload New Inspection Sheet (PDF, DOC)</label><input type="file" id="modify-tool-file-upload" name="image_uploads" accept=".doc, .docx, .pdf">'
                var pathReferencePDF = storage.ref(data[0]["Tool Code"] + '.pdf');
                pathReferencePDF.getDownloadURL().then(function (url) {
                    document.getElementById("modify-inspectionSheet").getElementsByTagName("b")[0].innerHTML = "";
                    a = document.createElement("a");
                    a.href = url;
                    a.innerHTML = "DOWNLOAD";
                    document.getElementById("modify-inspectionSheet").getElementsByTagName("b")[0].appendChild(a);
                }).catch(function (error) {
                    var pathReferenceDOC = storage.ref(dataRow["Tool Code"] + '.doc');
                    pathReferenceDOC.getDownloadURL().then(function (url) {
                        document.getElementById("modify-inspectionSheet").getElementsByTagName("b")[0].innerHTML = "";
                        a = document.createElement("a");
                        a.href = url;
                        a.innerHTML = "DOWNLOAD";
                        document.getElementById("modify-inspectionSheet").getElementsByTagName("b")[0].appendChild(a);
                    }).catch(function (error) {
                        var pathReferenceDOCX = storage.ref(dataRow["Tool Code"] + '.docx');
                        pathReferenceDOCX.getDownloadURL().then(function (url) {
                            document.getElementById("modify-inspectionSheet").getElementsByTagName("b")[0].innerHTML = "";
                            a = document.createElement("a");
                            a.href = url;
                            a.innerHTML = "DOWNLOAD";
                            document.getElementById("modify-inspectionSheet").getElementsByTagName("b")[0].appendChild(a);
                        }).catch(function (error) {
                            console.log("Tool Inspection Sheet Not Found!");
                        });
                    });
                });
                document.getElementById("modify-tool-file-upload").addEventListener('change', (event) => {
                    selectedFile = event.target.files[0];
                });
            }
            document.getElementById("update-child-parts-tbody").innerHTML = "";
            kit = await cc.getChildParts(data[0]["Tool Code"], workshop_id);
            if (kit.length == 0) {
                // document.getElementById("modify-npok").checked = true;
                // document.getElementById("modify-pok-radio").hidden = false;
                // document.getElementById("modify-pok-label").hidden = false;
                document.getElementById("modify-pok").hidden = true;
            }
            else {
                // document.getElementById("modify-pok-radio").hidden = true;
                // document.getElementById("modify-pok-label").hidden = true;
                document.getElementById("modify-pok").hidden = false;
                noOfChildren = kit.length;
                var uptoolcode = document.getElementById("modify-tcode").value;
                //console.log(kit);
                for (var k = 0; k < noOfChildren; k++) {
                    document.getElementById("update-child-parts-tbody").insertRow(0).innerHTML = '<tr><td id="k"></td><td><input id="child-tcode" type="text"></input></td><td><input id="child-tname" type="text"></input></td></tr>';
                    document.getElementById("k").innerHTML = noOfChildren - k;
                    document.getElementById("child-tcode").value = uptoolcode + "/" + (noOfChildren - k);
                    document.getElementById("child-tname").value = kit[k]["Tool Name"];
                }
            }
            if (data[0]["Maintenance"] == 1) {
                document.getElementById("modify-maintained").checked = true;
                document.getElementById("amc").value = data[0]["AMC"];
                document.getElementById("amcpro").value = data[0]["AMC Provider"];
                document.getElementById("amccon").value = data[0]["AMC Contact"];
                var amcpersd = moment(new Date(data[0]["AMC Period Startdate"]));
                amcpersd = amcpersd.format("YYYY-MM-DD");
                document.getElementById("amcpersd").value = amcpersd;
                var amcpered = moment(new Date(data[0]["AMC Period Enddate"]));
                amcpered = amcpered.format("YYYY-MM-DD");
                document.getElementById("amcpered").value = amcpered;
                if(warranty_ed == '1970-01-01')
                    warranty_ed = '';
                if(amcpersd == '1970-01-01')
                    document.getElementById("amcpersd").value = '';
                if(amcpered == '1970-01-01')
                    document.getElementById("amcpered").value = '';
                var inspectionFrequency = data[0]["Inspection Frequency"];
                var n = inspectionFrequency.indexOf("d");
                document.getElementById("duration").value = 'days';
                if(n<=0)
                {
                    n = inspectionFrequency.indexOf("w");
                    document.getElementById("duration").value = 'weeks';
                }
                if(n<=0)
                {
                    n = inspectionFrequency.indexOf("m");
                    document.getElementById("duration").value = 'months';
                }
                document.getElementById("if").value = inspectionFrequency.substring(0,n-1);
                var dolm = moment(new Date(data[0]["Date of Last Maintenance"]));
                dolm = dolm.format("YYYY-MM-DD").toString();
                //console.log(dolm);
                if(dolm != '1970-01-01')
                    document.getElementById("dolm").value = dolm;
            }
            // else { document.getElementById("modify-nmaintained").checked = true; }
            // document.getElementById("modify-tool-modal").className = "modal is-active";
            var options = { backdrop: "static", keyboard: true, focus: true };
            var modifyModal = new bootstrap.Modal(document.getElementById("modify-item"), options)
            modifyModal.show();
        }
        reportButton = document.createElement("button");
        reportButton.innerHTML= "<i class='far fa-flag'></i><span class='btnref'> Report<span>";
        reportButton.className = "btn btn-grp btn-secondary reportbtn";
        reportButton.title = "Report item";
        reportButton.onclick = async function (event) {
        selectedToolCode = $(this).parents("tr")[0].cells[0].innerHTML;
        currentStatus = $(this).parents("tr")[0].cells[2].innerHTML;
        var n = currentStatus.indexOf('<');
        currentStatus = currentStatus.substring(0,n);
        document.getElementById("child-part-table").getElementsByTagName("tbody")[0].innerHTML = "";
        document.getElementById("damaged-functional").checked = false;
        document.getElementById("damaged-nf").checked = false;
        document.getElementById("missing").checked = false;
        document.getElementById("missing-bf").checked = false;
        document.getElementById("report-text").value = "";

        if (currentStatus.includes("NA (Damaged)") || currentStatus.includes("NA (Missing)")) {
            alert1("This tool has already been reported!");
            return "";
        }
        if(dataRow["Allocated To"] != null) {
            try {
                var userDetails = await cc.getUserDetailsFromEmpID(dataRow["Allocated To"]);
                cc.closeConnection();
                alert1("This tool is currently with " + userDetails[0]["First Name"] + " " + userDetails[0]["Last Name"] + ".");
                return;
            }
            catch {
                alert1("Error in fetching your details! Please check your internet connection.");
                console.log("Error in getUserDetailsFromEmpID ! Please try again.");
            }
        }

        try {
            data = await cc.selectedToolCode(selectedToolCode, workshop_id);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please check your internet connection.");
            console.log("Error in getChildParts ! Please try again.");
        }

        if (data.length == 0) {
            document.getElementById("child-part-table").hidden = true;
            document.getElementById("missing-bf").hidden = true;
            document.getElementById("missing-bf-text").hidden = true;
            document.getElementById("child-text").hidden = true;
        }
        else {
            document.getElementById("child-part-table").hidden = false;
            document.getElementById("missing-bf").hidden = false;
            document.getElementById("missing-bf-text").hidden = false;
            document.getElementById("child-text").hidden = false;
        }
        data.forEach(dataRow => {
            document.getElementById("report-child-parts-tbody").appendChild(createRowForChildParts(dataRow));
        })
        var options = { backdrop: "static", keyboard: true, focus: true };
          var reportModal = new bootstrap.Modal(document.getElementById("report-modal"), options)
          // console.log(myModal);
          reportModal.show();
          document.getElementById("loader").hidden = true;
        }

        recordButton = document.createElement("button");
        recordButton.innerHTML= "<i class='fas fa-file-medical-alt'></i><span class='btnref'> Records<span>";
        recordButton.className = "btn btn-grp btn-secondary recordsbtn";
        recordButton.title = "View Record";
        recordButton.onclick = async function (event) {
          event.stopPropagation();
          document.getElementById("loader").hidden = false;
          // document.getElementById("no-record-div").innerHTML = "";
          document.getElementById("record-table").hidden = false;
          document.getElementById("record-tbody").innerHTML = "";
          document.getElementById("repair-record-heading").innerHTML = dataRow["Tool Name"] + " (" + dataRow["Tool Code"] + ")";
          // document.getElementById("record-modal-content").innerHTML = '<div style="background-color: white;width: 20vw;margin-left: 30%;margin-bottom: 3vh;border-radius: 1vw;"><center> All Records </center></div>';
          try {
            records = await cc.getAllRecordsForAToolID(dataRow["Tool Code"], workshop_id);
            cc.closeConnection();
          }
          catch {
            alert1("Error in fetching your details! Please try again.");
            console.log("Error in getAllRecordsForAToolID ! Please try again.");
          }
          if (records.length == 0) {
            console.log("no records");
            $(".collapse").show();
            document.getElementById("record-table").hidden = true;
          } 
          else 
          {
            $(".collapse").hide();
          }
          records.forEach(dataRow => {
            document.getElementById("record-table").getElementsByTagName("tbody")[0].appendChild(createRowForRecordTable(dataRow));
          });
          var options = { backdrop: "static", keyboard: true, focus: true };
          var recordModal = new bootstrap.Modal(document.getElementsByClassName("individualrecord")[0], options)
          recordModal.show();
          document.getElementById("loader").hidden = true;
          
        }
        
        actionsColumn.appendChild(informationbutton);
        actionsColumn.appendChild(recordButton);
        actionsColumn.appendChild(modifyButton);
        actionsColumn.appendChild(reportButton);
        tableRow.appendChild(toolcodeColumn);
        tableRow.appendChild(toolnameColumn);
        if(dataRow["Permanent"] == '5' || dataRow["Permanent"] == '6')
          tableRow.appendChild(quantityColumn);
        tableRow.appendChild(statusColumn);
        tableRow.appendChild(locationColumn);
        tableRow.appendChild(actionsColumn);
        return tableRow;
    }
    function createRowForRecordTable(dataRow) {
        tableRow = document.createElement("tr");
        reportdtColumn = document.createElement("td");
        reportdtColumn.innerHTML = moment(new Date(dataRow["Report Datetime"])).format("DD-MMYYYY HH:mm:ss").toString();
        // reportdtColumn.className = "tcode";
        reseolvedtColumn = document.createElement("td");
        reseolvedtColumn.innerHTML = moment(new Date(dataRow["Resolve Datetime"])).format("DD-MM-YYYY HH:mm:ss").toString();
        // reseolvedtColumn.className = "tcode";
        empColumn = document.createElement("td");
        empColumn.innerHTML = dataRow["First Name"] + " " + dataRow["Last Name"] + " (" + dataRow["Emp ID"] + ")"; 
        // empColumn.className = "tcode";
        causeColumn = document.createElement("td");
        causeColumn.innerHTML = dataRow["Cause"]; causeColumn.className = "tcode";
        actionColumn = document.createElement("td");
        actionColumn.innerHTML = dataRow["Action"]; actionColumn.className = "tcode";
        remarksColumn = document.createElement("td");
        remarksColumn.innerHTML = dataRow["Additional Remarks"]; remarksColumn.className = "tcode";
        tableRow.appendChild(empColumn);
        tableRow.appendChild(causeColumn);
        tableRow.appendChild(remarksColumn);
        tableRow.appendChild(reportdtColumn);
        tableRow.appendChild(reseolvedtColumn);
        tableRow.appendChild(actionColumn);
        return tableRow;
      }

    async function createRowForArchiveTable(dataRow) {
        // console.log(defaultCurrency["Default Currency Symbol"]);
        tableRow = document.createElement("tr");
        toolcodeColumn = document.createElement("td");
        toolcodeColumn.innerHTML = dataRow["Tool Code"];
        toolnameColumn = document.createElement("td");
        toolnameColumn.innerHTML = dataRow["Tool Name"];
        // toolnamespan = document.createElement("span");
        // toolnamespan.className = "icon is-small is-right right-icon";

        informationbutton = document.createElement("button");
        informationbutton.innerHTML="<i class='fas fa-info-circle'></i><span class='btnref'> info<span>";
        informationbutton.className = "btn btn-grp btn-secondary infobtn";
        informationbutton.title = "View Profile";

        informationbutton.onclick = async function (event) {
          event.stopPropagation();
          document.getElementById("info-toolcode").innerHTML = dataRow["Tool Code"];
          document.getElementById("info-tool").innerHTML = dataRow["Tool Name"] + " (" + dataRow["Tool Code"] + ")";
          document.getElementById("info-toolname").innerHTML = dataRow["Tool Name"];
          if(dataRow["Brand"])
            document.getElementById("info-toolspec").innerHTML = dataRow["Brand"];
          document.getElementById("info-tooldescription").innerHTML = dataRow["Description"];
          if(!dataRow["Description"])
            document.getElementById("info-tooldescription").innerHTML = "";
          // document.getElementById("info-image").src = dataRow["Photo"];
          var dop = moment(new Date(dataRow["Date of Purchase"])).format("DD-MM-YYYY").toString();
          if(dop != '01-01-1970')
            document.getElementById("info-tooldop").innerHTML = dop;
          
          if (dataRow["Value"]) {
            document.getElementById("info-toolcost").innerHTML = defaultCurrency["Default Currency Symbol"] + dataRow["Value"];
          } else {
            document.getElementById("info-toolcost").innerHTML = "NA";
          }
          document.getElementById("info-toollocation").innerHTML = dataRow["Location"];
          if (dataRow["Permanent"] != 1) {
            document.getElementById("info-toollocation").hidden = false;
          }
          else {
            document.getElementById("info-toollocation").hidden = true;
          }
          if (dataRow["Permanent"] == 5 || dataRow["Permanent"] == 6) {
            document.getElementById("info-toolquantity").innerHTML = dataRow["Quantity"];
            document.getElementById("info-tooltype").innerHTML = "Material";
          }
          else if(dataRow["Permanent"] == 0)
          document.getElementById("info-tooltype").innerHTML = "Special Tool";
          else if(dataRow["Permanent"] == 1)
          document.getElementById("info-tooltype").innerHTML = "Hand Tool";
          else if(dataRow["Permanent"] == 4)
          document.getElementById("info-tooltype").innerHTML = "Asset";
          else if(dataRow["Permanent"] == 2 || dataRow["Permanent"] == 3)
          document.getElementById("info-tooltype").innerHTML = "Equipment";
          // document.getElementById("modal-toolchildren").innerHTML = "Child Parts: ";
          try {
            var children = await cc.getChildParts(dataRow["Tool Code"]);
          }
          catch {
            alert1("Error in fetching details! Please try again.");
            console.log("Error in getChildParts! Please try again.");
          }
          if (children.length) {
            k = 0;
            document.getElementById("child-parts-profile-table").hidden = false;
            children.forEach(dataRow => {
              document.getElementById("child-parts-profile-tbody").insertRow(0).innerHTML = '<tr><td id="k"></td><td id="child-profile-tcode"></td><td id="child-profile-tname"></td></tr>';
              document.getElementById("k").innerHTML = children.length - k;
              document.getElementById("child-profile-tcode").innerHTML = dataRow["Tool Code"];
              document.getElementById("child-profile-tname").innerHTML = dataRow["Tool Name"];
              k = k + 1;
            });
          }
          else {
            // document.getElementById("modal-toolchildren").innerHTML += "No Child Parts";
            $(".childtablehide").hide();
            $(".nochildrendiv").show();
          }
          var storage = firebase.storage();
          document.getElementById("maintenance-inspection-sheet").innerHTML = "Tool Inspection Sheet: <b>Not Found</b>";
          var pathReferencePDF = storage.ref(dataRow["Tool Code"] + '.pdf');
          pathReferencePDF.getDownloadURL().then(function (url) {
            document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
            a = document.createElement("a");
            a.href = url;
            a.innerHTML = "DOWNLOAD";
            document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
          }).catch(function (error) {
            var pathReferenceDOC = storage.ref(dataRow["Tool Code"] + '.doc');
            pathReferenceDOC.getDownloadURL().then(function (url) {
              document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
              a = document.createElement("a");
              a.href = url;
              a.innerHTML = "DOWNLOAD";
              document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
            }).catch(function (error) {
              var pathReferenceDOCX = storage.ref(dataRow["Tool Code"] + '.docx');
              pathReferenceDOCX.getDownloadURL().then(function (url) {
                document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
                a = document.createElement("a");
                a.href = url;
                a.innerHTML = "DOWNLOAD";
                document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
              }).catch(function (error) {
                console.log("Tool Inspection Sheet Not Found!");
              });
            });
          });
          if (dataRow["Maintenance"] != 0) {
            document.getElementById("maintenance-company").innerHTML = dataRow["AMC"];
            document.getElementById("maintenance-man").innerHTML = dataRow["AMC Provider"];
            document.getElementById("maintenance-contact").innerHTML = dataRow["AMC Contact"];
            document.getElementById("maintenance-period").innerHTML = dataRow["AMC Period"];
            document.getElementById("last-maintenance-date").innerHTML = (new Date(dataRow["Date of Last Maintenance"])).toDateString();
            document.getElementById("maintenance-frequency").innerHTML = dataRow["Inspection Frequency"] + " Days";
          }
          else {
            $(".noMaintenanceDiv").show();
            $(".maintenanceTableHide").hide();
            document.getElementById("maintenance-company").innerHTML = "";
            document.getElementById("maintenance-man").innerHTML = "";
            document.getElementById("maintenance-contact").innerHTML = "";
            document.getElementById("maintenance-period").innerHTML = "";
            document.getElementById("maintenance-frequency").innerHTML = "";
          }

          var options = { backdrop: "static", keyboard: true, focus: true };
          var myModal = new bootstrap.Modal(document.getElementsByClassName("iteminfo")[0], options)
          myModal.show();
        }
        
        ldmColumn = document.createElement("td");
        // var ldm = await cc.getLastReportDate(dataRow["Tool Code"], workshop_id);
        // if(ldm.length != 0)
        //     ldmColumn.innerHTML = ldm[0]["Report Datetime"];
        // else    
        var ldm = moment(new Date(dataRow["Date of Last Modification"]));
        ldm = ldm.format("YYYY-MM-DD");
        ldmColumn.innerHTML = ldm;
        actionsColumn = document.createElement("td");
        viewButton = document.createElement("i");
        viewButton.className = "btn btn-secondary archivebtn";
        viewButton.innerHTML = "<i class='fas fa-archive'></i><span class='btnref'> Archive</span>"
        viewButton.title = "View";
        viewButton.onclick = async function () {
            // document.getElementById("archive1-div").hidden = true;
            document.getElementById("archive2-tbody").innerHTML = "";
            var selectedtcode = $(this).parents("tr")[0].cells[0].innerHTML;
            toolcode = selectedtcode;
            var toolname = $(this).parents("tr")[0].cells[1].innerHTML;
            document.getElementById("archive-modal-tool").innerHTML = toolname + " (" + toolcode + ")";
            var startDate = "2000-01-01";
            var endDate = ldm;
            var x = moment();
            x = x.format("YYYY-MM-DD").toString();
            var repairHistory = await cc.getRepairHistoryOfATool(toolcode, startDate, x, workshop_id);
            console.log(repairHistory);
            repairHistory.forEach(dataRow => {
                document.getElementById("archive2-table").getElementsByTagName("tbody")[0].appendChild(createRowForRepairHistoryTable(dataRow));
                // var createdElement = await createRowForRepairHistoryTable(row);
                // if (createdElement) {
                //     document.getElementById("archive2-tbody").appendChild(createdElement);
                // }
            });
            var options = { backdrop: "static", keyboard: true, focus: true };
            var archiveModal = new bootstrap.Modal(document.getElementById("archive2-modal"), options)
            archiveModal.show();
        }

        actionsColumn.appendChild(informationbutton);
        actionsColumn.appendChild(viewButton);
        tableRow.appendChild(toolcodeColumn);
        tableRow.appendChild(toolnameColumn);
        tableRow.appendChild(ldmColumn);
        tableRow.appendChild(actionsColumn);
        return tableRow;
    }
    function createRowForMaintenanceDue(dataRow, maintenance_due1) {
      tableRow = document.createElement("tr");

      toolcodeColumn = document.createElement("td");
      toolcodeColumn.innerHTML = dataRow["Tool Code"];
      toolnameColumn = document.createElement("td");
      toolnameColumn.innerHTML = dataRow["Tool Name"];
      statusColumn = document.createElement("td");
        statusspan = document.createElement("span");
        statusspan.className = "icon is-small is-right right-icon";
        statusicon = document.createElement("i");
        if (dataRow["Allocated To"] != null) {
            statusColumn.innerHTML = "Issued (" + dataRow["Allocated To"] + ")";
            statusicon.className = "fas fa-id-card-alt";
            statusicon.style.color = "blue";
        }
        else if (dataRow["Status"] == "0") {
            statusColumn.innerHTML = "Available";
            statusicon.className = "fas fa-check-circle";
            statusicon.style.color = "green";
        }
        // else if (dataRow["Status"] == "1") {
        //     statusColumn.innerHTML = "Issued (" + dataRow["Allocated To"] + ")";
        //     statusicon.className = "fas fa-id-card-alt";
        //     statusicon.style.color = "blue";
        // }
        else if (dataRow["Status"] == "2") {
            statusColumn.innerHTML = "Partially Damaged";
            statusicon.className = "fas fa-exclamation-triangle";
            statusicon.style.color = "#c2a90f";
        }
        else if (dataRow["Status"] == "3") {
            statusColumn.innerHTML = "NA (Damaged)";
            statusicon.className = "fas fa-times-circle";
            statusicon.style.color = "red";
        }
        else if (dataRow["Status"] == "4") {
            statusColumn.innerHTML = "NA (Missing)";
            statusicon.className = "fas fa-times-circle";
            statusicon.style.color = "#c2a90f";
        }
        else if (dataRow["Status"] == "5") {
            statusColumn.innerHTML = "Missing (Functional)";
            statusicon.className = "fas fa-exclamation-triangle";
            statusicon.style.color = "#c2a90f";
        }
        else if (dataRow["Status"] == "6") {
            statusColumn.innerHTML = "Under Maintenance";
            statusicon.className = "fas fa-exclamation-triangle";
            statusicon.style.color = "#c2a90f";
        }
        statusspan.appendChild(statusicon);
        statusColumn.appendChild(statusspan);
      frequencyColumn = document.createElement("td");
      frequencyColumn.innerHTML = dataRow["Inspection Frequency"];
      toolnameColumn = document.createElement("td");
      toolnameColumn.innerHTML = dataRow["Tool Name"];
      lastServiceColumn = document.createElement("td");
      lastServiceColumn.innerHTML = moment(new Date(dataRow["Date of Last Maintenance"])).format("YYYY-MM-DD").toString();
      if(lastServiceColumn.innerHTML == '1970-01-01')
        lastServiceColumn.innerHTML = 'NA';
      toolnameColumn = document.createElement("td");
      toolnameColumn.innerHTML = dataRow["Tool Name"]; 
      maintenancedueColumn = document.createElement("td");
      maintenancedueColumn.title = maintenance_due1;
      maintenancedueColumn.innerHTML = maintenance_due1;
      var x = moment();
      x = x.format("YYYY-MM-DD").toString();
      warrantyColumn = document.createElement("td");
      if(moment(new Date(dataRow["AMC Period Enddate"])).format("YYYY-MM-DD").toString() > x)
        warrantyColumn.innerHTML = "Active";      
      else if(moment(new Date(dataRow["AMC Period Enddate"])).format("YYYY-MM-DD").toString() == '1970-01-01')
        warrantyColumn.innerHTML = "NA";
      else if(moment(new Date(dataRow["AMC Period Enddate"])).format("YYYY-MM-DD").toString())
        warrantyColumn.innerHTML = "Expired on " + moment(new Date(dataRow["AMC Period Enddate"])).format("YYYY-MM-DD").toString();
      else
        warrantyColumn.innerHTML = "NA";
// <button type="button" class="btn servicebtn" data-bs-toggle="modal" data-bs-target="#" title="Perform Service"><i class="fas fa-cog"></i> Service</button>
// <button type="button" class="" data-bs-toggle="modal" data-bs-target="#" title="Skip Service"><i class="fas fa-angle-double-right"></i> Skip</button>
      serviceNowButton = document.createElement("button");
      serviceNowButton.className = "btn servicebtn";
      serviceNowButton.innerHTML = "<i class='fas fa-cog'></i> Service Now";
      serviceNowButton.onclick = async function (event) {
          skipMaintenanceToolCode = dataRow["Tool Code"];
          skipMaintenanceToolName = dataRow["Tool Name"];
          var status = 6;
          var cause = "maintenance";
          var maint = await cc.sendForMaintenance(skipMaintenanceToolCode, cause, status, emp_id, currentUser[0]["First Name"], currentUser[0]["Last Name"], skipMaintenanceToolName, workshop_id);   
          if(maint == 0)
              alert1("Attempt Unsuccessful");
          else
          {
              alertDisappearing("Sent Under Maintenance");
              initiateSetup();
              resetVariables();
          }
      }
      
      skipButton = document.createElement("button");
      skipButton.className = "btn skipbtn";
      skipButton.innerHTML = "<i class='fas fa-angle-double-right'></i> Skip";
      skipButton.onclick = async function (event) {
          document.getElementById("skip-maintenance-modal").className = "modal is-active";
          skipMaintenanceToolCode = dataRow["Tool Code"];
          skipMaintenanceToolName = dataRow["Tool Name"];
      }
      actionsColumn = document.createElement("td");
      actionsColumn.appendChild(serviceNowButton);
      actionsColumn.appendChild(skipButton);
      tableRow.appendChild(toolcodeColumn);
      tableRow.appendChild(toolnameColumn);
      tableRow.appendChild(statusColumn);
      tableRow.appendChild(frequencyColumn);
      tableRow.appendChild(lastServiceColumn);
      tableRow.appendChild(warrantyColumn);      
      tableRow.appendChild(maintenancedueColumn);
      tableRow.appendChild(actionsColumn);
      return tableRow;
}
    // Adds row to the table in Issue History Page
    function createRowForIssueHistoryTable(dataRow) {
        tableRow = document.createElement("tr");
        empidColumn = document.createElement("td");
        empidColumn.innerHTML = dataRow["First Name"] + " " + dataRow["Last Name"] + " (" + dataRow["Emp ID"] + ")";
        nameColumn = document.createElement("td");
        nameColumn.innerHTML = dataRow["First Name"] + " " + dataRow["Last Name"];
        toolcodeColumn = document.createElement("td");
        toolcodeColumn.innerHTML = dataRow["Tool Code"];
        toolnameColumn = document.createElement("td");
        toolnameColumn.innerHTML = dataRow["Tool Name"];
        approvedByColumn = document.createElement("td");
        approvedByColumn.innerHTML = dataRow["Approved By"];
        approvedByColumn.className = "tname";
        issuedtColumn = document.createElement("td");
        idt = moment(new Date(dataRow["Issue DateTime"]));
        // idt = idt.format("YYYY-MM-DD HH:mm:ss");
        issuedtColumn.innerHTML = returnTimeInFormat(idt);
        returndtColumn = document.createElement("td");
        if (dataRow["Return DateTime"]) {
            returndtColumn.innerHTML = returnTimeInFormat(moment(new Date(dataRow["Return DateTime"])));
        }
        else {
            returndtColumn.innerHTML = "<b style='color: red;'>Pending</b>"
        }
        returnStatusColumn = document.createElement("td");
        returnStatusColumn.innerHTML = dataRow["Return Status"];
        returnStatusColumn.className = "tname";
        if(!dataRow["Return Status"])
            returnStatusColumn.innerHTML = "NA";
        tableRow.appendChild(empidColumn);
        // tableRow.appendChild(nameColumn);
        tableRow.appendChild(toolcodeColumn);
        tableRow.appendChild(toolnameColumn);
        tableRow.appendChild(approvedByColumn);
        tableRow.appendChild(issuedtColumn);
        tableRow.appendChild(returndtColumn);
        tableRow.appendChild(returnStatusColumn);
        return tableRow;
    }
     // Adds row to the table in Repair History Page
     function createRowForRepairHistoryTable(dataRow) {
        tableRow = document.createElement("tr");
        toolcodeColumn = document.createElement("td");
        toolcodeColumn.innerHTML = dataRow["Tool Code"];
        toolnameColumn = document.createElement("td");
        toolnameColumn.innerHTML = dataRow["Tool Name"];
        reportdtColumn = document.createElement("td"); reportdtColumn.className = "issuetime";
        reportdtColumn.innerHTML = returnTimeInFormat(moment(new Date(dataRow["Report Datetime"])));
        resolvedtColumn = document.createElement("td"); resolvedtColumn.className = "issuetime";

        empidColumn = document.createElement("td");
        empidColumn.innerHTML = dataRow["First Name"] + " " + dataRow["Last Name"] + " (" + dataRow["Emp ID"] + ")";
        causeColumn = document.createElement("td");
        causeColumn.className = "status";
        causeColumn.innerHTML = dataRow["Cause"];
        remarksColumn = document.createElement("td");
        remarksColumn.className = "actions";
        remarksColumn.innerHTML = dataRow["Additional Remarks"];
        if(!dataRow["Additional Remarks"])
            remarksColumn.innerHTML = "NA"
        timeColumn = document.createElement("td");
        timeColumn.innerHTML = returnTimeInFormat(moment(new Date(dataRow["Timestamp"])));
        
        actionsColumn = document.createElement("td");
        resolveButton = document.createElement("i");
        resolveButton.className = "btn btn-secondary resolvebtn";
        resolveButton.title = "Resolve";
        resolveButton.innerHTML = "<i class='fas fa-hand-sparkles'></i> Resolve";
        resolveButton.onclick = async function (event) {
            document.getElementById("repaired").checked = false;
            document.getElementById("replaced").checked = false;
            document.getElementById("discard").checked = false;
            document.getElementById("false-report").checked = false;
            document.getElementById("found").checked = false;
            document.getElementById("cost-text").innerHTML = "";
            document.getElementById("warranty-covered").checked = false;
            document.getElementById("maintenance-covered").checked = false;
            if(dataRow["Cause"] == "maintenance")
            {
                console.log("hidden");
                document.getElementById("repaired").hidden = true;
                document.getElementById("replaced").hidden = true;
                document.getElementById("discard").hidden = true;
                document.getElementById("false-report").hidden = true;
                document.getElementById("found").hidden = true; 
                document.getElementById("repaired-text").hidden = true;
                document.getElementById("replaced-text").hidden = true;
                document.getElementById("discard-text").hidden = true;
                document.getElementById("false-report-text").hidden = true;
                document.getElementById("found-text").hidden = true;   
                document.getElementById("warranty-covered").hidden = false;
                document.getElementById("warranty-covered-text").hidden = false;
                document.getElementById("maintenance-covered").hidden = false;
                document.getElementById("maintenance-covered-text").hidden = false;
                document.getElementById("cost").hidden = false;
                document.getElementById("cost-text").hidden = false;
                document.getElementById("cost-field").hidden = false;
            }
            else
            {
                console.log("not hidden");
                document.getElementById("repaired").hidden=false;
                document.getElementById("replaced").hidden=false;
                document.getElementById("discard").hidden=false;
                document.getElementById("false-report").hidden=false;
                document.getElementById("found").hidden=false;  
                document.getElementById("repaired-text").hidden = false;
                document.getElementById("replaced-text").hidden = false;
                document.getElementById("discard-text").hidden = false;
                document.getElementById("false-report-text").hidden = false;
                document.getElementById("found-text").hidden = false;   
            }
            document.getElementById("resolve-modal").className = "modal is-active";
            var reportTime = event.target.parentElement.parentElement.getElementsByTagName("td")[2].innerHTML;
            reptime = reportTime;
            //reptime = reptime.format("YYYY-MM-DD HH:mm:ss").toString();
            var toolnames = event.target.parentElement.parentElement.getElementsByTagName("td")[1].innerHTML;
            toolname = toolnames;
            var toolcodes = event.target.parentElement.parentElement.getElementsByTagName("td")[0].innerHTML;
            toolcode = toolcodes;
        }
        //actionsColumn.appendChild(resolveButton);
        if (dataRow["Resolve Datetime"]) {
            resolvedtColumn.innerHTML = returnTimeInFormat(moment(new Date(dataRow["Resolve Datetime"])));
            actionsColumn.innerHTML = dataRow["Action"];
        }
        else {
            resolvedtColumn.innerHTML = "<b style='color: red;'>Pending</b>";
            actionsColumn.appendChild(resolveButton);
        }
        tableRow.appendChild(toolcodeColumn);
        tableRow.appendChild(toolnameColumn);
        tableRow.appendChild(empidColumn);
        tableRow.appendChild(reportdtColumn);
        tableRow.appendChild(resolvedtColumn);
        tableRow.appendChild(causeColumn);
        tableRow.appendChild(remarksColumn);
        tableRow.appendChild(actionsColumn);
        return tableRow;
    }
    // Adds row to the table in Repair History Page
    function createRowForUnderMaintenance(dataRow) {
        tableRow = document.createElement("tr");
        toolcodeColumn = document.createElement("td");
        toolcodeColumn.innerHTML = dataRow["Tool Code"];
        toolnameColumn = document.createElement("td");
        toolnameColumn.innerHTML = dataRow["Tool Name"];
        reportdtColumn = document.createElement("td"); reportdtColumn.className = "issuetime";
        reportdtColumn.innerHTML = returnTimeInFormat(moment(new Date(dataRow["Report Datetime"])));
        resolvedtColumn = document.createElement("td"); resolvedtColumn.className = "issuetime";

        remarksColumn = document.createElement("td");
        remarksColumn.className = "actions";
        remarksColumn.innerHTML = dataRow["Additional Remarks"];
        if(!dataRow["Additional Remarks"])
            remarksColumn.innerHTML = "NA"
        timeColumn = document.createElement("td");
        timeColumn.innerHTML = returnTimeInFormat(moment(new Date(dataRow["Timestamp"])));
        
        actionsColumn = document.createElement("td");
        resolveButton = document.createElement("i");
        resolveButton.className = "btn btn-secondary resolvebtn";
        resolveButton.title = "Resolve";
        resolveButton.innerHTML = "<i class='fas fa-hand-sparkles'></i> Resolve";
        resolveButton.onclick = async function (event) {
            document.getElementById("repaired").checked = false;
            document.getElementById("replaced").checked = false;
            document.getElementById("discard").checked = false;
            document.getElementById("false-report").checked = false;
            document.getElementById("found").checked = false;
            document.getElementById("cost-text").innerHTML = "";
            document.getElementById("warranty-covered").checked = false;
            document.getElementById("maintenance-covered").checked = false;
            if(dataRow["Cause"] == "maintenance")
            {
                console.log("hidden");
                document.getElementById("repaired").hidden = true;
                document.getElementById("replaced").hidden = true;
                document.getElementById("discard").hidden = true;
                document.getElementById("false-report").hidden = true;
                document.getElementById("found").hidden = true; 
                document.getElementById("repaired-text").hidden = true;
                document.getElementById("replaced-text").hidden = true;
                document.getElementById("discard-text").hidden = true;
                document.getElementById("false-report-text").hidden = true;
                document.getElementById("found-text").hidden = true;   
                document.getElementById("warranty-covered").hidden = false;
                document.getElementById("warranty-covered-text").hidden = false;
                document.getElementById("maintenance-covered").hidden = false;
                document.getElementById("maintenance-covered-text").hidden = false;
                document.getElementById("cost").hidden = false;
                document.getElementById("cost-text").hidden = false;
                document.getElementById("cost-field").hidden = false;
            }
            else
            {
                console.log("not hidden");
                document.getElementById("repaired").hidden=false;
                document.getElementById("replaced").hidden=false;
                document.getElementById("discard").hidden=false;
                document.getElementById("false-report").hidden=false;
                document.getElementById("found").hidden=false;  
                document.getElementById("repaired-text").hidden = false;
                document.getElementById("replaced-text").hidden = false;
                document.getElementById("discard-text").hidden = false;
                document.getElementById("false-report-text").hidden = false;
                document.getElementById("found-text").hidden = false;   
            }
            document.getElementById("resolve-modal").className = "modal is-active";
            var reportTime = event.target.parentElement.parentElement.getElementsByTagName("td")[2].innerHTML;
            reptime = reportTime;
            //reptime = reptime.format("YYYY-MM-DD HH:mm:ss").toString();
            var toolnames = event.target.parentElement.parentElement.getElementsByTagName("td")[1].innerHTML;
            toolname = toolnames;
            var toolcodes = event.target.parentElement.parentElement.getElementsByTagName("td")[0].innerHTML;
            toolcode = toolcodes;
        }
        //actionsColumn.appendChild(resolveButton);
        // resolvedtColumn.innerHTML = "<b style='color: red;'>Pending</b>";
        actionsColumn.appendChild(resolveButton);
        
        tableRow.appendChild(toolcodeColumn);
        tableRow.appendChild(toolnameColumn);
        tableRow.appendChild(reportdtColumn);
        // tableRow.appendChild(resolvedtColumn);
        // tableRow.appendChild(causeColumn);
        tableRow.appendChild(remarksColumn);
        tableRow.appendChild(actionsColumn);
        return tableRow;
    }
    // Adds row to the table in Requests Page
    function createRowForRequestTable(dataRow) {
        tableRow = document.createElement("tr");
        toolcodeColumn = document.createElement("td");
        toolcodeColumn.innerHTML = dataRow["Tool Code"];
        toolnameColumn = document.createElement("td");
        toolnameColumn.innerHTML = dataRow["Tool Name"];
        nameColumn = document.createElement("td");
        nameColumn.innerHTML = dataRow["First Name"] + " " + dataRow["Last Name"] + " (" + dataRow["Emp ID"] + ")";
        // lnameColumn = document.createElement("td");
        // lnameColumn.innerHTML = dataRow["Last Name"];
        requestdtColumn = document.createElement("td"); requestdtColumn.className = "issuetime";
        requestdtColumn.innerHTML = new Date(dataRow["Request Datetime"]).toLocaleString();
        resolvedtColumn = document.createElement("td"); resolvedtColumn.className = "issuetime";
        if (dataRow["Resolve Datetime"]) {
            resolvedtColumn.innerHTML = new Date(dataRow["Resolve Datetime"]).toLocaleString();
        }
        else {
            resolvedtColumn.innerHTML = "<i class='far fa-clock statuspending'> PENDING</i>";
            //document.getElementById("requests-a").style.color = "red";
        }
        // requesttypeColumn = document.createElement("td");
        // requesttypeColumn.innerHTML = dataRow["Operation"];
        resultColumn = document.createElement("td"); resultColumn.className = "result";
        resultColumn.innerHTML = dataRow["Result"];
        actionsColumn = document.createElement("td");
        approveButton = document.createElement("button");
        approveButton.className = "button is-success is-green";
        approvespan = document.createElement("span");
        approvespan.className = "icon is-small is-left left-icon";
        rejectspan = document.createElement("span");
        rejectspan.className = "icon is-small is-left left-icon";
        rejectibutton = document.createElement("i");
        rejectibutton.className = "fas fa-times";
        approveibutton = document.createElement("i");
        approveibutton.className = "fa fa-check";
        approveButton.onclick = async function (event) {
            var toolname = dataRow["Tool Name"];
            var toolcode = dataRow["Tool Code"];
            var reqid = dataRow["Emp ID"];
            var fname = dataRow["First Name"];
            var lname = dataRow["Last Name"];
            var rt = dataRow["Request Datetime"];
            var moment = require('moment-timezone');
            var x = moment();
            x = x.format("YYYY-MM-DD HH:mm:ss").toString();
            var y = moment();
            y.set("hours", 19);
            y.set("minutes", 0);
            y.set("seconds", 0);
            y = y.format("YYYY-MM-DD HH:mm:ss").toString();
            var reqtime = moment(new Date(rt));
            reqtime = reqtime.format("YYYY-MM-DD HH:mm:ss").toString();

            try {
                var issued = await cc.getToolProfile(toolcode, workshop_id);
                var empdet = await cc.getUserDetailsFromEmpID(issued[0]["Allocated To"]);
            }
            catch {
                alert1("Attempt unsuccessful. Please try again!");
            }
            if (issued[0]["Allocated To"] != null && issued[0]["Permanent"] == 0) {
                alert1("This tool has already been issued by " + empdet[0]["First Name"] + " " + empdet[0]["Last Name"]);
            }
            else {

                try {
                    // console.log(toolcode + toolname + reqid + x + y + fname + lname + reqtime);
                    var result = await cc.issueTools(toolcode, toolname, reqid, x, y, fname, lname, reqtime, workshop_id);
                    //var result = await cc.requestIssue(cartItems, emp_id, x, fname, lname, workshop_id);
                    cc.closeConnection();
                    alert1("The tool has been successfully issued!");
                }
                catch {
                    alert1("Error in fetching your details! Please chech your internet connection.");
                    console.log("Error in issueTools ! Please try again.");
                }
                document.getElementById("request-table").getElementsByTagName("tbody")[0].innerHTML = "";
                initiateSetup();
                resetVariables();
            }
        }
        approvespan.appendChild(approveibutton);
        approveButton.appendChild(approvespan);
        //}
        //else if(responseObject.response === 0) {
        rejectButton = document.createElement("button");
        rejectButton.className = "button is-danger";

        rejectButton.onclick = async function (event) {
            try {
                var result = await cc.rejectIssueMultiple([toolcode], x, reqtime, reqid, workshop_id);
                cc.closeConnection();
                if (result == 1) {
                    alertDisappearing("Rejected");
                }
            }
            catch {
                alert1("Error in fetching your details! Please check your internet connection.");
                console.log("Error in rejectIssueMultiple ! Please try again.");
            }
            document.getElementById("request-table").getElementsByTagName("tbody")[0].innerHTML = "";
            initiateSetup();
            resetVariables();
        }

        rejectspan.appendChild(rejectibutton);
        rejectButton.appendChild(rejectspan);
        actionsColumn.appendChild(approveButton);
        actionsColumn.appendChild(rejectButton);
        tableRow.appendChild(nameColumn);
        tableRow.appendChild(toolnameColumn);
        tableRow.appendChild(toolcodeColumn);
        //tableRow.appendChild(lnameColumn);
        tableRow.appendChild(requestdtColumn);
        tableRow.appendChild(resolvedtColumn);
        //tableRow.appendChild(requesttypeColumn);
        if (dataRow["Resolve Datetime"]) {
            tableRow.appendChild(resultColumn);
        }
        else {
            console.log("not resolved");
            tableRow.appendChild(actionsColumn);
        }
        return tableRow;
    }
  function createRowForSurrenderRequestTable(dataRow) {
      tableRow = document.createElement("tr");
      toolcodeColumn = document.createElement("td");
      toolcodeColumn.innerHTML = dataRow["Tool Code"];
      toolnameColumn = document.createElement("td");
      toolnameColumn.innerHTML = dataRow["Tool Name"];
      nameColumn = document.createElement("td");
      nameColumn.innerHTML = dataRow["First Name"] + " " + dataRow["Last Name"];
      // lnameColumn = document.createElement("td");
      // lnameColumn.innerHTML = dataRow["Last Name"];
      requestdtColumn = document.createElement("td"); requestdtColumn.className = "issuetime";
      requestdtColumn.innerHTML = returnTimeInFormat(moment(new Date(dataRow["Request Datetime"])));
      resolvedtColumn = document.createElement("td"); resolvedtColumn.className = "issuetime";
      if (dataRow["Resolve Datetime"]) {
          resolvedtColumn.innerHTML = returnTimeInFormat(moment(new Date(dataRow["Resolve Datetime"])));
      }
      else {
          resolvedtColumn.innerHTML = "<i class='far fa-clock statuspending'> PENDING</i>";
      }
      // requesttypeColumn = document.createElement("td");
      // requesttypeColumn.innerHTML = dataRow["Operation"];
      resultColumn = document.createElement("td"); resultColumn.className = "result";
      resultColumn.innerHTML = dataRow["Result"];
      actionsColumn = document.createElement("td");
      approveButton = document.createElement("button");
      approveButton.className = "button is-success is-green";
      approvespan = document.createElement("span");
      approvespan.className = "icon is-small is-left left-icon";
      rejectspan = document.createElement("span");
      rejectspan.className = "icon is-small is-left left-icon";
      rejectibutton = document.createElement("i");
      rejectibutton.className = "fas fa-times";
      approveibutton = document.createElement("i");
      approveibutton.className = "fa fa-check";
      approveButton.onclick = async function (event) {
          var toolname = dataRow["Tool Name"];
          var toolcode = dataRow["Tool Code"];
          var rt = dataRow["Request Datetime"];
          var moment = require('moment-timezone');
          var x = moment();
          x = x.format("YYYY-MM-DD HH:mm:ss").toString();
          var reqtime = moment(new Date(rt));
          reqtime = reqtime.format("YYYY-MM-DD HH:mm:ss").toString();


          try {
              var result = await cc.surrenderTool(toolcode, x, reqtime, workshop_id);
              cc.closeConnection();
          }
          catch {
              alert1("Error in fetching your details! Please check your internet connection.");
              console.log("Error in surrenderTool ! Please try again.");
          }
          if (result == 1) {
              alert1("The tool has been successfully surrendered!");
              document.getElementById("surrender-request-table").getElementsByTagName("tbody")[0].innerHTML = "";
              initiateSetup();
              resetVariables();
          }
      }
      approvespan.appendChild(approveibutton);
      approveButton.appendChild(approvespan);
      rejectButton = document.createElement("button");
      rejectButton.className = "button is-danger";
      rejectButton.onclick = async function (event) {
          var toolcode = dataRow["Tool Code"];
          var rt = dataRow["Request Datetime"];
          var moment = require('moment-timezone');
          var x = moment();
          x = x.format("YYYY-MM-DD HH:mm:ss").toString();
          var reqtime = moment(new Date(rt));
          reqtime = reqtime.format("YYYY-MM-DD HH:mm:ss").toString();
          try {
              var result = await cc.rejectSurrender(toolcode, x, reqtime, workshop_id);
              cc.closeConnection();
              alert1("The tool surrender has been successfully rejected!");
          }
          catch {
              alert1("Error in fetching your details! Please chech your internet connection.");
              console.log("Error in rejectSurrender ! Please try again.");
          }
          document.getElementById("surrender-request-table").getElementsByTagName("tbody")[0].innerHTML = "";

          resetVariables();
          initiateSetup();
      }

      rejectspan.appendChild(rejectibutton);
      rejectButton.appendChild(rejectspan);
      actionsColumn.appendChild(approveButton);
      actionsColumn.appendChild(rejectButton);
      tableRow.appendChild(nameColumn);
      tableRow.appendChild(toolnameColumn);
      tableRow.appendChild(toolcodeColumn);

      tableRow.appendChild(requestdtColumn);
      tableRow.appendChild(resolvedtColumn);
      // tableRow.appendChild(requesttypeColumn);
      if (dataRow["Resolve Datetime"]) {
          tableRow.appendChild(resultColumn);
      }
      else {
          console.log("not resolved");
          tableRow.appendChild(actionsColumn);
      }
      return tableRow;
  }
  async function renewTool() {
        renew = 1;
        modifyTool();
  }
  async function modifyTool() {
        var tcode = document.getElementById("modify-tcode").value;
        var tname = document.getElementById("modify-tname").value;
        var brand = document.getElementById("modify-brand").value;
        var value = document.getElementById("modify-value").value;
        var location = document.getElementById("modify-location").value;
        var description = document.getElementById("modify-description").value;
        var warranty_ed = document.getElementById("modify-warranty-ed").value;
        var dop = document.getElementById("modify-dop").value;
        var profile = await cc.getToolProfile(modifyToolcode, workshop_id);
        var iif = null;
        if (profile[0]["Permanent"] > 1)
            iif = document.getElementById("modify-iif").value;
        if (dop == '')
            dop = null;
        var quantity = document.getElementById("modify-quantity").innerHTML;
        modifyChildren();
        if (document.getElementById("modify-pok").checked == true) {
            var isKit = 1;
        }
        else { var isKit = 0; }
        if (document.getElementById("modify-maintained").checked == true) {
            var maintained = 1;
            var amc = document.getElementById("amc").value;
            var amcpro = document.getElementById("amcpro").value;
            var amccon = document.getElementById("amccon").value;
            var amcpersd = document.getElementById("amcpersd").value;
            var amcpered = document.getElementById("amcpered").value;
            var dolm = document.getElementById("dolm").value;
            var inf = document.getElementById("if").value + " " + document.getElementById("duration").value;
        }
        else { var maintained = 0; }
        var x = moment();
        x = x.format("YYYY-MM-DD").toString();
        if (renew == 1) {
            dop = x;
            dolm = x;
            //console.log(dop + " " + dolm);
        }
        var addtcode, newtcode;
        var q = 1;
        var quan = 1;
        if (quantity > 1) {
            var n = tcode.lastIndexOf("/");
            addtcode = tcode.substring(0, n);
        }
        else if (addedQuantity > 0) {
            addtcode = tcode;
            tcode = tcode + "/1";
        }
        var maxtcode = 0;
        console.log(tname + " " + workshop_id);
            try {
                var maxtcode = await cc.getMaxToolCode(tname, workshop_id);
                console.log("tryyyy");
                cc.closeConnection();
            }
            catch {
                alert1("Error in fetching details! Please try again.");
                console.log("Error in getMaxToolCode() ! Please try again.");
            }
            console.log(maxtcode);
            var x = maxtcode[0]["maxtcode"].lastIndexOf("/");

            if (x > 0 && maxtcode[0]["maxtcode"].length > x)
                quan = maxtcode[0]["maxtcode"].substring(x + 1);
            if(!dop)
              dop = '1970-01-01';


        if (isKit == 0 & maintained == 0) {
            var at = await cc.modifyTool(tcode, tname, brand, value, location, description, dop, warranty_ed, maintained, modifyToolcode, workshop_id);
            for (var i = (parseInt(quan) + 1); i <= (parseInt(quan) + parseInt(addedQuantity)); i++) {
                newtcode = addtcode + "/" + i;
                //console.log(newtcode);
                var at = await cc.addTool(newtcode, tname, brand, value, location, description, dop, warranty_ed, q, maintained, permanent, workshop_id);
            }
        }
        else if (isKit == 0 & maintained == 1) {
            var at = await cc.modifyToolm(tcode, tname, brand, value, location, description, dop, warranty_ed, maintained, iif, amc, amcpro, amccon, amcpersd, amcpered, dolm, inf, modifyToolcode, workshop_id);
            for (var i = (parseInt(quan) + 1); i <= (parseInt(quan) + parseInt(addedQuantity)); i++) {
                newtcode = addtcode + "/" + i;
                var at = await cc.addMaintainedTool(newtcode, tname, brand, value, location, description, dop, warranty_ed, q, maintained, amc, amcpro, amccon, amcpersd, amcpered, dolm, inf, permanent, workshop_id);
            }
        }
        else if (isKit == 1 & maintained == 0) {
            var at = await cc.modifyTools(childrenlist, tcode, tname, brand, value, location, description, dop, warranty_ed, maintained, modifyToolcode, kit.length, permanent, workshop_id);
            for (var i = (parseInt(quan) + 1); i <= (parseInt(quan) + parseInt(addedQuantity)); i++) {
                newtcode = addtcode + "/" + i;
                var at = await cc.addToolWithChildren(childrenlist, newtcode, tname, brand, value, location, description, dop, warranty_ed, q, maintained, permanent, workshop_id);
            }
        }
        else if (isKit == 1 & maintained == 1) {
            var at = await cc.modifyToolsm(childrenlist, tcode, tname, brand, value, location, description, dop, warranty_ed, maintained, amc, amcpro, amccon, amcpersd, amcpered, dolm, inf, modifyToolcode, kit.length, permanent, workshop_id);
            for (var i = (parseInt(quan) + 1); i <= (parseInt(quan) + parseInt(addedQuantity)); i++) {
                newtcode = addtcode + "/" + i;
                var at = await cc.addMaintainedToolWithChildren(childrenlist, newtcode, tname, brand, value, location, description, dop, warranty_ed, q, maintained, amc, amcpro, amccon, amcpersd, amcpered, dolm, inf, permanent, workshop_id);
            }
        }
        addedQuantity = 0;
        removeTools.forEach(async function (tool) {
            console.log(tool["code"]);
            await cc.removeTool(tool["code"], workshop_id);

        });
        document.getElementById("amc").value = '';
        document.getElementById("amcpro").value = '';
        document.getElementById("amccon").value = '';
        document.getElementById("amcpersd").value = '';
        document.getElementById("amcpered").value = '';
        document.getElementById("dolm").value = '';
        document.getElementById("if").value = '';
        document.getElementById("child-parts-tbody").innerHTML = "";
        if (at == 1) {
            alert1("Tool Updated Successfully");
            if (selectedFile) {
                var storageRef = firebase.storage().ref();
                var extension = selectedFile.name.substring(selectedFile.name.indexOf('.'));
                var fileRef = storageRef.child(tcode + extension);
                fileRef.put(selectedFile).then(function (snapshot) {
                    alert1("Inspection sheet linked successfully.")
                }).catch(error => alert1("Error in linking inspection sheet."));
            }
        }
        else
            alert1("Attempt unsuccessful. Please try again!");
        closeModal();
        //window.location.reload(true);   
        if (permanent == 0)
            document.getElementById("rmToolsDiv").style.display = "block";
        else
            document.getElementById("modifyHandToolsDiv").style.display = "block";
        document.getElementById("modify-hand-tool-tbody").innerHTML = "";
        document.getElementById("modify-tool-tbody").innerHTML = "";
        resetVariables();
        initiateSetup();
    }
    function modifyChildren() {
        childrenlist = [];
        allRows = document.getElementById("update-child-parts-tbody").getElementsByTagName("tr");
        console.log(allRows);
        for (var i = 0; i < allRows.length; i++) {
            childrenlist.push({ "code": allRows[i].getElementsByTagName("td")[1].getElementsByTagName("input")[0].value, "name": allRows[i].getElementsByTagName("td")[2].getElementsByTagName("input")[0].value });
        }
        console.log(childrenlist);
        // closeUpdatePokModal();
    }
    
    async function removeTool() {
        try {
            var issued = await cc.getToolProfile(modifyToolcode, workshop_id);
        }
        catch{
            alert1("Attempt unsuccessful. Please try again!");
        }
        if (issued[0]["Allocated To"] == 1 && issued[0]["Permanent"] == 0) {
            alert1("Please return the tool before removing it.");
        }
        else {
            var at = await cc.removeTool(modifyToolcode, workshop_id);
            if (at == 1) {
                alert1("Tool Deleted Successfully");
            }
            else
                alert1("Attempt unsuccessful. Please try again!");
            closeModal();
            document.getElementById("modify-hand-tool-tbody").innerHTML = "";
            document.getElementById("modify-tool-tbody").innerHTML = "";
            initiateSetup();
            resetVariables();
        }
    }
    
  // function fromTechnicianChange(newTechnicianValue) {
  //       technicianBox = document.getElementById("from-technician-box");
  //       if (newTechnicianValue) {
  //           technicianBox.getElementsByClassName("dropdown-content")[0].innerHTML = "";
  //           toBeShownTechnicians = allTechnicians.filter(function (technician) {
  //               if(technician["Authorised"] == 0)
  //                   return (technician["First Name"] + " " + technician["Last Name"] + " " + technician["Emp ID"]).toLowerCase().replace(/\s/g, '').includes(newTechnicianValue.replace(/\s/g, '').toLowerCase());
  //               else
  //                   return;
  //           });
  //           toBeShownTechnicians.forEach(technician => {
  //               optionNode = document.createElement("div");
  //               optionNode.className = "dropdown-item";
  //               optionNode.innerHTML = technician["First Name"] + " " + technician["Last Name"] + " (" + technician["Emp ID"] + ")";
  //               optionNode.onclick = async () => {
  //                   document.getElementById("")
  //                   fromSelectedTechnicianID = technician["Emp ID"];
  //                   try {
  //                       var fromTechnicianTools = await cc.getMyTools(fromSelectedTechnicianID, workshop_id);
  //                       cc.closeConnection();
  //                   }
  //                   catch {
  //                       alert1("Error in fetching your details! Please n.");
  //                       console.log("Error in getMyTools ! Please try again.");
  //                   }
  //                   document.getElementById("from-technician-tbody").innerHTML = "";
  //                   fromTechnicianTools.forEach(fromTool => {
  //                       document.getElementById("from-technician-tbody").appendChild(createRowForFromTechnicianChangeTable(fromTool));
  //                   });
  //                   document.getElementById("from-technician-name").innerHTML = technician["First Name"] + " " + technician["Last Name"];
  //                   document.getElementById("from-technician-id").innerHTML = technician["Emp ID"];
  //                   document.getElementById("from-technician-details").style.display = "block";
  //                   technicianBox.className = "dropdown";
  //                   if (fromSelectedTechnicianID && toSelectedTechnicianID) {
  //                       document.getElementById("transfer-tools-button").removeAttribute("disabled");
  //                   }
  //               };
  //               technicianBox.getElementsByClassName("dropdown-content")[0].appendChild(optionNode);
  //           })

  //           technicianBox.className = "dropdown is-active";
  //       }
  //       else {
  //           technicianBox.className = "dropdown";
  //       }
  //   }
  //   function toTechnicianChange(newTechnicianValue) {
  //       technicianBox = document.getElementById("to-technician-box");
  //       if (newTechnicianValue) {
  //           technicianBox.getElementsByClassName("dropdown-content")[0].innerHTML = "";
  //           toBeShownTechnicians = allTechnicians.filter(function (technician) {
  //               if(technician["Authorised"] == 0)
  //                   return (technician["First Name"] + " " + technician["Last Name"] + " " + technician["Emp ID"]).toLowerCase().replace(/\s/g, '').includes(newTechnicianValue.replace(/\s/g, '').toLowerCase());
  //               else
  //                   return;
  //           });
  //           toBeShownTechnicians.forEach(technician => {
  //               optionNode = document.createElement("div");
  //               optionNode.className = "dropdown-item";
  //               optionNode.innerHTML = technician["First Name"] + " " + technician["Last Name"] + " (" + technician["Emp ID"] + ")";
  //               optionNode.onclick = async () => {
  //                   document.getElementById("")
  //                   toSelectedTechnicianID = technician["Emp ID"];
  //                   document.getElementById("to-technician-name").innerHTML = technician["First Name"] + " " + technician["Last Name"];
  //                   document.getElementById("to-technician-id").innerHTML = technician["Emp ID"];
  //                   document.getElementById("to-technician-details").style.display = "block";
  //                   technicianBox.className = "dropdown";
  //                   if (fromSelectedTechnicianID && toSelectedTechnicianID) {
  //                       document.getElementById("transfer-tools-button").removeAttribute("disabled");
  //                   }
  //               };
  //               technicianBox.getElementsByClassName("dropdown-content")[0].appendChild(optionNode);
  //           })

  //           technicianBox.className = "dropdown is-active";
  //       }
  //       else {
  //           technicianBox.className = "dropdown";
  //       }
  //   }
    
    async function checkAllTransfer(input)
    {
      if(input == '0')
        tr = document.getElementById("from-technician-tbody").getElementsByTagName("tr");
      if(input == '1')
        tr = document.getElementById("to-technician-tbody").getElementsByTagName("tr");
        for (var i = 0; i < tr.length; i++) {
          tr[i].getElementsByTagName("td")[0].getElementsByTagName("input")[0].checked = true;
        }
    }
    async function transferTools(direction) {
        toolList = [];
        if(direction == '0')
          tr = document.getElementById("from-technician-tbody").getElementsByTagName("tr");
        if(direction == '1')
          tr = document.getElementById("to-technician-tbody").getElementsByTagName("tr");
          for (var i = 0; i < tr.length; i++) {
            if (tr[i].getElementsByTagName("td")[0].getElementsByTagName("input")[0].checked == true) {
                toolList.push(tr[i].getElementsByTagName("td")[1].innerHTML);
            }
        }
        console.log(toolList);
        try {
          if(direction == '0')
            var tt = await cc.transferTools(fromSelectedTechnicianID, toSelectedTechnicianID, toolList, workshop_id);
          if(direction == '1')
            var tt = await cc.transferTools(toSelectedTechnicianID, fromSelectedTechnicianID, toolList, workshop_id);
            cc.closeConnection();
        }
        catch {
            alert1("Error in fetching your details! Please try again.");
            console.log("Error in transferTools ! Please try again.");
        }

        if (tt === 1) {
            // document.getElementById("from-technician-details").style.display = "none";
            // document.getElementById("to-technician-details").style.display = "none";
            alert1("Tools transfered successfully");
            $(".transfer-tools-modal").hide();
        }
        try {
              var fromTechnicianTools = await cc.getMyTools(fromSelectedTechnicianID, workshop_id);
              var toTechnicianTools = await cc.getMyTools(toSelectedTechnicianID, workshop_id);
              cc.closeConnection();
            }
        catch {
                alert1("Error in fetching your details! Please n.");
                console.log("Error in getMyTools ! Please try again.");
              }
          console.log(fromTechnicianTools);
        if(fromto == '0')
        {
          document.getElementById("from-technician-tbody").innerHTML = '';
          fromTechnicianTools.forEach(fromTool => {
                document.getElementById("from-technician-tbody").appendChild(createRowForFromTechnicianChangeTable(fromTool));
          });
          // fromSelectedTechnicianID = selectedTechnicianID;
        }
        else if(fromto == '1')
        {
          // toSelectedTechnicianID = selectedTechnicianID;
          document.getElementById("to-technician-tbody").innerHTML = '';
          fromTechnicianTools.forEach(fromTool => {
                document.getElementById("to-technician-tbody").appendChild(createRowForFromTechnicianChangeTable(fromTool));
          });
        }
        initiateSetup();
        resetVariables();
    }
    
    function resetVariables() {
        cartItems = [];
        assignToolsSelectedTechnician = undefined;
        selectedTechnicianID = '';
        childrenlist = [];
        modifyToolcode = undefined;
        kit = undefined;
        noOfChildren = 0;
        permanent = 0;
        selectedFile = null;
        fromSelectedTechnicianID = '';
        toSelectedTechnicianID = '';
        workshopDetails = null;
        workshopIssuer = null;
    }


  async function loadCurrencies() {
      // console.log("loadCurrencies()");
      // console.log(defaultCurrency);
      try {
          if (defaultCurrency) {

          } else {
              defaultCurrency = await getDefaultCurrencyCommon(workshop_id);
          }
      }
      catch{
          console.log("error in loadCurrencies(), managerhome");
          alert1("We could not load your currency");
          return;
      }
      document.getElementById("currencyformat").innerHTML = "";
      var currencies = getCurrencies();
      currencies.forEach(currency => {
          var option = document.createElement("option");
          option.value = currency.currencyCode;
          if (currency.currencyCode == defaultCurrency["Default Currency Code"]) {
              option.selected = true;
          }
          option.setAttribute("label", currency.currencyName + " (" + currency.currencySymbol + ")")
          option.innerHTML = currency.currencySymbol;
          document.getElementById("currencyformat").appendChild(option);
      });
      currencyStaticButtons = document.getElementsByClassName("currencyStatic");
      for (var i = 0; i < currencyStaticButtons.length; i++) {
          currencyStaticButtons[i].innerHTML = defaultCurrency["Default Currency Symbol"];
      }

  }
  async function loadSignUpRequests() {
      try {
          var newUserRequests = await cc.getNewUserRequests(workshop_id);
          // console.log(newUserRequests);
          cc.closeConnection();
          document.getElementById("new-user-request-table").getElementsByTagName("tbody")[0].innerHTML = "";
          if (newUserRequests) {
              newUserRequests.forEach(dataRow => {
                  try {
                      document.getElementById("new-user-request-table").getElementsByTagName("tbody")[0].appendChild(createRowForNewUserRequestTable(dataRow));
                  }
                  catch {
                      console.log("failed to load user signup request" + dataRow);
                  }
              })
          }
      }
      catch (err) {
          console.log(err);
          alert1("Error in fetching your details! Please n.");
          console.log("Error in getNewUserRequests ! Please try again.");
      }
  }
  function createDivForRequestsDiv(dataRow) {
  // console.log(dataRow);
  existingSlips = document.getElementById("pending-request-div").getElementsByClassName("card");
  if (existingSlips) {
    for (var i = 0; i < existingSlips.length; i++) {
      if ((existingSlips[i].getElementsByClassName("requisition-slip-name")[0].title == dataRow["Emp ID"]) && (existingSlips[i].getElementsByClassName("requisition-slip-date")[0].innerHTML) == new Date(dataRow["Request Datetime"]).toLocaleString()) {
        listItemTag = document.createElement("li");
        listItemTag.className = "list-group-item requestitem";
        listItemTag.innerHTML = dataRow["Tool Name"] + " (" + dataRow["Tool Code"] + ')';

        // lidiv = document.createElement("div");
        // lidiv.className = "columns";

        toolnameColumn = document.createElement("div");
        toolnameColumn.className = "column is-10";
        toolnameColumn.title = dataRow["Tool Code"];
        toolnameColumn.innerHTML = dataRow["Tool Name"] + " (" + dataRow["Tool Code"] + ')';
        // timeColumn = document.createElement("td");
        // timeColumn.innerHTML = "Time : " + new Date(dataRow["Request Datetime"]).toLocaleString();
        // removeDiv = document.createElement("div");
        // removeDiv.className = "column is-2 center";


        removeIcon = document.createElement("button");
        removeIcon.className = "btn-close btn-close-white";
        removeIcon.onclick = async function (event) 
        {
          try 
          {
            var x = moment();
            x = x.format("YYYY-MM-DD HH:mm:ss").toString();
            // dataRow["Request Datetime"] = dataRow["Request Datetime"].format("YYYY-MM-DD HH:mm:ss").toString();
            var requestTime = moment(new Date(dataRow["Request Datetime"])).format("YYYY-MM-DD HH:mm:ss");
            console.log(requestTime);
            var done = await cc.rejectIssueMultiple([dataRow["Tool Code"]], x, requestTime, dataRow["Emp ID"], workshop_id);
            console.log(done);
            if (done == 1) {
              // console.log("abcd");
              alert1('Rejected');
              // console.log(event.srcElement.parentElement.parentElement.parentElement.remove());
            }
            else {
              alert1("We faced an issue. Please try again later (done).");
            }
            return;
          }
          catch{
            alert1("We faced an issue. Please try again later.");
            return;
          }
        }
  

        listItemTag.appendChild(removeIcon);
        // removeDiv.appendChild(removeIcon);
        // lidiv.appendChild(toolnameColumn);
        // lidiv.appendChild(removeDiv);
        // listItemTag.appendChild(lidiv);

        existingSlips[i].getElementsByTagName("ul")[0].appendChild(listItemTag);
        return null;
      }
    }
  }

  reqDiv = document.createElement("div");
  reqDiv.className = "card";

  headerDiv = document.createElement("div");
  headerDiv.className = "card-header";
  headerDiv.innerHTML = "Request";
  bodyDiv = document.createElement("div");
  bodyDiv.className = "card-body";
  titleDiv = document.createElement("div");
  titleDiv.className = "card-title";
  empname = document.createElement("h5");
  empname.className = "requisition-slip-name";
  empname.title = dataRow["Emp ID"];
  empname.innerHTML = dataRow["First Name"] + ' ' + dataRow["Last Name"];

  reqdt = document.createElement("p");
  reqdt.className = "requisition-slip-date";
  reqdt.innerHTML = dataRow["Request Datetime"].toLocaleString();

  // requestTime = requestTime.format("YYYY-MM-DD HH:mm:ss");
  titleDiv.appendChild(empname);
  titleDiv.appendChild(reqdt);
  // headerDiv.appendChild(empname);
  // headerDiv.appendChild(reqdt);
  bodyDiv.appendChild(titleDiv);

  unorderedListTag = document.createElement("ul"); // list-group requestlist 
  unorderedListTag.className = "list-group requestlist";
  listItemTag = document.createElement("li");
  listItemTag.className = "list-group-item requestitem";
  listItemTag.innerHTML = dataRow["Tool Name"] + " (" + dataRow["Tool Code"] + ')';

  removeIcon = document.createElement("button");
  removeIcon.className = "btn-close btn-close-white";
  // removeIcon.aria-label = "Close";
  // removeIcon.style = "cursor: pointer;";
  removeIcon.onclick = async function (event) {
    try {
      var x = moment();
      x = x.format("YYYY-MM-DD HH:mm:ss").toString();
      // dataRow["Request Datetime"] = dataRow["Request Datetime"].format("YYYY-MM-DD HH:mm:ss").toString();
      var requestTime = moment(new Date(dataRow["Request Datetime"])).format("YYYY-MM-DD HH:mm:ss");
      console.log(requestTime);
      var done = await cc.rejectIssueMultiple([dataRow["Tool Code"]], x, requestTime, dataRow["Emp ID"], workshop_id);
      console.log(done);
      if (done == 1) {
        console.log("abcd");
        // alert1("Rejected");
        initiateSetup();
        // console.log(event.srcElement.parentElement.parentElement.parentElement.remove());
      }
      else {
        alert1("We faced an issue. Please try again later (done).");
      }
      return;
    }
    catch{
      alert1("We faced an issue. Please try again later.");
      return;
    }
    

  }
  

  listItemTag.appendChild(removeIcon);
  // lidiv.appendChild(toolnameColumn);
  // liNode.appendChild(toolNode);
  // liNode.appendChild(removeDiv);
  // listNode.appendChild(liNode);
  // listItemTag.appendChild(lidiv);
  unorderedListTag.appendChild(listItemTag);
  bodyDiv.appendChild(unorderedListTag);


  footerDiv = document.createElement("div");
  footerDiv.className = "btn_grp";

  acceptAllButton = document.createElement("button");
  acceptAllButton.className = "btn accept";
  acceptAllButton.innerHTML = "Accept All";
  acceptAllButton.onclick = async function (event) {
    toolcodearray = [];
    var displayMessage = '';
    var x = moment();
    x = x.format("YYYY-MM-DD HH:mm:ss").toString();
    var y = moment();
    //workshop closing hours
    y.set("hours", 19);
    y.set("minutes", 0);
    y.set("seconds", 0);
    y = y.format("YYYY-MM-DD HH:mm:ss").toString();
    var reqtime = moment(new Date(dataRow["Request Datetime"]));
    reqtime = reqtime.format("YYYY-MM-DD HH:mm:ss").toString();
    var currentSlip = event.srcElement.parentElement.parentElement;
    litags = currentSlip.getElementsByClassName("list-group-item requestitem");
    for (var i = 0; i < litags.length; i++) {
      var toolcode = litags[i].innerText;
      var n1 = toolcode.lastIndexOf("(");
      var n2 = toolcode.lastIndexOf(")");
      toolcode = toolcode.substring(n1 + 1, n2);
      var toolname = litags[i].innerText.substring(0,n1-1);
      try {
        var issued = await cc.getToolProfile(toolcode, workshop_id);
        console.log(issued[0]["Allocated To"]);
        var empdet = await cc.getUserDetailsFromEmpID(issued[0]["Allocated To"]);
      }
      catch {
        alert1("Attempt unsuccessful. Please try again!");
        return;
      }
      if (issued[0]["Allocated To"] != null && issued[0]["Permanent"] == 0) {
        console.log("issued");
        displayMessage = displayMessage + issued[0]["Tool Name"] + "(" + issued[0]["Tool Code"] + ") has already been issued by " + empdet[0]["First Name"] + " " + empdet[0]["Last Name"] + "<br>";
      }
      else {
        try {
          var result = await cc.issueTools(toolcode, toolname, dataRow["Emp ID"], x, y, dataRow["First Name"], dataRow["Last Name"], reqtime, workshop_id);
          cc.closeConnection();
        }
        catch {
          alert1("We faced an error. Some tools might not have been accepted.");
          console.log("Error in issueTools ! Please try again.");
          return;
        }
      }
    }
    // if(displayMessage!= ''){
    //   alert1(displayMessage);
    // }else{
    //   alert1("Accepted.");
    // }
    initiateSetup();
    // console.log(event.srcElement.parentElement.parentElement.remove());
  }
  rejectAllButton = document.createElement("button");
  rejectAllButton.className = "btn reject";
  rejectAllButton.innerHTML = "Reject All";
  rejectAllButton.onclick = async function (event) {
    toolcodearray = [];
    var reqtime = moment(new Date(dataRow["Request Datetime"]));
    reqtime = reqtime.format("YYYY-MM-DD HH:mm:ss").toString();
    var currentSlip = event.srcElement.parentElement.parentElement;
    litags = currentSlip.getElementsByClassName("list-group-item requestitem");
    for (var i = 0; i < litags.length; i++) {
      var toolcode = litags[i].innerText;
      var n1 = toolcode.lastIndexOf("(");
      var n2 = toolcode.lastIndexOf(")");
      toolcode = toolcode.substring(n1 + 1, n2);
      toolcodearray.push(toolcode);
    }
    console.log(toolcodearray);
    try {
      var x = moment();
      x = x.format("YYYY-MM-DD HH:mm:ss").toString();
      var done = await cc.rejectIssueMultiple(toolcodearray, x, reqtime, dataRow["Emp ID"], workshop_id);
      if (done == 1) {
        // alert1('Rejected All');
        initiateSetup();
        // console.log(event.srcElement.parentElement.parentElement.remove());
      }
      else {
        alert1("We faced an issue. Please try again later.");
      }
      return;
    }
    catch{
      alert1("We faced an issue. Please try again later.");
      return;
    }
  }

  footerDiv.appendChild(acceptAllButton);
  footerDiv.appendChild(rejectAllButton);

  reqDiv.appendChild(headerDiv);
  reqDiv.appendChild(bodyDiv);
  reqDiv.appendChild(footerDiv);

  return reqDiv;

  
}
  async function loadRequisitionSlips() {
      document.getElementById("pending-request-div").innerHTML = "";
      try {
        req = await cc.getPendingRequests(workshop_id);
        cc.closeConnection();
      }
      catch {
        alert1("Error in fetching details! Please try again.");
        console.log("Error in getAllTools! Please try again.");
      }
      // console.log(req);
      noPending = req.length;
      if(noPending === 0){
        document.getElementById("pending-request-div").style.height = "10vh";
        document.getElementById("pending-request-div").innerHTML = '<div class="columns is-centered" style="width: 100%;overflow: hidden"><div class="column is-centered" style="text-align: center;"><h1 class="subtitle">No Pending Requests</h1></div></div>';
      }

      req.forEach(dataRow => {
        var createdElement = createDivForRequestsDiv(dataRow);
        if (createdElement) {
          document.getElementById("pending-request-div").appendChild(createdElement);
        }
      });
    }
  async function checklistDataModal() {
    document.getElementById("checklist-data-table").hidden = false;
    // document.getElementById("inspection-legend").hidden = false;
    document.getElementById("checklist-data-tbody").innerHTML = "";
    var e = document.getElementById("month");
    var m = e.options[e.selectedIndex].value;
    document.getElementById("month-year").innerHTML = e.options[e.selectedIndex].innerHTML;
    e = document.getElementById("year"); 
    var y = e.options[e.selectedIndex].text;
    document.getElementById("month-year").innerHTML += " " + y;
    if (m == 1 || m == 3 || m == 5 || m == 7 || m == 8 || m == 10 || m == 12) {
      var rd = 31;
      document.getElementById("29").hidden = false;
      document.getElementById("30").hidden = false;
      document.getElementById("31").hidden = false;
    }
    else if (m == 4 || m == 6 || m == 9 || m == 11) {
      var rd = 30;
      document.getElementById("29").hidden = false;
      document.getElementById("30").hidden = false;
      document.getElementById("31").hidden = true;
    }
    else if (m == 2 && y % 4 == 0 && (y % 100 != 0 || y % 400 == 0)) {
      var rd = 29;
      document.getElementById("29").hidden = false;
      document.getElementById("30").hidden = true;
      document.getElementById("31").hidden = true;
    }
    else if (m == 2 && y % 4 != 0) {
      var rd = 28;
      document.getElementById("29").hidden = true;
      document.getElementById("30").hidden = true;
      document.getElementById("31").hidden = true;
    }
    try {
      data = await cc.getMyTools(selectedTechnicianID, workshop_id);
      cc.closeConnection();
    }
    catch {
      alert1("Error in fetching your details! Please check your internet connection.");
      console.log("Error in getMyTools ! Please try again.");
    }
    // console.log(data);
    data.forEach(dataRow => {
      // console.log(dataRow);
      var createdElement = createRowForToolInspection(dataRow, rd);
      if (createdElement) {
        document.getElementById("checklist-data-table").getElementsByTagName("tbody")[0].appendChild(createdElement);
      }
    });
    var startDate = y + "-" + m + "-01";
    var currentDate = y + "-" + m;
    m = parseInt(m) + 1;
    if (parseInt(m) <= 9)
      m = "0" + m;
    var endDate = y + "-" + m + "-01";
    // console.log(endDate);
    var moment = require('moment-timezone');
    var x = moment();
    d = x.format("DD");
    x = x.format("YYYY-MM-DD").toString();
    for (var i = 0; i < data.length; i++) {
      var dofp = moment(new Date(data[i]["Date of Allotment"]));
      z = dofp.format("DD");
      dofp = dofp.format("YYYY-MM-DD");
      // console.log(z);
      // console.log(endDate);
      // <td class="inspdata"><i class="fas fa-square" style="color:#00ff00 ;"></i></td>
      if (endDate <= dofp) {
        // console.log(endDate + " " + dofp);
        for (var k = 0; k < rd; k++) {
          var cell = document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k + 1];
          cell.className = "inspdata";
          cell.innerHTML = '<i class="fas fa-square" style="color: #999966; ;"></i>';
        }
      }
      else if (dofp >= startDate) {
        for (var k = 0; k < z; k++) {
          var cell = document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k + 1];
          cell.className = "inspdata";
          cell.innerHTML = '<i class="fas fa-square" style="color: #999966; ;"></i>';        
        }
      }
      if (x > startDate && x < endDate) {
        // console.log(d + " " + rd);
        for (var k = d; k < rd;) {
          k++;
          var cell = document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k];
          cell.className = "inspdata";
          cell.innerHTML = '<i class="fas fa-square" style="color: #999966; ;"></i>';
        }
      }
    }

    if (x < startDate) {
      for (var i = 0; i < data.length; i++) {

        for (var k = 0; k < rd; k++) {
          var cell = document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k + 1];
          cell.className = "inspdata";
          cell.innerHTML = '<i class="fas fa-square" style="color: #999966; ;"></i>';
        }
      }
      return;
    }
    var sd = "2020-01-01";
    var ed = "2030-01-01";
    for (var i = 0; i < data.length; i++) {
      var repairHistory = null;
      try {
        repairHistory = await cc.getRepairHistoryOfATool(data[i]["Tool Code"], sd, ed, workshop_id);
      }
      catch {
        console.log("error in getRepairHistoryOfATool");
      }
      // console.log(repairHistory);
      for (var j = 0; j < repairHistory.length; j++) {

        var repdt = moment(new Date(repairHistory[j]["Report Datetime"]));
        var d = repdt.format("DD");
        repdt = repdt.format("YYYY-MM-DD");
        var resdt = moment(new Date(repairHistory[j]["Resolve Datetime"]));
        var resd = resdt.format("DD");
        resdt = resdt.format("YYYY-MM-DD");
        // console.log(repdt + " " + resdt);
        if ((repdt > endDate) || (resdt && resdt < startDate && resdt > sd)) {
          // console.log("not this month" + repdt + " " + endDate + " " + resdt + repairHistory[j]["Tool Name"]);
          continue;
        }// if(repdt < startDate && !resdt)
        // {
        //     for (var k = d; k < rd;) {
        //     k++;
        //     document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k].style.background = "grey";
        //     } 
        // }
        // var d = repairHistory[j]["Report Datetime"].getDate();
        e = document.getElementById("month");
        m = e.options[e.selectedIndex].value;

        if (resdt && resdt < endDate && resdt > sd) {
          endreport = resd;
        }
        else {
          endreport = rd;
        }
        // console.log(resdt + " " + sd + " " + endreport);
        if ((repdt < startDate)) {
          d = 0;
        }
        // console.log(d + " " + rd);
        // console.log(endreport);
        for (var k = d; k <= endreport;k++) {
          var curDate = currentDate += "-" + k;
          // k++;
          if (document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k].innerHTML == '<i class="fas fa-square" style="color: #999966; ;"></i>')
            break;
          // if(x<curDate)
          // {
          // console.log("report");
          //     document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k + 1].style.background = "grey";
          // }
          if (repairHistory[j]["Cause"] == "Missing")
          {
            var cell = document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k + 1];
            cell.className = "inspdata";
            cell.innerHTML = '<i class="fas fa-square" style="color: yellow ;"></i>';
          }
          else if (repairHistory[j]["Cause"] == "damaged")
          {
            var cell = document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k + 1];
            cell.className = "inspdata";
            cell.innerHTML = '<i class="fas fa-square" style="color: red ;"></i>';
          }          
          else if (repairHistory[j]["Cause"] == "damaged but functional")
          {
            var cell = document.getElementById("checklist-data-table").getElementsByTagName("tr")[i + 1].getElementsByTagName("td")[k + 1];
            cell.className = "inspdata";
            cell.innerHTML = '<i class="fas fa-square" style="color: orange ;"></i>';
          }        
        }
      }
    }
  }
  function createRowForToolInspection(dataRow, rd) {
    tableRow = document.createElement("tr");
    toolnameColumn = document.createElement("td"); 
    // toolnameColumn.className = "tname-inspection";
    toolnameColumn.innerHTML = dataRow["Tool Code"];
    tableRow.appendChild(toolnameColumn);

    for (var i = 0; i < rd; i++) {
      oneColumn = document.createElement("td");
      oneColumn.className = "inspdata";
      oneColumn.innerHTML = '<i class="fas fa-square" style="color: #00ff00 ;"></i>';
      tableRow.appendChild(oneColumn);
    }
    return tableRow;
  }
  function exportDivAsPDF(x) {
    document.getElementById("loader").removeAttribute("hidden");
    generatePDFForDiv(x);
  }
  function exportAsPDF(x, y) {
    document.getElementById("loader").removeAttribute("hidden");
    generatePDF(x, y);
  }
  function autocomplete(inp, arr, temp) {
    /*the autocomplete function takes two arguments,
    the text field element and an array of possible autocompleted values:*/
    var currentFocus;
    /*execute a function when someone writes in the text field:*/
    inp.addEventListener("input", function(e) {
        var a, b, i, val = this.value;
        /*close any already open lists of autocompleted values*/
        closeAllLists();
        if (!val) { return false;}
        currentFocus = -1;
        /*create a DIV element that will contain the items (values):*/
        a = document.createElement("DIV");
        a.setAttribute("id", this.id + "autocomplete-list");
        a.setAttribute("class", "autocomplete-items");
        /*append the DIV element as a child of the autocomplete container:*/
        this.parentNode.appendChild(a);
        /*for each item in the array...*/
        for (i = 0; i < arr.length; i++) {
          /*check if the item starts with the same letters as the text field value:*/
          if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
            /*create a DIV element for each matching element:*/
            b = document.createElement("DIV");
            /*make the matching letters bold:*/
            b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
            b.innerHTML += arr[i].substr(val.length);
            /*insert a input field that will hold the current array item's value:*/
            b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
            /*execute a function when someone clicks on the item value (DIV element):*/
            b.addEventListener("click", async function(e) {
                /*insert the value for the autocomplete text field:*/
                inp.value = this.getElementsByTagName("input")[0].value;
                selectedTechnicianID = inp.value;
                var n1 = selectedTechnicianID.lastIndexOf("(");
                var n2 = selectedTechnicianID.lastIndexOf(")");
                selectedTechnicianID = selectedTechnicianID.substring(n1+1,n2);
                console.log(selectedTechnicianID);
                if(temp == '0')
                {
                  document.getElementById("selected-technician-inspection").innerHTML = inp.value;
                  var user = await cc.getUserDetailsFromEmpID(selectedTechnicianID);
                  console.log(user);
                  document.getElementById("selected-company-inspection").innerHTML = user[0]["Company"];
                  checklistDataModal();
                }
                else if(temp == '1')
                {
                  event.stopPropagation();
                  var dataRows = await cc.getToolProfile(selectedTechnicianID, workshop_id);
                  dataRow = dataRows[0];
                  console.log(dataRow);
                  document.getElementById("info-toolcode").innerHTML = dataRow["Tool Code"];
                  document.getElementById("info-tool").innerHTML = dataRow["Tool Name"] + " (" + dataRow["Tool Code"] + ")";
                  document.getElementById("info-toolname").innerHTML = dataRow["Tool Name"];
                  if(dataRow["Brand"])
                    document.getElementById("info-toolspec").innerHTML = dataRow["Brand"];
                  document.getElementById("info-tooldescription").innerHTML = dataRow["Description"];
                  if(!dataRow["Description"])
                    document.getElementById("info-tooldescription").innerHTML = "";
                  // document.getElementById("info-image").src = dataRow["Photo"];
                  var dop = moment(new Date(dataRow["Date of Purchase"])).format("DD-MM-YYYY").toString();
                  if(dop != '01-01-1970')
                    document.getElementById("info-tooldop").innerHTML = dop;
                  
                  if (dataRow["Value"]) {
                    document.getElementById("info-toolcost").innerHTML = defaultCurrency["Default Currency Symbol"] + dataRow["Value"];
                  } else {
                    document.getElementById("info-toolcost").innerHTML = "NA";
                  }
                  document.getElementById("info-toollocation").innerHTML = dataRow["Location"];
                  if (dataRow["Permanent"] != 1) {
                    document.getElementById("info-toollocation").hidden = false;
                  }
                  else {
                    document.getElementById("info-toollocation").hidden = true;
                  }
                  if (dataRow["Permanent"] == 5 || dataRow["Permanent"] == 6) {
                    document.getElementById("info-toolquantity").innerHTML = dataRow["Quantity"];
                    document.getElementById("info-tooltype").innerHTML = "Material";
                  }
                  else if(dataRow["Permanent"] == 0)
                  document.getElementById("info-tooltype").innerHTML = "Special Tool";
                  else if(dataRow["Permanent"] == 1)
                  document.getElementById("info-tooltype").innerHTML = "Hand Tool";
                  else if(dataRow["Permanent"] == 4)
                  document.getElementById("info-tooltype").innerHTML = "Asset";
                  else if(dataRow["Permanent"] == 2 || dataRow["Permanent"] == 3)
                  document.getElementById("info-tooltype").innerHTML = "Equipment";
                  // document.getElementById("modal-toolchildren").innerHTML = "Child Parts: ";
                  try {
                    var children = await cc.getChildParts(dataRow["Tool Code"]);
                  }
                  catch {
                    alert1("Error in fetching details! Please try again.");
                    console.log("Error in getChildParts! Please try again.");
                  }
                  if (children.length) {
                    k = 0;
                    document.getElementById("child-parts-profile-table").hidden = false;
                    children.forEach(dataRow => {
                      document.getElementById("child-parts-profile-tbody").insertRow(0).innerHTML = '<tr><td id="k"></td><td id="child-profile-tcode"></td><td id="child-profile-tname"></td></tr>';
                      document.getElementById("k").innerHTML = children.length - k;
                      document.getElementById("child-profile-tcode").innerHTML = dataRow["Tool Code"];
                      document.getElementById("child-profile-tname").innerHTML = dataRow["Tool Name"];
                      k = k + 1;
                    });
                  }
                  else {
                    // document.getElementById("modal-toolchildren").innerHTML += "No Child Parts";
                    $(".childtablehide").hide();
                    $(".nochildrendiv").show();
                  }
                  var storage = firebase.storage();
                  document.getElementById("maintenance-inspection-sheet").innerHTML = "Tool Inspection Sheet: <b>Not Found</b>";
                  var pathReferencePDF = storage.ref(dataRow["Tool Code"] + '.pdf');
                  pathReferencePDF.getDownloadURL().then(function (url) {
                    document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
                    a = document.createElement("a");
                    a.href = url;
                    a.innerHTML = "DOWNLOAD";
                    document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
                  }).catch(function (error) {
                    var pathReferenceDOC = storage.ref(dataRow["Tool Code"] + '.doc');
                    pathReferenceDOC.getDownloadURL().then(function (url) {
                      document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
                      a = document.createElement("a");
                      a.href = url;
                      a.innerHTML = "DOWNLOAD";
                      document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
                    }).catch(function (error) {
                      var pathReferenceDOCX = storage.ref(dataRow["Tool Code"] + '.docx');
                      pathReferenceDOCX.getDownloadURL().then(function (url) {
                        document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].innerHTML = "";
                        a = document.createElement("a");
                        a.href = url;
                        a.innerHTML = "DOWNLOAD";
                        document.getElementById("modal-toolattachment").getElementsByTagName("b")[0].appendChild(a);
                      }).catch(function (error) {
                        console.log("Tool Inspection Sheet Not Found!");
                      });
                    });
                  });
                  if (dataRow["Maintenance"] != 0) {
                    document.getElementById("maintenance-company").innerHTML = dataRow["AMC"];
                    document.getElementById("maintenance-man").innerHTML = dataRow["AMC Provider"];
                    document.getElementById("maintenance-contact").innerHTML = dataRow["AMC Contact"];
                    document.getElementById("maintenance-period").innerHTML = dataRow["AMC Period"];
                    document.getElementById("last-maintenance-date").innerHTML = (new Date(dataRow["Date of Last Maintenance"])).toDateString();
                    document.getElementById("maintenance-frequency").innerHTML = dataRow["Inspection Frequency"] + " Days";
                  }
                  else {
                    $(".noMaintenanceDiv").show();
                    $(".maintenanceTableHide").hide();
                    document.getElementById("maintenance-company").innerHTML = "";
                    document.getElementById("maintenance-man").innerHTML = "";
                    document.getElementById("maintenance-contact").innerHTML = "";
                    document.getElementById("maintenance-period").innerHTML = "";
                    document.getElementById("maintenance-frequency").innerHTML = "";
                  }

                  var options = { backdrop: "static", keyboard: true, focus: true };
                  var myModal = new bootstrap.Modal(document.getElementsByClassName("iteminfo")[0], options)
                  myModal.show();
        }
                else if(temp == '2')
                {
                  var options = { backdrop: "static", keyboard: true, focus: true };
                  var myModal = new bootstrap.Modal(document.getElementById("manager-profile"), options)
                  myModal.show();
                }
                else if(temp == '3')
                {
                  assignToolsSelectedTechnician = selectedTechnicianID;
                }
                /*close the list of autocompleted values,
                (or any other open lists of autocompleted values:*/
                closeAllLists();
            });
            a.appendChild(b);
          }
        }
    });
    /*execute a function presses a key on the keyboard:*/
    inp.addEventListener("keydown", function(e) {
        var x = document.getElementById(this.id + "autocomplete-list");
        if (x) x = x.getElementsByTagName("div");
        if (e.keyCode == 40) {
          /*If the arrow DOWN key is pressed,
          increase the currentFocus variable:*/
          currentFocus++;
          /*and and make the current item more visible:*/
          addActive(x);
        } else if (e.keyCode == 38) { //up
          /*If the arrow UP key is pressed,
          decrease the currentFocus variable:*/
          currentFocus--;
          /*and and make the current item more visible:*/
          addActive(x);
        } else if (e.keyCode == 13) {
          /*If the ENTER key is pressed, prevent the form from being submitted,*/
          e.preventDefault();
          if (currentFocus > -1) {
            /*and simulate a click on the "active" item:*/
            if (x) x[currentFocus].click();
          }
        }
    });
    function addActive(x) {
      /*a function to classify an item as "active":*/
      if (!x) return false;
      /*start by removing the "active" class on all items:*/
      removeActive(x);
      if (currentFocus >= x.length) currentFocus = 0;
      if (currentFocus < 0) currentFocus = (x.length - 1);
      /*add class "autocomplete-active":*/
      x[currentFocus].classList.add("autocomplete-active");
    }
    function removeActive(x) {
      /*a function to remove the "active" class from all autocomplete items:*/
      for (var i = 0; i < x.length; i++) {
        x[i].classList.remove("autocomplete-active");
      }
    }
    function closeAllLists(elmnt) {
      /*close all autocomplete lists in the document,
      except the one passed as an argument:*/
      var x = document.getElementsByClassName("autocomplete-items");
      for (var i = 0; i < x.length; i++) {
        if (elmnt != x[i] && elmnt != inp) {
          x[i].parentNode.removeChild(x[i]);
        }
      }
    }
    /*execute a function when someone clicks in the document:*/
    document.addEventListener("click", function (e) {
        closeAllLists(e.target);
    });
  }
  function autocompleteFromTransfer(inp, arr, fromto) {
    /*the autocomplete function takes two arguments,
    the text field element and an array of possible autocompleted values:*/
    var currentFocus;
    /*execute a function when someone writes in the text field:*/
    inp.addEventListener("input", function(e) {
        var a, b, i, val = this.value;
        /*close any already open lists of autocompleted values*/
        closeAllLists();
        if (!val) { return false;}
        currentFocus = -1;
        /*create a DIV element that will contain the items (values):*/
        a = document.createElement("DIV");
        a.setAttribute("id", this.id + "autocomplete-list");
        a.setAttribute("class", "autocomplete-items");
        /*append the DIV element as a child of the autocomplete container:*/
        this.parentNode.appendChild(a);
        /*for each item in the array...*/
        for (i = 0; i < arr.length; i++) {
          /*check if the item starts with the same letters as the text field value:*/
          if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
            /*create a DIV element for each matching element:*/
            console.log("string matched " + arr[i]);
            b = document.createElement("DIV");
            /*make the matching letters bold:*/
            b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
            b.innerHTML += arr[i].substr(val.length);
            /*insert a input field that will hold the current array item's value:*/
            b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
            /*execute a function when someone clicks on the item value (DIV element):*/
            b.addEventListener("click", async function(e) {
                /*insert the value for the autocomplete text field:*/
                console.log("asdfsdfg");
                inp.value = this.getElementsByTagName("input")[0].value;
                selectedTechnicianID = inp.value;
                var n1 = selectedTechnicianID.lastIndexOf("(");
                var n2 = selectedTechnicianID.lastIndexOf(")");
                selectedTechnicianID = selectedTechnicianID.substring(n1+1,n2);
                // console.log(selectedTechnicianID);
                // document.getElementById("from-technician-input").innerHTML = inp.value;
                var user = await cc.getUserDetailsFromEmpID(selectedTechnicianID);
                // document.getElementById("selected-company-inspection").innerHTML = user[0]["Company"];
                try {
                        var fromTechnicianTools = await cc.getMyTools(selectedTechnicianID, workshop_id);
                        cc.closeConnection();
                    }
                    catch {
                        alert1("Error in fetching your details! Please n.");
                        console.log("Error in getMyTools ! Please try again.");
                    }
                  console.log(fromTechnicianTools);
                if(fromto == '0')
                {
                  document.getElementById("from-technician-tbody").innerHTML = '';
                  fromTechnicianTools.forEach(fromTool => {
                        document.getElementById("from-technician-tbody").appendChild(createRowForFromTechnicianChangeTable(fromTool));
                  });
                  fromSelectedTechnicianID = selectedTechnicianID;
                }
                else if(fromto == '1')
                {
                  toSelectedTechnicianID = selectedTechnicianID;
                  document.getElementById("to-technician-tbody").innerHTML = '';
                  fromTechnicianTools.forEach(fromTool => {
                        document.getElementById("to-technician-tbody").appendChild(createRowForFromTechnicianChangeTable(fromTool));
                  });
                }
                /*close the list of autocompleted values,
                (or any other open lists of autocompleted values:*/
                closeAllLists();
            });
            a.appendChild(b);
          }
        }
    });
    /*execute a function presses a key on the keyboard:*/
    inp.addEventListener("keydown", function(e) {
        var x = document.getElementById(this.id + "autocomplete-list");
        if (x) x = x.getElementsByTagName("div");
        if (e.keyCode == 40) {
          /*If the arrow DOWN key is pressed,
          increase the currentFocus variable:*/
          currentFocus++;
          /*and and make the current item more visible:*/
          addActive(x);
        } else if (e.keyCode == 38) { //up
          /*If the arrow UP key is pressed,
          decrease the currentFocus variable:*/
          currentFocus--;
          /*and and make the current item more visible:*/
          addActive(x);
        } else if (e.keyCode == 13) {
          /*If the ENTER key is pressed, prevent the form from being submitted,*/
          e.preventDefault();
          if (currentFocus > -1) {
            /*and simulate a click on the "active" item:*/
            if (x) x[currentFocus].click();
          }
        }
    });
    function addActive(x) {
      /*a function to classify an item as "active":*/
      if (!x) return false;
      /*start by removing the "active" class on all items:*/
      removeActive(x);
      if (currentFocus >= x.length) currentFocus = 0;
      if (currentFocus < 0) currentFocus = (x.length - 1);
      /*add class "autocomplete-active":*/
      x[currentFocus].classList.add("autocomplete-active");
    }
    function removeActive(x) {
      /*a function to remove the "active" class from all autocomplete items:*/
      for (var i = 0; i < x.length; i++) {
        x[i].classList.remove("autocomplete-active");
      }
    }
    function closeAllLists(elmnt) {
      /*close all autocomplete lists in the document,
      except the one passed as an argument:*/
      var x = document.getElementsByClassName("autocomplete-items");
      for (var i = 0; i < x.length; i++) {
        if (elmnt != x[i] && elmnt != inp) {
          x[i].parentNode.removeChild(x[i]);
        }
      }
    }
    /*execute a function when someone clicks in the document:*/
    document.addEventListener("click", function (e) {
        closeAllLists(e.target);
    });
  }
  function autocompleteToTransfer(inp, arr) {
    /*the autocomplete function takes two arguments,
    the text field element and an array of possible autocompleted values:*/
    var currentFocus;
    /*execute a function when someone writes in the text field:*/
    inp.addEventListener("input", function(e) {
        var a, b, i, val = this.value;
        /*close any already open lists of autocompleted values*/
        closeAllLists();
        if (!val) { return false;}
        currentFocus = -1;
        /*create a DIV element that will contain the items (values):*/
        a = document.createElement("DIV");
        a.setAttribute("id", this.id + "autocomplete-list");
        a.setAttribute("class", "autocomplete-items");
        /*append the DIV element as a child of the autocomplete container:*/
        this.parentNode.appendChild(a);
        /*for each item in the array...*/
        for (i = 0; i < arr.length; i++) {
          /*check if the item starts with the same letters as the text field value:*/
          if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
            /*create a DIV element for each matching element:*/
            b = document.createElement("DIV");
            /*make the matching letters bold:*/
            b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
            b.innerHTML += arr[i].substr(val.length);
            /*insert a input field that will hold the current array item's value:*/
            b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
            /*execute a function when someone clicks on the item value (DIV element):*/
            b.addEventListener("click", async function(e) {
                /*insert the value for the autocomplete text field:*/
                inp.value = this.getElementsByTagName("input")[0].value;
                selectedTechnicianID = inp.value;
                var n1 = selectedTechnicianID.lastIndexOf("(");
                var n2 = selectedTechnicianID.lastIndexOf(")");
                selectedTechnicianID = selectedTechnicianID.substring(n1+1,n2);
                // console.log(selectedTechnicianID);
                document.getElementById("selected-technician-inspection").innerHTML = inp.value;
                var user = await cc.getUserDetailsFromEmpID(selectedTechnicianID);
                console.log(user);
                document.getElementById("selected-company-inspection").innerHTML = user[0]["Company"];
                checklistDataModal();
                /*close the list of autocompleted values,
                (or any other open lists of autocompleted values:*/
                closeAllLists();
            });
            a.appendChild(b);
          }
        }
    });
    /*execute a function presses a key on the keyboard:*/
    inp.addEventListener("keydown", function(e) {
        var x = document.getElementById(this.id + "autocomplete-list");
        if (x) x = x.getElementsByTagName("div");
        if (e.keyCode == 40) {
          /*If the arrow DOWN key is pressed,
          increase the currentFocus variable:*/
          currentFocus++;
          /*and and make the current item more visible:*/
          addActive(x);
        } else if (e.keyCode == 38) { //up
          /*If the arrow UP key is pressed,
          decrease the currentFocus variable:*/
          currentFocus--;
          /*and and make the current item more visible:*/
          addActive(x);
        } else if (e.keyCode == 13) {
          /*If the ENTER key is pressed, prevent the form from being submitted,*/
          e.preventDefault();
          if (currentFocus > -1) {
            /*and simulate a click on the "active" item:*/
            if (x) x[currentFocus].click();
          }
        }
    });
    function addActive(x) {
      /*a function to classify an item as "active":*/
      if (!x) return false;
      /*start by removing the "active" class on all items:*/
      removeActive(x);
      if (currentFocus >= x.length) currentFocus = 0;
      if (currentFocus < 0) currentFocus = (x.length - 1);
      /*add class "autocomplete-active":*/
      x[currentFocus].classList.add("autocomplete-active");
    }
    function removeActive(x) {
      /*a function to remove the "active" class from all autocomplete items:*/
      for (var i = 0; i < x.length; i++) {
        x[i].classList.remove("autocomplete-active");
      }
    }
    function closeAllLists(elmnt) {
      /*close all autocomplete lists in the document,
      except the one passed as an argument:*/
      var x = document.getElementsByClassName("autocomplete-items");
      for (var i = 0; i < x.length; i++) {
        if (elmnt != x[i] && elmnt != inp) {
          x[i].parentNode.removeChild(x[i]);
        }
      }
    }
    /*execute a function when someone clicks in the document:*/
    document.addEventListener("click", function (e) {
        closeAllLists(e.target);
    });
  }
  function createRowForFromTechnicianChangeTable(dataRow) {
        tableRow = document.createElement("tr");

        selectColumn = document.createElement("td"); 
        // selectColumn.className = "form-check-input";
        selectColumn.innerHTML = '<input type="checkbox" class="form-check-input">';

        toolcodeColumn = document.createElement("td");
        toolcodeColumn.innerHTML = dataRow["Tool Code"];

        toolnameColumn = document.createElement("td");
        toolnameColumn.innerHTML = dataRow["Tool Name"];

        tableRow.appendChild(selectColumn);
        tableRow.appendChild(toolcodeColumn);
        tableRow.appendChild(toolnameColumn);

        return tableRow;
    }

    async function addNewTool() {
        //console.log("test");
        permanent = 0;
        var tcode = document.getElementById("tcode").value;
        var tname = document.getElementById("tname").value;
        var brand = document.getElementById("brand").value;
        var value = document.getElementById("value").value;
        var costPattern = /^\d*$/;
        if (!costPattern.test(value)) {
            alert1("Please make sure that the Cost column includes only numbers.");
            return;
        }
        var location = document.getElementById("location").value;
        var description = document.getElementById("description").value;
        var dop = document.getElementById("dop").value;
        var warranty_ed = document.getElementById("warranty-ed").value;
        var quantity = 1;
        // var auth = document.getElementById("auth").checked;
        if (document.getElementById("pok").checked == true) {
            var isKit = 1;
        }
        else { var isKit = 0; }
        if (document.getElementById("maintained").checked == true) {
            var maintained = 1;
        }
        else { var maintained = 0; }

        var amc = document.getElementById("amc").value;
        var amcpro = document.getElementById("amcpro").value;
        var amccon = document.getElementById("amccon").value;
        var amcpersd = document.getElementById("amcpersd").value;
        var amcpered = document.getElementById("amcpered").value;
        var dolm = document.getElementById("dolm").value;
        if (dolm == '')
            dolm = moment();
        dolm = dolm.format("YYYY-MM-DD");
        var inf = document.getElementById("if").value + " " + document.getElementById("duration").value;



        if (isKit == 0 & maintained == 0) {
            var at = await cc.addTool(tcode, tname, brand, value, location, description, dop, warranty_ed, quantity, maintained, permanent, workshop_id);
        }
        else if (isKit == 0 & maintained == 1) {
            var at = await cc.addMaintainedTool(tcode, tname, brand, value, location, description, dop, warranty_ed, quantity, maintained, amc, amcpro, amccon, amcpersd, amcpered, dolm, inf, permanent, workshop_id);
        }
        else if (isKit == 1 & maintained == 0) {
            var at = await cc.addToolWithChildren(childrenlist, tcode, tname, brand, value, location, description, dop, warranty_ed, quantity, maintained, permanent, workshop_id);
        }
        else if (isKit == 1 & maintained == 1) {
            var at = await cc.addMaintainedToolWithChildren(childrenlist, tcode, tname, brand, value, location, description, dop, warranty_ed, quantity, maintained, amc, amcpro, amccon, amcpersd, amcpered, dolm, inf, permanent, workshop_id);
        }
        document.getElementById("tcode").value = '';
        document.getElementById("tname").value = '';
        document.getElementById("brand").value = '';
        document.getElementById("value").value = '';
        document.getElementById("location").value = '';
        document.getElementById("description").value = '';
        document.getElementById("dop").value = '';
        document.getElementById("pok").checked = false;
        document.getElementById("maintained").checked = false;
        // document.getElementById("npok").checked = false;
        document.getElementById("nmaintained").checked = false;
        document.getElementById("amc").value = '';
        document.getElementById("amcpro").value = '';
        document.getElementById("amccon").value = '';
        document.getElementById("amcpersd").value = '';
        document.getElementById("amcpered").value = '';
        document.getElementById("dolm").value = '';
        document.getElementById("if").value = '';
        document.getElementById("child-parts-tbody").innerHTML = "";
        if (at == 1) {
            alert2("Tool Added Successfully");
            setTimeout(() => { closeAlert2Modal() }, 3000);
            if (selectedFile) {
                var storageRef = firebase.storage().ref();
                var extension = selectedFile.name.substring(selectedFile.name.indexOf('.'));
                var fileRef = storageRef.child(tcode + extension);
                fileRef.put(selectedFile).then(function (snapshot) {
                    alert1("Inspection sheet linked successfully.")
                }).catch(error => alert1("Error in linking inspection sheet."));
            }

        }
        else
            alert1("Attempt unsuccessful. Please try again!");
        //window.close();
        document.getElementById("modify-tool-tbody").innerHTML = '';
        initiateSetup();
        // resetVariables();
    }
    

  function clearNotificationsFilter() {
    // document.getElementById("loader").removeAttribute("hidden");
    document.getElementById("notifications-date-search").value = '';
    document.getElementById("notifications-search").value='';
    executeSearchNotifications();
  }
  function executeSearchNotifications() {
    // document.getElementById("loader").removeAttribute("hidden");
    var input, filter, table, tr, td, i, txtValue;
    searchInput = document.getElementById("notifications-search");
    dateInput = document.getElementById("notifications-date-search").value;
    filter = searchInput.value.toUpperCase();
    table = document.getElementById("notifications-table");
    tr = table.getElementsByTagName("tr");
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 1; i < tr.length; i++) {
      inlineDate = tr[i].getElementsByTagName("td")[1].innerHTML;
      inlineDate = moment(new Date(inlineDate)).format("YYYY-MM-DD");
      text = tr[i].getElementsByTagName("td")[0].innerHTML;

      if (text.toUpperCase().indexOf(filter) > -1 && (!dateInput || inlineDate == dateInput)) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }

    }
    // document.getElementById("loader").hidden = true;
  }
  function executeSearchUnderMaintenance() {
    // document.getElementById("loader").removeAttribute("hidden");
    var input, filter, table, tr, td, i, txtValue;
    searchInput = document.getElementById("under-maintenance-search");
    filter = searchInput.value.toUpperCase();
    table = document.getElementById("under-maintenance-table");
    tr = table.getElementsByTagName("tr");
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 1; i < tr.length; i++) {
      toolcode = tr[i].getElementsByTagName("td")[0].innerHTML;
      toolname = tr[i].getElementsByTagName("td")[1].innerHTML;
      if (toolcode.toUpperCase().indexOf(filter) > -1 || toolname.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }

    }
    // document.getElementById("loader").hidden = true;
  }
  function executeSearchMaintenanceDue() {
    // document.getElementById("loader").removeAttribute("hidden");
    var input, filter, table, tr, td, i, txtValue;
    searchInput = document.getElementById("maintenance-due-search");
    filter = searchInput.value.toUpperCase();
    table = document.getElementById("maintenance-due-table");
    tr = table.getElementsByTagName("tr");
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 1; i < tr.length; i++) {
      toolcode = tr[i].getElementsByTagName("td")[1].innerHTML;
      toolname = tr[i].getElementsByTagName("td")[0].innerHTML;

      if (toolcode.toUpperCase().indexOf(filter) > -1 || toolname.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }

    }
    // document.getElementById("loader").hidden = true;
  }
  function executeSearchIssueHistory() {
    // document.getElementById("loader").removeAttribute("hidden");
    var input, filter, table, tr, td, i, txtValue;
    searchInput = document.getElementById("issue-history-search");
    // dateInput = document.getElementById("notifications-date-search").value;
    filter = searchInput.value.toUpperCase();
    table = document.getElementById("history-table");
    tr = table.getElementsByTagName("tr");
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 1; i < tr.length; i++) {
      inlineDate = tr[i].getElementsByTagName("td")[1].innerHTML;
      inlineDate = moment(new Date(inlineDate)).format("YYYY-MM-DD");
      empid = tr[i].getElementsByTagName("td")[0].innerHTML;
      toolcode = tr[i].getElementsByTagName("td")[1].innerHTML;
      toolname = tr[i].getElementsByTagName("td")[2].innerHTML;

      if ((empid.toUpperCase().indexOf(filter) > -1) || (toolcode.toUpperCase().indexOf(filter) > -1) || (toolname.toUpperCase().indexOf(filter) > -1)) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }

    }
    // document.getElementById("loader").hidden = true;
  }
  function executeSearchTools(statusInput) {
    // document.getElementById("loader").removeAttribute("hidden");
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("special-tools-search");
    // statusInput = document.getElementById("spcl-tools-status-ddm");
    console.log(status);
    filter = input.value.toUpperCase();
    table = document.getElementById("modify-tool-table");
    tr = table.getElementsByTagName("tr");
    // console.log(tr);
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 1; i < tr.length; i++) {
      toolname = tr[i].getElementsByTagName("td")[1].innerHTML;
      tcode = tr[i].getElementsByTagName("td")[0].innerHTML;
      status = tr[i].getElementsByTagName("td")[2].innerHTML;
      var n = status.indexOf('<');
      status = status.substring(0,n);
      if(statusInput && input)
      {
        if (((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) && status==statusInput) {
        tr[i].style.display = "";
        } 
        else {
        tr[i].style.display = "none";
        }
      }
      else if(statusInput)
      {
        if(status==statusInput) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
      else
      {
        if ((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
    // document.getElementById("loader").hidden = true;
  }
  function executeSearchHandTools(statusInput) {
    // document.getElementById("loader").removeAttribute("hidden");
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("hand-tools-search");
    filter = input.value.toUpperCase();
    table = document.getElementById("modify-hand-tool-table");
    tr = table.getElementsByTagName("tr");
    // console.log(tr);
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 1; i < tr.length; i++) {
      toolname = tr[i].getElementsByTagName("td")[1].innerHTML;
      tcode = tr[i].getElementsByTagName("td")[0].innerHTML;
      status = tr[i].getElementsByTagName("td")[2].innerHTML;
      var n = status.indexOf('<');
      status = status.substring(0,n);
      if(statusInput && input)
      {
        if (((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) && status==statusInput) {
        tr[i].style.display = "";
        } 
        else {
        tr[i].style.display = "none";
        }
      }
      else if(statusInput)
      {
        if(status==statusInput) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
      else
      {
        if ((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }

    }
    // document.getElementById("loader").hidden = true;
  }
  async function register() {
        //console.log("test");
        document.getElementById("loader").removeAttribute("hidden");
        var fname1 = document.getElementById("fname").value;
        var lname1 = document.getElementById("lname").value;
        if (fname1 && lname1) {
            var fname = fname1.replace(/^./, fname1[0].toUpperCase());
            var lname = lname1.replace(/^./, lname1[0].toUpperCase());
        } else {
            alert1("Please fill all the fields");
            document.getElementById("loader").hidden = true;
            return;
        }
        var desg = "Technician";
        var email = document.getElementById("email").value;
        var allEmails = await cc.getAllRegisteredEmails();
        for (var i = 0; i < allEmails.length; i++) {
            if (allEmails[i]["Email"] == email) {
                alert1("This email is already registered.");
                document.getElementById("loader").hidden = true;
                return;
            }
        }
        var id = workshop_id;
        var company = workshopDetails[0]["Company Name"];
        var contactno = document.getElementById("contactno").value;
        var dob = document.getElementById("dob").value;
        var password = Math.random().toString(36).slice(-8);
        try {
            try {
                var new_emp_id = await cc.getMaxID();
            }
            catch{
                console.log("error in getMaxID()");
                alert1("There was an error connecting to ORCUS servers. Please try again.");
                return;
            }

        }
        catch{
            alert1("An error occurred. Please try again later");
            document.getElementById("loader").hidden = true;
            return;
        }
        if (fname && lname && email && dob && contactno && emp_id) {
            try {
                done = await cc.registerUser(fname, lname, desg, email, new_emp_id, company, contactno, dob, password, emp_id, workshop_id);
                document.getElementById("fname").value = '';
                document.getElementById("lname").value = '';
                document.getElementById("email").value = '';
                document.getElementById("contactno").value = '';
                document.getElementById("dob").value = '';
                alert1("Registered Successfully. Account Details have been sent to the registered email.");
                document.getElementById("manager-addpeople").style.display = "none";
                //window.close();
                if (done == 1) {
                    sendEmail(email, 'signup confirmation', password, new_emp_id);
                } else {
                    alert1("An error occured. Please try again later.");
                }
            }
            catch {
                alert1("We could not connect to ORCUS servers. Please try again later.");
                document.getElementById("loader").hidden = true;
                return;
            }
        }
        else {
            alert1("Please fill all the fields.");
            document.getElementById("loader").hidden = true;
            return;
        }
        document.getElementById("loader").hidden = true;
    }

  function executeSearchEquipment(statusInput) {
    // document.getElementById("loader").removeAttribute("hidden");
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("equipment-search");
    filter = input.value.toUpperCase();
    table = document.getElementById("modify-equipment-table");
    tr = table.getElementsByTagName("tr");
    // console.log(tr);
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 1; i < tr.length; i++) {
      toolname = tr[i].getElementsByTagName("td")[1].innerHTML;
      tcode = tr[i].getElementsByTagName("td")[0].innerHTML;
      status = tr[i].getElementsByTagName("td")[2].innerHTML;
      var n = status.indexOf('<');
      status = status.substring(0,n);
      if(statusInput && input)
      {
        if (((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) && status==statusInput) {
        tr[i].style.display = "";
        } 
        else {
        tr[i].style.display = "none";
        }
      }
      else if(statusInput)
      {
        if(status==statusInput) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
      else
      {
        if ((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }

    }
    // document.getElementById("loader").hidden = true;
  }
  function executeSearchAssets(statusInput) {
    // document.getElementById("loader").removeAttribute("hidden");
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("assets-search");
    filter = input.value.toUpperCase();
    table = document.getElementById("update-assets-table");
    tr = table.getElementsByTagName("tr");
    // console.log(tr);
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 1; i < tr.length; i++) {
      toolname = tr[i].getElementsByTagName("td")[1].innerHTML;
      tcode = tr[i].getElementsByTagName("td")[0].innerHTML;
      status = tr[i].getElementsByTagName("td")[2].innerHTML;
      var n = status.indexOf('<');
      status = status.substring(0,n);
      if(statusInput && input)
      {
        if (((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) && status==statusInput) {
        tr[i].style.display = "";
        } 
        else {
        tr[i].style.display = "none";
        }
      }
      else if(statusInput)
      {
        if(status==statusInput) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
      else
      {
        if ((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }

    }
    // document.getElementById("loader").hidden = true;
  }
  function executeSearchMaterials(statusInput) {
    // document.getElementById("loader").removeAttribute("hidden");
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("materials-search");
    filter = input.value.toUpperCase();
    table = document.getElementById("update-materials-table");
    tr = table.getElementsByTagName("tr");
    // console.log(tr);
    // Loop through all table rows, and hide those who don't match the search query
    for (i = 1; i < tr.length; i++) {
      toolname = tr[i].getElementsByTagName("td")[1].innerHTML;
      tcode = tr[i].getElementsByTagName("td")[0].innerHTML;
      status = tr[i].getElementsByTagName("td")[2].innerHTML;
      var n = status.indexOf('<');
      status = status.substring(0,n);
      if(statusInput && input)
      {
        if (((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) && status==statusInput) {
        tr[i].style.display = "";
        } 
        else {
        tr[i].style.display = "none";
        }
      }
      else if(statusInput)
      {
        if(status==statusInput) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
      else
      {
        if ((toolname.toUpperCase().indexOf(filter) > -1) || (tcode.toUpperCase().indexOf(filter) > -1)) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }
    }
    // document.getElementById("loader").hidden = true;
  }

  function alert1(alertMessage) {
        document.getElementById("alert-modal-text").innerHTML = alertMessage;
        // document.getElementById("alert-modal").classList.add("is-active");
        var options = { backdrop: "static", keyboard: true, focus: true };
          var alertModal = new bootstrap.Modal(document.getElementById("alert-modal"), options)
          alertModal.show();

    }

    function alertDisappearing(alertMessage) {
        if (alertMessage) {
            document.getElementById("alert-modal-text").innerHTML = alertMessage;
        }
        var options = { backdrop: "static", keyboard: true, focus: true };
        var alertModal = new bootstrap.Modal(document.getElementById("alert-modal"), options)
        alertModal.show();
        setTimeout(() => { alertModal.hide() }, 2000);
    }
    function manageShortcuts(e) {
        var evtobj = window.event ? event : e
        if (evtobj.keyCode == 82 && evtobj.ctrlKey) {
            e.preventDefault();
            location.reload();
        }
        if (evtobj.keyCode == 72 && evtobj.ctrlKey) {
            e.preventDefault();
            document.getElementById("home-circle").click();
        }
    }
    function refreshPage() {
      location.reload();
    }
    function logout() {
        // document.location = "https://firebasestorage.googleapis.com/v0/b/orcus-fb184.appspot.com/o/release%2Findex.html?alt=media&token=b1e83188-3026-48e0-a8ef-e99741f5c20f";
        store.set("currentDiv", '');
        document.location = 'index.html';
    }
  </script>
</html>      